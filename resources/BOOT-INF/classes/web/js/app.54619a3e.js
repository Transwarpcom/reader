(function(e){function t(t){for(var n,r,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},r={app:0},a={app:0},i=[];function s(e){return c.p+"js/"+({"index~reader":"index~reader",index:"index",reader:"reader",setting:"setting"}[e]||e)+"."+{"index~reader":"c43437ec",index:"459d9e84",reader:"6e871769",setting:"6919980b"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={index:1,reader:1,setting:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise((function(t,o){for(var n="css/"+({"index~reader":"index~reader",index:"index",reader:"reader",setting:"setting"}[e]||e)+"."+{"index~reader":"31d6cfe0",index:"9347d249",reader:"1ebd7f35",setting:"d9b851e0"}[e]+".css",a=c.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===a))return t()}var f=document.getElementsByTagName("style");for(s=0;s<f.length;s++){l=f[s],u=l.getAttribute("data-href");if(u===n||u===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete r[e],d.parentNode.removeChild(d),o(i)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){r[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var f=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(d);var o=a[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",f.name="ChunkLoadError",f.type=n,f.request=r,o[1](f)}a[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var d=u;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0571":function(e,t,o){},"0d12":function(e,t,o){},"0fe7":function(e,t,o){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"book-kind",domProps:{innerHTML:e._s(e.renderBookKind(e.book))}})},r=[],a=(o("4de4"),o("a15b"),o("d81d"),o("e9f5"),o("910d"),o("ab43"),o("d3b7"),{name:"BookKind",props:["book"],methods:{renderBookKind:function(){if(!this.book)return"";var e=this.book.wordCount+","+this.book.kind;if(!e)return"";var t=e.split(",");return t.filter((function(e){return e&&"undefined"!==e})).map((function(e){return'<span class="small-tag">'.concat(e,"</span>")})).join("")}}}),i=a,s=(o("c2d5"),o("2877")),c=Object(s["a"])(i,n,r,!1,null,null,null);t["a"]=c.exports},"13d2e":function(e,t,o){"use strict";o("e40f")},1406:function(e,t,o){},1632:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXh7vLf7PDj8PTm8/ecW+lZAAACZElEQVQozw2RsU8TUQCHfz3fw7MS87jeI7DdmSMpDEoHE+P0HqGkvRR8vb5XC4NpN2RQZqcK9xJkwtriekcggerC4OZADDiT+A+goxv/gfwB3zd8H/T6vYF/pTZkCSmDNd3CBEtmZJP4N+CvvhecDvmntKsvwB17rpbIRTLOEoYkj9KZzRUuJsuBQFwgptyJ3Y7EL4V+ud5LO1UnMeQSSObqisiISZkbQBlliP3qWSk3GPQXjxv6VF2BTDO4ySx1zhuJXbA2wBNJF4t5vH9keg6wu5NvUpLtXrZ3OHC9ZsgVcZdOl38PM1y/L6m8GRiErj4AqezUjHGatGGIgs5NJDHh8Ua1IuB4035haVT6SaYWMoQ0eJ3rB/Gpnr3fB49YAy1Wa21YKqAHOmAveVw6CCMGMZh5bGtVI7jnZaiQNbta1Z+285oSoKoRbta1KZ/1bBdKH/RIxv2pRVpkoCmvpr097RWoo0CpMlTWllIenSjECU8mV43mHx2fIRfH/pncrJm3+58BWdbSqCS07/yiQnvHiCG4ZPGRFeAtfreoOubyctzHvLNHhjNvIhukxQzjU5O6QdOEzUp1Ef4d98Pxz+IPYX0bcpnT52dbedfz8y7C4R89RV+MjJkuCCx7mWDt4eyK/62lQB55xXGJK7p8u6bgRv4hVHylelYGGFs64W94tng8sAIVqSRJBpqRA9rFvAysS+9ak8s7557pz5HR4qhCRmWgplpTRJ+bhYfSAMO8/YBucWPuSdmFFtOnuWqvV2NbF6CJnbhNDzEZ/T0XSDrUydzkZCG1z/oIEyUFYxW/KPXNfwopuHDcO04UAAAAAElFTkSuQmCC"},"1a58":function(e,t,o){"use strict";var n=o("53ca"),r=(o("0fb7"),o("450d"),o("f529")),a=o.n(r),i=o("15fd"),s=o("5530"),c=(o("99af"),o("7db0"),o("c740"),o("4160"),o("277d"),o("d81d"),o("14d9"),o("13d5"),o("45fc"),o("4e82"),o("a434"),o("f4b3"),o("0d03"),o("b0c0"),o("e9f5"),o("f665"),o("7d54"),o("ab43"),o("a732"),o("e9c4"),o("d3b7"),o("ac1f"),o("5319"),o("2ca0"),o("159b"),o("2b0e")),l=o("2f62"),u=o("bfff"),f=o("63f0"),d=["catalog","latestChapterTitle","intro"],p=[{username:"默认",userNS:"default"}],h=[{groupId:-1,groupName:"全部",order:-10,show:!0},{groupId:-2,groupName:"本地",order:-9,show:!0},{groupId:-3,groupName:"音频",order:-8,show:!0},{groupId:-4,groupName:"未分组",order:-7,show:!0},{groupId:-5,groupName:"更新错误",order:-6,show:!0}];c["default"].use(l["a"]);var m=function(e){return e.isManagerMode?e.userNS:(e.userInfo||{}).username||"default"};t["a"]=new l["a"].Store({state:{connected:!1,api:Object(f["b"])("api_prefix")||location.host+location.pathname.replace("index.html","").replace(/\/$/,"")+"/reader3",shelfBooks:[],readingBook:{},config:Object(s["a"])({},u["b"].config),miniInterface:!1,windowSize:{width:window.innerWidth,height:window.innerHeight},touchable:"ontouchstart"in document,showLogin:!1,loginAuth:!0,token:Object(f["b"])("api_token")||"",bookSourceList:[],isSecureMode:!1,isManagerMode:!1,secureKey:"",userInfo:{},userList:[].concat(p),userNS:"default",showManagerMode:!1,version:"v3.2.14-05250935",filterRules:[],speechVoiceConfig:Object(s["a"])({},u["b"].speechVoiceConfig),safeArea:{top:0,bottom:0,left:0,right:0},autoPlay:!1,failureIncludeTimeout:!1,failureBookSource:[],bookGroupList:[],rssSourceList:[],shelfConfig:Object(s["a"])({},u["b"].shelfConfig),showImageViewer:!1,previewImageIndex:0,previewImgList:[],searchConfig:Object(s["a"])({},u["b"].searchConfig),txtTocRules:[],customConfigList:[],showBookInfo:{},cachingBookList:[],bookmarks:[],httpTTS:[],notAutoSync:!1},mutations:{setShelfBooks:function(e,t){window.shelfBooks=t,e.shelfBooks=t.map((function(e){return{author:e.author,bookUrl:e.bookUrl,coverUrl:e.coverUrl,tocUrl:e.tocUrl,charset:e.charset,customCoverUrl:e.customCoverUrl,canUpdate:e.canUpdate,durChapterIndex:e.durChapterIndex,durChapterPos:e.durChapterPos,durChapterTime:e.durChapterTime,durChapterTitle:e.durChapterTitle,kind:e.kind,intro:e.intro,lastCheckTime:e.lastCheckTime,lastCheckError:e.lastCheckError,latestChapterTitle:e.latestChapterTitle,name:e.name,origin:e.origin,originName:e.originName,totalChapterNum:e.totalChapterNum,type:e.type,group:e.group,wordCount:e.wordCount,readConfig:e.readConfig}}))},updateShelfBook:function(e,t){var o=e.shelfBooks.findIndex((function(e){return e.bookUrl===t.bookUrl}));o>=0&&(e.shelfBooks[o]=Object(s["a"])(Object(s["a"])({},e.shelfBooks[o]),{author:t.author||e.shelfBooks[o].author,bookUrl:t.bookUrl||e.shelfBooks[o].bookUrl,coverUrl:t.coverUrl||e.shelfBooks[o].coverUrl,tocUrl:t.tocUrl||e.shelfBooks[o].tocUrl,charset:t.charset||e.shelfBooks[o].charset,customCoverUrl:t.customCoverUrl||e.shelfBooks[o].customCoverUrl,canUpdate:"undefined"===typeof t.canUpdate?e.shelfBooks[o].canUpdate:t.canUpdate,durChapterIndex:t.durChapterIndex||e.shelfBooks[o].durChapterIndex,durChapterPos:t.durChapterPos||e.shelfBooks[o].durChapterPos,durChapterTime:t.durChapterTime||e.shelfBooks[o].durChapterTime,durChapterTitle:t.durChapterTitle||e.shelfBooks[o].durChapterTitle,kind:t.kind||e.shelfBooks[o].kind,intro:t.intro||e.shelfBooks[o].intro,lastCheckTime:t.lastCheckTime||e.shelfBooks[o].lastCheckTime,latestChapterTitle:t.latestChapterTitle||e.shelfBooks[o].latestChapterTitle,name:t.name||e.shelfBooks[o].name,origin:t.origin||e.shelfBooks[o].origin,originName:t.originName||e.shelfBooks[o].originName,totalChapterNum:t.totalChapterNum||e.shelfBooks[o].totalChapterNum,type:t.type||e.shelfBooks[o].type,group:t.group||e.shelfBooks[o].group,readConfig:t.readConfig||e.shelfBooks[o].readConfig}),e.shelfBooks=[].concat(e.shelfBooks))},setReadingBook:function(e,t,o){if(!o&&e.shelfBooks&&e.shelfBooks.length){for(var n=0;n<e.shelfBooks.length;n++)if(e.shelfBooks[n].bookUrl===t.bookUrl){var r=((t.catalog||[])[t.index]||{}).title;e.shelfBooks[n]=Object(s["a"])(Object(s["a"])({},e.shelfBooks[n]),{},{durChapterTime:(new Date).getTime(),durChapterIndex:t.index},r?{durChapterTitle:r}:{});break}e.shelfBooks=[].concat(e.shelfBooks)}e.readingBook=t;t.catalog,t.latestChapterTitle,t.intro;var a=Object(i["a"])(t,d);Object(f["c"])(m(e)+"@readingRecent",JSON.stringify(a))},clearReadingBook:function(e){e.readingBook={},Object(f["a"])(m(e)+"@readingRecent")},setConfig:function(e,t){if(delete t.name,delete t.configDefaultType,t.theme!==u["b"].defaultNightTheme&&"custom"!==t.theme?t.themeType="day":t.theme===u["b"].defaultNightTheme&&(t.themeType="night"),e.config=t,t.customConfig){var o=e.customConfigList.findIndex((function(e){return e.name===t.customConfig}));if(o>=0){var n=Object(s["a"])({},e.customConfigList[o]);u["f"].forEach((function(e){"undefined"!==typeof t[e]&&"name"!==e&&"configDefaultType"!==e&&(n[e]=t[e])})),e.customConfigList[o]=n,e.customConfigList=[].concat(e.customConfigList),Object(f["c"])("customConfigList",JSON.stringify(e.customConfigList))}}Object(f["c"])("config",JSON.stringify(t))},setMiniInterface:function(e,t){"自适应"===e.config.pageMode?e.miniInterface=t:e.miniInterface=!0},setWindowSize:function(e,t){e.windowSize=t},setTouchable:function(e,t){e.touchable=t},setApi:function(e,t){e.api=t},setConnected:function(e,t){e.connected=t},setShowLogin:function(e,t){e.showLogin=t,t&&(e.loginAuth=!1)},setLoginAuth:function(e,t){e.loginAuth=t},setToken:function(e,t){e.token=t,Object(f["c"])("api_token",t)},setBookSourceList:function(e,t){e.bookSourceList=t.map((function(e){return{bookSourceGroup:e.bookSourceGroup,bookSourceName:e.bookSourceName,bookSourceType:e.bookSourceType,bookSourceUrl:e.bookSourceUrl,exploreUrl:e.exploreUrl}}))},setUserNS:function(e,t){e.userNS=t},setIsSecureMode:function(e,t){e.isSecureMode=t},setSecureKey:function(e,t){e.secureKey=t},setIsManagerMode:function(e,t){e.isManagerMode=t},setShowManagerMode:function(e,t){e.showManagerMode=t},setUserInfo:function(e,t){e.userInfo=t},setUserList:function(e,t){t.length?e.userList=[].concat([{username:"系统默认",userNS:"default"}]).concat(t):e.userList=[].concat(p)},setFilterRules:function(e,t){e.filterRules=t,Object(f["c"])("filterRules",JSON.stringify(t))},addFilterRule:function(e,t){var o=[].concat(e.filterRules);"undefined"!==typeof t.index&&t.index>=0?(o[t.index]=t,e.filterRules=o):(o=o.concat([t]),e.filterRules=o)},setNightTheme:function(e,t){var o,n=Object(s["a"])({},e.config);o=t?e.customConfigList.find((function(e){return"黑夜默认"===e.configDefaultType})):e.customConfigList.find((function(e){return"白天默认"===e.configDefaultType})),o?(n=Object(s["a"])(Object(s["a"])({},n),o),n.customConfig=o.name,e.config=n,Object(f["c"])("config",JSON.stringify(n))):a.a.error("未配置"+(t?"黑夜默认":"白天默认")+"方案")},setCustomConfig:function(e,t){var o=e.customConfigList.find((function(e){return e.name===t}));if(o){var n=Object(s["a"])(Object(s["a"])({},e.config),o);n.customConfig=o.name,e.config=n,Object(f["c"])("config",JSON.stringify(n))}},setSpeechVoiceConfig:function(e,t){e.speechVoiceConfig=t,Object(f["c"])("speechVoiceConfig",JSON.stringify(t))},setSafeArea:function(e,t){e.safeArea=Object(s["a"])(Object(s["a"])({},e.safeArea),t)},setAutoPlay:function(e,t){e.autoPlay=t},addFailureBookSource:function(e,t){var o=t.bookSourceUrl,n=t.errorMsg,r=e.failureBookSource.findIndex((function(e){return e.bookSourceUrl===o}));if(!(r>=0)){var a=e.bookSourceList.find((function(e){return e.bookSourceUrl===o}));a&&(e.failureBookSource=e.failureBookSource.concat([Object(s["a"])(Object(s["a"])({},a),{},{errorMsg:n})]))}},removeFailureBookSource:function(e,t){for(var o=function(o){var n=e.failureBookSource.findIndex((function(e){return e.bookSourceUrl===t[o].bookSourceUrl}));n>=0&&e.failureBookSource.splice(n,1)},n=0;n<t.length;n++)o(n)},setFailureIncludeTimeout:function(e,t){e.failureIncludeTimeout=t},setBookGroupList:function(e,t){var o=[];h.forEach((function(e){t.some((function(t){return t.groupId===e.groupId}))||o.push(e)})),e.bookGroupList=o.concat(t).sort((function(e,t){return e.order-t.order}))},setRssSourceList:function(e,t){e.rssSourceList=[].concat(t)},setShelfConfig:function(e,t){e.shelfConfig=t,Object(f["c"])("shelfConfig",JSON.stringify(t))},setPreviewImageIndex:function(e,t){e.previewImageIndex=t},setPreviewImgList:function(e,t){!1===t?(e.showImageViewer=!1,e.previewImgList=[],e.previewImageIndex=0):(e.previewImgList=t,e.showImageViewer=!0)},setSearchConfig:function(e,t){e.searchConfig=t,Object(f["c"])("searchConfig",JSON.stringify(t))},setTxtTocRules:function(e,t){e.txtTocRules=[].concat(t)},setCustomConfigList:function(e,t){e.customConfigList=[].concat(t),Object(f["c"])("customConfigList",JSON.stringify(t))},setShowBookInfo:function(e,t){e.showBookInfo=t},setCachingBookList:function(e,t){e.cachingBookList=[].concat(t)},setBookmarks:function(e,t){e.bookmarks=t},setHttpTTS:function(e,t){e.httpTTS=t},setNotAutoSync:function(e,t){e.notAutoSync=t,Object(f["c"])("notAutoSync",t)}},getters:{api:function(e){return e.api.startsWith("http://")||e.api.startsWith("https://")?e.api:e.api.startsWith("//")?window.location.protocol.startsWith("http")?e.api:"http:"+e.api:window.location.protocol.startsWith("http")?"//"+e.api:"http://"+e.api},apiRoot:function(e,t){return t.api.replace(/\/reader3\/?/,"")},isSlideRead:function(e){return e.miniInterface&&"左右滑动"===e.config.readMethod},isSystemNight:function(e){return e.config.theme===u["b"].defaultNightTheme},isNight:function(e){return"night"===e.config.themeType},isKindlePage:function(e){return"Kindle"===e.config.pageType},isNormalPage:function(e){return"正常"===e.config.pageType},currentContentBGImg:function(e,t){if(e.config.contentBGImg)return e.config.contentBGImg.startsWith("bg/")||e.config.contentBGImg.startsWith("http://")||e.config.contentBGImg.startsWith("https://")||e.config.contentBGImg.startsWith("//")?e.config.contentBGImg:t.apiRoot+e.config.contentBGImg},customCSSUrl:function(e,t){return!!t.api&&t.apiRoot+"/assets/reader.css"},currentFontFamily:function(e){return u["b"].fonts[e.config.font]},currentCustomFontFamily:function(e,t){var o=u["a"][e.config.font];if(e.config.customFontsMap&&e.config.customFontsMap[o]){var n=e.config.customFontsMap[o];return{name:o,url:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("//")?n:t.apiRoot+n}}return null},currentThemeConfig:function(e,t){if("custom"===e.config.theme)return{body:(e.miniInterface&&e.config.isNormalPage?"linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 56px), ":"")+(e.config.bodyColor||"#eadfca"),content:{backgroundImage:t.currentContentBGImg?"".concat(e.miniInterface&&e.config.isNormalPage?"linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 56px), ":"","url(").concat(t.currentContentBGImg,")"):null,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundColor:e.config.contentColor||"#ede7da",backgroundSize:"cover"},popupPure:e.config.popupColor||"#ede7da",popup:(e.miniInterface&&e.config.isNormalPage?"linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 36px), ":"")+(e.config.popupColor||"#ede7da")};var o=Object(s["a"])({},u["b"].themes[e.config.theme]);return o.popupPure=o.popup,e.miniInterface&&e.config.isNormalPage&&(o.body="linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 36px), "+o.body,o.content="linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 36px), "+o.content,o.popup="linear-gradient(to bottom,rgba(0,0,0,.2) 0,transparent 36px), "+o.popup),o},shelfBooks:function(e){return e.shelfBooks.sort((function(e,t){var o=e["durChapterTime"]||0,n=t["durChapterTime"]||0;return n-o}))},bookSourceGroupList:function(e){var t={};e.bookSourceList.forEach((function(e){e.bookSourceGroup&&e.bookSourceGroup.split(",").forEach((function(e){t[e]=1+(0|t[e])}))}));var o=[{name:"全部分组",value:"",count:e.bookSourceList.length}];for(var n in t)Object.hasOwnProperty.call(t,n)&&o.push({name:n,value:n,count:t[n]});return o},builtInBookGroupMap:function(){return h.reduce((function(e,t){return e[t.groupId]=t.groupName,e}),{})},config:function(e){return e.config},shelfConfig:function(e){return e.shelfConfig},collapseMenu:function(e){return e.miniInterface},dialogWidth:function(e){return e.miniInterface?"85%":Math.min(Math.max(.7*e.windowSize.width,750),1e3)+"px"},dialogSmallWidth:function(e){return e.miniInterface?"85%":"500px"},dialogTop:function(e,t){return(e.windowSize.height-t.dialogContentHeight-70-54-60)/2+"px"},dialogContentHeight:function(e){return e.miniInterface?e.windowSize.height-54-60-70:Math.min(.7*e.windowSize.height-70-54-60,400)},popupWidth:function(e){return e.miniInterface?e.windowSize.width:"600"},currentUserName:function(e){return m(e)},currentChapter:function(e){return e.readingBook&&e.readingBook.catalog?e.readingBook.catalog[e.readingBook.index]:{}},readingBook:function(e){return Object(s["a"])(Object(s["a"])({},e.readingBook),e.shelfBooks.find((function(t){return t.bookUrl===e.readingBook.bookUrl}))||{})},hasLogin:function(e){return!e.isSecureMode||e.isSecureMode&&e.userInfo.username}},actions:{init:function(e){var t=e.commit;try{var o=Object(f["b"])("notAutoSync");null!==o&&t("setNotAutoSync",o)}catch(n){}},syncFromLocalStorage:function(e){var t=e.commit,o=e.getters;try{var r=Object(f["b"])("config");r&&"object"===Object(n["a"])(r)&&t("setConfig",Object(s["a"])(Object(s["a"])({},u["b"].config),r))}catch(p){}try{var a=Object(f["b"])(o.currentUserName+"@readingRecent");a&&"object"===Object(n["a"])(a)&&("undefined"==typeof a.index&&(a.index=0),t("setReadingBook",a,!0))}catch(p){}try{var i=Object(f["b"])("customConfigList");i&&Array.isArray(i)?t("setCustomConfigList",i):t("setCustomConfigList",[].concat(u["b"].customConfigList)),o.config&&o.config.customConfig&&t("setCustomConfig",o.config.customConfig)}catch(p){}try{var c=Object(f["b"])("speechVoiceConfig");c&&"object"===Object(n["a"])(c)&&t("setSpeechVoiceConfig",Object(s["a"])(Object(s["a"])({},u["b"].speechVoiceConfig),c))}catch(p){}try{var l=Object(f["b"])("shelfConfig");l&&"object"===Object(n["a"])(l)&&t("setShelfConfig",Object(s["a"])(Object(s["a"])({},u["b"].shelfConfig),l))}catch(p){}try{var d=Object(f["b"])("searchConfig");d&&"object"===Object(n["a"])(d)&&t("setSearchConfig",Object(s["a"])(Object(s["a"])({},u["b"].searchConfig),d))}catch(p){}}}})},"1e75":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXM2t7O3ODQ3uLR4OTDp25yAAACdUlEQVQozw3P70sTcQDH8c/3/M7NG+j35mnHwjwh4hRy/QFK3zvPNbeIG1koPZmxfj2IDAwihL53zj0JYisfmEHcZJZOiBUG60lZiI8T/ANusuftgQ+kCPIPeMP7hS5mUrV9c1g6MQCAEZ8tDLHwofImAGRlX+SZK3Vu9rRRPuO4PK6/9nA4GIATsxlODS+rdCMhkAZivpYV0LWoQHSLSA4NfUg+6mY+7BKL2++F9LvnrBDYm6JO9i/YO3i/HJTGQ4pdIV82TbEDFG6vGYCd4wZchgK5J2CrKTLE+Tx0v+YGlIbdWJFcQl4ptBN8fUJQN1MCJLcZLYwUVVo+famGGty8EXJF5ofOEDzcodT3/Fb0I5sHmc1ZG7CcSl8COgxlXx09jT05OafjCZLIHJhGIaU6wDZHsuMQ41wbdjmQXbhKnMq1zlXSYrjCnyZblqexA7fC8RxS74tq2P3OxSQwTuJSApH8OZLzBBp1pOe0i3rdyDUA47GySZ31YmC4EQYSXvFSvieORGBxXF9aeVtUWKGS9WMC4Z9Y2uXnJ2nCUXVMbPOYqNYNmGWWQ7Evr+BWC+a0JAMTImcq/S4Z5INdQMeuOqDIMa9beilxfA60iC6sP1INcPDpmHBW8drZHNmqwyddJtVje9q8WGUgWAOzmbU4FCQBFi8B2Wk6pickBnYhJMenmJGuRmtt2IoKq9NuFGbNFR99sHnvrnLsLysKANDIsxbp6RNMAsoDSKuRpMwZbAAzI68QatIjmZ0aImyM3O8/4e2MNlOHZomFsa/fLDsysliHS+nlYLQJMnynxrH8QO4PaAV2Li8B/+52UgeGIVNFYf8B1XG/kFSmLcUAAAAASUVORK5CYII="},3383:function(e,t,o){e.exports=o.p+"img/mpcode.560264c9.jpg"},3455:function(e,t,o){"use strict";o("6398")},"356c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXPz8/R0dHT09PU1NToNyAhAAACdElEQVQozw3NP0xTQQDH8d9d7sFrG+QeKVgQ4aoFCwFkYERyLY//0UB8GNGg1WAC0RBGJrzW4mCXQmpgvCYOwEAYiulSpYtza2KiW7s5FgNJFSV2/CzfL7RwpoJ20iadmgA8owOyaxmusKE44scBeb4vIv00dqYgmf6jzWcr7W6INbDQeZbQL9ytXeYgtFfzmW1Fek5msxJlwhyt6qDDxOLQzpVPompYrMPnEnhvLm7M5BxY5nowAj3zkydAkpC0FIG6g7AK+Ub25ybyNWVYwtpseP2rfrQwiGRpfqrnMuPeuvr2dA0p2YsHF2XghkrXKtZ8tLBjR7S2qIaYbKmyLd/QP+EogLjqqwNw5Lq1pDlMLkM5+gNoSvdq+Pxmz9/61EFq6GYM6GqaGvlN95zy3gsmEWI8K3k8OP9OmRLEPO6DP3Wv3g42COinJTZ33dcIvs4ESp6opMTjDs6mcYTEbFeUifuxh989yZrIx4lkpuixxz0nHLCekKbE17suKhYkMGhoYhTZtVBvg4bfq/1L1Im0AGMVpBFwumM0zwyuKiCMi5dqR4Flx47AGyF2xTbxqUdTwCH94BT3DozpLV5WuAL/N8rGtHKjotBOOuOtCJ9E21uqsyBoLOzaXbHPrK5PQBP+fBfeidvJAeMIAmzVt5IkJJ9DBWaZDAepYUhlQqHt0h72SJ3j8TZHom64f516xx9T5evgMPgwG82jZdJaJIDyWp6LAjOCclVyzNA3iTKzIULlBQEPaTXlPHok5gISclmyaWZlqY2aTHdRHpJOwTdDEQ3ZfKtbpclcNhyVClagmY+fIfyKukntPqBgnx5QvZHk/D/MK8JMClrSigAAAABJRU5ErkJggg=="},"360d":function(e,t,o){},"3e1c":function(e,t,o){e.exports=o.p+"img/noImage.7443b2ba.png"},"3f54":function(e,t,o){},4039:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEX0/PTx+fH2/vbz+/P4//htSO9OAAAC5UlEQVQ4yyWT0QGjMAxDZTsDWKQDmJQBYrgBUsr+M517x0+LRWw9CyA+pC1YzndrMgHaNXVKQ+di13Of1qbur48nWhuRjj8i6ON8e7pNm7zyag/DBTfS9Z4Hup1fUuXMKY4HEE8QOHCByXkIkl7lDT239RtL9quO4JItmmhOAHXg45QuYKrQFLyGJcRvaTw6kQqZy6mkR6JAPFH/XqsQjEDRmUOA+MNLHGyMUT7AHApoAhjgjIJmCxy6XHdf648AWCdGe57IUDazCeTImQOY4/z+eVYVX2IjOw9RydeAeJwl79iGi4HpgQgHEchWraUZLtayu8scq0lHHHUKMY3Ml8hB7CS1jOckDLG9ccgNeX3124phOcjL9fPnWJhTXpLHeG9DRmHnTxHEaHakS2J51lwAJcUraNbuU7q4gMTDQj3Eripc/x+qFM5VEKAB1roQfAkX5/PxqnS2QpOrxfK1Zft0/omV5T+xCSBUAIbEIwUQgvAfxFE1O8dnk233+1UZiqJ1mAbsue6Yt8tF+yOrxC/YrUhzC4qPlE3EbR5hGKhhHdlrg7J9WunV7L7BcYQwAeE59u2tnN1c6gfVYrQiLSZ9OxZdWDXQq0+r0Pbarh3UqGCwauVvbiXuDsNxCtLDdW9rTF8oQYN4EoXXdfmwNguQP26n/tRjDeo+F2W7PjWtfSr6Bn/z+cXOLp4NnMV4RytvSW4B68m+XN9XfZTFGhO/S+cHTuTqZDC21ccA0N7QsePALaDQC3D1f94U9CWo+aq6BjB3v0rxIimBM12296M3aKPHjXLQE9KQKH4By8RHraJ3AgVto2r4xdFqlaPaiAHLl1ZF4P2pI6cYc+K8UZdcmxy7lqGc1IoPxLmIFuIeEZ6j2sQT88muEg1zwrEDTIX5U/ZmcsqfgVlBumiBLF4sAyhf9BFlXOPKLZ4H0iFb3VoHrGhtHTldKrOvP2/reu2zfV8CXMPqzRdlgd0a5eI7WwB/AYcgavcqxXWEAAAAAElFTkSuQmCC"},"421e":function(e,t,o){"use strict";o("a6b1")},4400:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAElBMVEUQERMODxESFBYWGBkaHB0eICLm6ozJAAACkUlEQVQ4yyWTUdLbMAiEASfvoOkBkBy/O5keIE0v8E/uf5h+68qZWALELgu2MG9PP9qyvCzTVhrrsPGOCjvTfXQZvtp/W3Gy6LCITqs4q/DZ+KYl76zKzHVYpY2wNY27nqN1sbLGcrLH3/ENH4oWlGctsDu8AO+HzTLlsYdh8MzP1m6YDMz0ACfcimvakBj+mwO/+5Uta5teOD379sxK1fUxmUhv8MU3jUT5gs26PMephFznkLcpQZ6/dPL9C/GWHcCxDN6oZhD5xBm5qoYBPA+PFE/H1tXDWcWl8TW7rS+4dUzAVy0BIrvC4/HcqW2TkG1HO8q9dC23INAg7NA4AFRFkDTM2lfELPyFzi1VddcpX2z0KjHBUDmdLNJ6dDps4ytrX+FPsZwE31wSL+6OWfHOAJ3+Y0Rk/MiKfmWNPg7oVP/U3Ck9FoCkC2gBpALOiqbMNTkOe8P4FWkTD2Y9Q3+5VmV0uLUJBl68U5uAK2Kl6QDXvLxbwweOL2sixW78uU8p0ysfc7cWrF1j6B1sPJ4WgclYSnJN1bzozrhEcFHmRzBkbJWqqdG+EYJXRFmT5jnLXPUNF6WBdoFbTxYsmDXVLU/WA7MExNc93sJS5hIXDeLxzMScHzdhKvEkibr6cQXYPrmtmTA7JcInISrTzRDvShTdka0uVGrsJAAR6tSn1sKziZtfKVjAxPrJsYgZO0bye+vKTZ/DgoAoLGNO6jYHimZYTL/3pLJHawquJukjBpfz8WOGVSVIWx9ywUfS5iENutidRM4NzkAmxgUSQ68xgNOU+ZLalr4TS2V+D2xqukZig+Z9DilR7Nouzwp1cp/3E5q6Rdlf08obKvAM4qZ6pMr+w3PmQALSSBfjyZn5DwrNRVbywBQiAAAAAElFTkSuQmCC"},"477e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAACVBMVEX28ef48+n69esoK7jYAAAB4UlEQVQozw2OsW4bQQxEhwLXkDrysGdEqRRgVShfQQq8wOr2jD0jSpXCLvwXbtKfADlFqgSwC/9ljqweZgYzQFnb/QGepYhA9jzmTc1WaSEtQpbFgjWATI00ZZtIckXx8q2Oe5yEByBy+RHOTcM+VVTadULsvxvRC/q8WTwgcWGD+Mnaqa0oy2gw2pKFzK+PzEsus5hP9AHojKslVynLlioVTBEN8cjDNnZoR1uMGTiZAAN47HxMtEkGUE9b8HWzkqNX5Lpk0yVziAJOs46rK1pG/xNuXLjz95fSDoJE5IqG23MAYPtWoeWPvfVtIV/Ng9oH3W0gGMPIOqd4MK4QZ55dV61gOb8Zxp7I9qayaGxp6Q91cmC0ZRdBwEQVHWzSAanlZwVWc9yljeTCeaHjBVvlPSLeyeBUT2rPdJegQI103jVS3uYkyIx1il6mslMDedZuOkwzolsagvPuQAfp7cYg7k9V1NOxfq64PNSvMdwONV4VYEmqlbpZy5OAakRKkjPnL4CBv5/OZRgoWHBmNbxB0LgB1I4vXFj93UoF2/0TPEsWwV9EhbIiTPqYoTHYoMn3enTDjmrFeDTIzaL1bUC/PBIMuF+vSSYSaxoVt90EO3Gu1zrMuMRGUk7Ffv3L+A931Gsb/yBoIgAAAABJRU5ErkJggg=="},"4d71":function(e,t,o){},"525d":function(e,t,o){"use strict";o("922e")},5629:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXN383Q4tDP4c/R5NEInCCXAAACVElEQVQozw3Hv2sTYRwH4M/79pJ7bZL2bXqtERJ97zjUpbZDhg6pfC8qibi8hLR0EaJ0EFxaCSWDxjfpj1zrYBcRBKE6SAfBJWsx9i8IQfdQxDlKtA6t2OnhQfN3lbG7ytYRywF8rVoPCNO0X2sQOKDpAnSDK2VwkHgmh5yLGT8qASt+2KofnNt2Xg1gf1UF8AoM6052cRMNaloLZb7RKQGrKKji2OefsZF+VqIvos5ZLVIZCX61JcwUdk56wASVkgQvzPfvmT2twTSwyYaC/Pl/UhAHorFhBgZtL6XdAZRp1tkPwC1NLa9CWs5prLhI85NBQsLdXvjDymG3/EbYfQhVNYqc3TtktQhWLY3ko0QsdMbSEp+64v0NfxyqLbIGdh6M2xHHlLBGqKTyQo4E/nebBgBfe1GpdeywYXc8CT7D3cKXuMXkBy4xN6o5OuKamYp3DVI6uccO9lxgd2CAlJgI2BGgaAgIJV/TYwKqu3WFccjbMuA+bVkWgS2bfnlRbD1Eb1sDyWMmjKYIBgGAWbqKRicfvzBkBIz3V5AKnguWdglQEysQsSuVzOg6ALy1pitA5ykGCsc857BRYcgCSZyFOdvoOigSGoPc5Ta73mgxshIcQE5sHMHd9D7yqITw7JO+GHVMxjhzYLcKPSEgmz3fU+BRy3iYNtiXLaBssCW8KguReqkQOTb3MStV0Ugt4U1eIs1RZWRII6Ww8xeNNItyGGQI4ZMlpg/3lQtkl2JFnBp1imRyFe0kK2Id3PCslMgiQNMS77gvFeDhG3cSkYvheeg/e7ClIh5oh+IAAAAASUVORK5CYII="},"56d7":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("a4d3"),o("c975"),o("d81d"),o("45fc"),o("0d03"),o("b0c0"),o("e9f5"),o("ab43"),o("d3b7"),o("e25e"),o("2ca0");var n=o("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("keep-alive",[t("router-view")],1),t("el-dialog",{attrs:{visible:e.showLogin,width:e.dialogWidth,top:e.dialogTop},on:{"update:visible":function(t){e.showLogin=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.isLogin?"登录":"注册")+" "),t("span",{staticClass:"float-right span-btn",on:{click:function(t){e.isLogin=!e.isLogin}}},[e._v(e._s(e.isLogin?"注册":"登录"))])])]),t("el-form",{attrs:{model:e.loginForm}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{type:"password",autocomplete:"on","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e.isLogin?e._e():t("el-form-item",{attrs:{label:"邀请码(没有则不填)"}},[t("el-input",{attrs:{autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),t("el-checkbox",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("记住登录信息")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.login}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:e.editorTitle,visible:e.showEditor,width:e.dialogWidth,top:e.$store.state.miniInterface?"0":"10vh",fullscreen:e.$store.state.miniInterface},on:{"update:visible":function(t){e.showEditor=t}}},[t("div",{ref:"editorRef",staticClass:"code-editor language-json"}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium"},on:{click:e.closeEditor}},[e._v("取 消")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.saveEditor}},[e._v("保 存")])],1)]),e.$store.state.showImageViewer?t("ImageViewer",{attrs:{"z-index":3200,"initial-index":e.$store.state.previewImageIndex,"on-close":e.closeViewer,"url-list":e.$store.state.previewImgList}}):e._e(),t("ReplaceRuleForm",{attrs:{rule:e.replaceRule,isAdd:e.isAddReplaceRule},model:{value:e.showReplaceRuleForm,callback:function(t){e.showReplaceRuleForm=t},expression:"showReplaceRuleForm"}}),t("ReplaceRule",{model:{value:e.showReplaceRuleDialog,callback:function(t){e.showReplaceRuleDialog=t},expression:"showReplaceRuleDialog"}}),t("MPCode",{model:{value:e.showMPCodeDialog,callback:function(t){e.showMPCodeDialog=t},expression:"showMPCodeDialog"}}),t("BookManage",{model:{value:e.showBookManageDialog,callback:function(t){e.showBookManageDialog=t},expression:"showBookManageDialog"}}),t("BookInfo",{model:{value:e.showBookInfoDialog,callback:function(t){e.showBookInfoDialog=t},expression:"showBookInfoDialog"}}),t("UserManage",{model:{value:e.showUserManageDialog,callback:function(t){e.showUserManageDialog=t},expression:"showUserManageDialog"}}),t("UserForm",{attrs:{user:e.userForm},model:{value:e.showUserFormDialog,callback:function(t){e.showUserFormDialog=t},expression:"showUserFormDialog"}}),t("BookGroup",{attrs:{isSet:e.isSetBookGroup},model:{value:e.showBookGroupDialog,callback:function(t){e.showBookGroupDialog=t},expression:"showBookGroupDialog"}}),t("RssSourceList",{model:{value:e.showRssSourceListDialog,callback:function(t){e.showRssSourceListDialog=t},expression:"showRssSourceListDialog"}}),t("RssArticleList",{attrs:{rssSource:e.rssSource},model:{value:e.showRssArticleListDialog,callback:function(t){e.showRssArticleListDialog=t},expression:"showRssArticleListDialog"}}),t("RssArticle",{attrs:{rssArticleInfo:e.rssArticleInfo},model:{value:e.showRssArticleDialog,callback:function(t){e.showRssArticleDialog=t},expression:"showRssArticleDialog"}}),t("SearchBookContent",{attrs:{book:e.searchBook},model:{value:e.showSearchBookContentDialog,callback:function(t){e.showSearchBookContentDialog=t},expression:"showSearchBookContentDialog"}}),t("BookmarkForm",{attrs:{bookmark:e.bookmark,isAdd:e.isAddBookmark},model:{value:e.showBookmarkForm,callback:function(t){e.showBookmarkForm=t},expression:"showBookmarkForm"}}),t("Bookmark",{attrs:{book:e.bookmarkInBook},model:{value:e.showBookmarkDialog,callback:function(t){e.showBookmarkDialog=t},expression:"showBookmarkDialog"}}),t("FileManager",{attrs:{title:e.fileManagerTitle,home:e.fileManagerHome},model:{value:e.showFileManager,callback:function(t){e.showFileManager=t},expression:"showFileManager"}}),t("BookCover",{attrs:{book:e.bookCoverBook},model:{value:e.showBookCoverDialog,callback:function(t){e.showBookCoverDialog=t},expression:"showBookCoverDialog"}}),t("License",{model:{value:e.showLicenseDialog,callback:function(t){e.showLicenseDialog=t},expression:"showLicenseDialog"}}),t("BookConfig",{model:{value:e.showBookConfigDialog,callback:function(t){e.showBookConfigDialog=t},expression:"showBookConfigDialog"}}),t("RemoteBookSourceSub",{model:{value:e.showRemoteBookSourceSubDialog,callback:function(t){e.showRemoteBookSourceSubDialog=t},expression:"showRemoteBookSourceSubDialog"}}),t("ActiveLicense",{model:{value:e.showActiveLicenseDialog,callback:function(t){e.showActiveLicenseDialog=t},expression:"showActiveLicenseDialog"}}),t("HttpTTS",{model:{value:e.showHttpTTSDialog,callback:function(t){e.showHttpTTSDialog=t},expression:"showHttpTTSDialog"}})],1)},a=[],i=o("5530"),s=o("c7eb"),c=o("1da1"),l=(o("d401"),o("7db0"),o("4160"),o("e260"),o("14d9"),o("f665"),o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("00b4"),o("25f0"),o("3ca3"),o("5319"),o("e323"),o("ddb0"),o("4795"),o("be3b")),u=o("8552"),f=o("08a9"),d=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"替换规则管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("替换规则管理")])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.$store.state.filterRules,height:e.dialogContentHeight},on:{"selection-change":function(t){e.localSelection=t}}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"name","min-width":"150px",label:"规则名称",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"scope",label:"替换范围","min-width":"150px"}}),t("el-table-column",{attrs:{property:"isEnabled",label:"是否启用","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},on:{change:function(t){return e.toggleRuleEnabled(o.row,t)}},model:{value:o.row.isEnabled,callback:function(t){e.$set(o.row,"isEnabled",t)},expression:"scope.row.isEnabled"}})]}}],null,!1,2011687545)}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editReplaceRule(o.row)}}},[e._v("编辑")])]}}],null,!1,1473522600)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteReplaceRules}},[e._v("批量删除"),e.localSelection.length?t("span",[e._v(" ("+e._s(e.localSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.uploadFile}},[e._v("导入")]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.addNew}},[e._v("添加")]),t("input",{ref:"fileRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.onFileChange(t)}}})],1)])]):e._e()},p=[],h=(o("99af"),o("277d"),o("7d54"),o("b64b"),o("159b"),o("2f62")),m={model:{prop:"show",event:"setShow"},name:"ReplaceRule",data:function(){return{localSelection:[]}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show"],watch:{show:function(e){}},methods:{formatTableField:function(e,t,o){switch(t.property){default:return o}},cancel:function(){this.$emit("setShow",!1)},deleteReplaceRules:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的替换规则"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的替换规则吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/deleteReplaceRules",e.localSelection).then((function(t){t.data.isSuccess&&(e.localSelection=[],e.$message.success("删除替换规则成功"),e.$root.$children[0].loadReplaceRules(!0))}),(function(t){e.$message.error("删除替换规则失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},toggleRuleEnabled:function(e,t){var o=this;l["a"].post("/saveReplaceRule",Object(i["a"])(Object(i["a"])({},e),{},{isEnabled:t})).then((function(e){e.data.isSuccess&&(o.$message.success("修改成功"),o.$root.$children[0].loadReplaceRules(!0))}),(function(e){o.$message.error("修改失败 "+(e&&e.toString()))}))},editReplaceRule:function(e){u["a"].$emit("showReplaceRuleForm",Object(i["a"])({},e),!1)},addNew:function(){u["a"].$emit("showReplaceRuleForm",{name:"文本替换",pattern:"",replacement:"",isRegex:!1,isEnabled:!0,scope:this.$store.getters.readingBook?this.$store.getters.readingBook.name+";"+this.$store.getters.readingBook.bookUrl:"*"},!1)},uploadFile:function(){this.$refs.fileRef.dispatchEvent(new MouseEvent("click"))},onFileChange:function(e){var t=this,o=e.target.files&&e.target.files[0],n=new FileReader;n.onload=function(e){var o=e.target.result;try{var n=JSON.parse(o);Array.isArray(n)&&n.length&&t.comfirmImport(n)}catch(r){t.$message.error("替换规则文件错误")}},n.onerror=function(){var e=new FormData;e.append("file",o),l["a"].post(t.api+"/readSourceFile",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.isSuccess){var o=[];e.data.data.forEach((function(e){try{var t=JSON.parse(e);Array.isArray(t)&&(o=o.concat(t))}catch(n){}})),o.length?t.comfirmImport(o):t.$message.error("替换规则文件错误")}}),(function(e){t.$message.error("读取替换规则文件内容失败 "+(e&&e.toString()))}))},n.readAsText(o),this.$refs.fileRef.value=null},comfirmImport:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要导入文件中的".concat(e.length,"条替换规则吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/saveReplaceRules",e).then((function(e){e.data.isSuccess&&(t.$message.success("导入替换规则成功"),t.$root.$children[0].loadReplaceRules(!0))}),(function(e){t.$message.error("导入替换规则失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()}}},g=m,b=(o("cd2b"),o("2877")),k=Object(b["a"])(g,d,p,!1,null,"44eeac3f",null),w=k.exports,v=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"替换规则",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("el-form",{attrs:{model:e.ruleForm}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"规则"}},[t("el-input",{model:{value:e.ruleForm.pattern,callback:function(t){e.$set(e.ruleForm,"pattern",t)},expression:"ruleForm.pattern"}})],1),t("el-form-item",{attrs:{label:"替换为"}},[t("el-input",{model:{value:e.ruleForm.replacement,callback:function(t){e.$set(e.ruleForm,"replacement",t)},expression:"ruleForm.replacement"}})],1),t("el-form-item",{attrs:{label:"替换范围"}},[t("el-input",{model:{value:e.ruleForm.scope,callback:function(t){e.$set(e.ruleForm,"scope",t)},expression:"ruleForm.scope"}})],1),t("el-checkbox",{model:{value:e.ruleForm.isRegex,callback:function(t){e.$set(e.ruleForm,"isRegex",t)},expression:"ruleForm.isRegex"}},[e._v("使用正则表达式")]),t("el-checkbox",{model:{value:e.ruleForm.isEnabled,callback:function(t){e.$set(e.ruleForm,"isEnabled",t)},expression:"ruleForm.isEnabled"}},[e._v("是否启用")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1):e._e()},S=[],A=o("bfff"),x={model:{prop:"show",event:"setShow"},name:"ReplaceRuleForm",data:function(){return{ruleForm:Object(i["a"])({},A["d"])}},props:["show","rule","isAdd"],computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),watch:{show:function(e){e&&(this.ruleForm=this.rule||Object(i["a"])({},A["d"]))}},methods:{cancel:function(){this.$emit("setShow",!1)},save:function(){var e=this;if(this.ruleForm.name)if(this.ruleForm.pattern)if(this.ruleForm.scope){if(this.isAdd){var t=this.$store.state.filterRules.find((function(t){return t.name===e.ruleForm.name}));if(t)return void this.$message.error("规则名不能重复")}var o=Object(i["a"])({},this.ruleForm);l["a"].post("/saveReplaceRule",o).then((function(t){t.data.isSuccess&&(e.$message.success((e.isAdd?"新增":"编辑")+"替换规则成功"),e.$root.$children[0].loadReplaceRules(!0),e.cancel())}),(function(t){e.$message.error((e.isAdd?"新增":"编辑")+"替换规则失败 "+(t&&t.toString()))}))}else this.$message.error("替换范围不能为空");else this.$message.error("规则不能为空");else this.$message.error("规则名不能为空")}}},B=x,C=(o("9308"),Object(b["a"])(B,v,S,!1,null,"f3156612",null)),y=C.exports,O=function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"关注公众号【假装大佬】",visible:e.show,width:e.dialogSmallWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("el-image",{staticClass:"qrcode-img",attrs:{src:o("3383"),fit:"cover",lazy:""}})],1)},I=[],T={model:{prop:"show",event:"setShow"},name:"ReplaceRuleForm",data:function(){return{}},props:["show"],computed:Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),methods:{cancel:function(){this.$emit("setShow",!1)}}},j=T,L=(o("c1ed"),Object(b["a"])(j,O,I,!1,null,"52ffc46f",null)),$=L.exports,R=(o("841c"),function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书架管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title flex-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("书架管理 ")]),t("span",{staticClass:"title-center"},[t("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.$store.state.miniInterface,expression:"!$store.state.miniInterface"}],staticClass:"action-zone"},[t("span",{staticClass:"float-right small-tip"},[e._v("❗️只能缓存文本内容")])])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.showList,height:e.dialogContentHeight-42},on:{"selection-change":function(t){e.manageBookSelection=t},"sort-change":e.sortChange}},[t("el-table-column",{attrs:{type:"selection",width:"25",selectable:e.isBookSelectable,fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"name",label:"书名名","min-width":"100",sortable:"custom",fixed:e.$store.state.miniInterface},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{staticClass:"text-button",attrs:{size:"medium",type:"text"},on:{click:function(t){return e.showBookInfo(o.row)}}},[e._v(e._s(o.row.name))])]}}],null,!1,4264428119)}),t("el-table-column",{attrs:{property:"author",label:"作者",sortable:"custom","min-width":"100"}}),t("el-table-column",{attrs:{property:"group",label:"分组","min-width":"120",filters:e.bookGroupFilters,"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.renderBookGroup(t.row))+" ")]}}],null,!1,1549071982)}),t("el-table-column",{attrs:{label:"章节","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",[e._v("共 "+e._s(o.row.totalChapterNum)+" 章")]),t("br"),"loc_book"!==o.row.origin?t("span",[e._v(" 服务器缓存： "+e._s(o.row.cachedChapterCount||0)+" 章 "),t("br")]):e._e(),t("span",[e._v("浏览器缓存： "+e._s(o.row.localCacheCount)+" 章")])]}}],null,!1,4230467245)}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{staticClass:"text-button",attrs:{size:"medium",type:"text"},on:{click:function(t){return e.editBook(o.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"text-button",staticStyle:{"margin-left":"0"},attrs:{size:"medium",type:"text"},on:{click:function(t){return e.setBookGroup(o.row)}}},[e._v("分组")]),t("el-dropdown",{attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:function(t){return e.cacheBook(o.row,t)}}},[t("el-button",{staticClass:"text-button",attrs:{type:"text",size:"medium"}},[e.isCaching(o.row)?t("span",[t("i",{staticClass:"el-icon-loading"}),e._v(" 缓存中 ")]):t("span",[e._v(" 缓存"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["loc_book"!==o.row.origin?t("el-dropdown-item",{attrs:{command:"cacheBookOnServer"}},[e._v("服务器缓存")]):e._e(),"loc_book"!==o.row.origin?t("el-dropdown-item",{attrs:{command:"cacheBookSSE"}},[e._v("缓存到服务器")]):e._e(),t("el-dropdown-item",{attrs:{command:"cacheBookLocal"}},[e._v("缓存到浏览器")]),"loc_book"!==o.row.origin?t("el-dropdown-item",{attrs:{command:"deleteBookCache"}},[e._v("删除服务器缓存")]):e._e(),t("el-dropdown-item",{attrs:{command:"deleteBookLocalCache"}},[e._v("删除浏览器缓存")])],1)],1),t("el-dropdown",{attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:function(t){return e.exportBook(o.row,t)}}},[t("el-button",{staticClass:"text-button",attrs:{type:"text",size:"medium"}},[e._v(" 导出"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"txt"}},[e._v("导出为TXT")]),t("el-dropdown-item",{attrs:{command:"epub"}},[e._v("导出为Epub")])],1)],1)]}}],null,!1,675343596)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-dropdown",{staticClass:"float-left",attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:e.multiOperate}},[t("el-button",{attrs:{type:"primary",size:"medium"}},[e._v(" 操作 "),e.manageBookSelection.length?t("span",[e._v(" ("+e._s(e.manageBookSelection.length)+")")]):e._e(),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"deleteBookList"}},[e._v("批量删除")]),t("el-dropdown-item",{attrs:{command:"addBookGroupMulti"}},[e._v("添加分组")]),t("el-dropdown-item",{attrs:{command:"removeBookGroupMulti"}},[e._v("删除分组")])],1)],1),t("el-dropdown",{staticClass:"float-left",attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:e.cacheBookMulti}},[t("el-button",{attrs:{type:"primary",size:"medium"}},[e._v(" 缓存 "),e.manageBookSelection.length?t("span",[e._v(" ("+e._s(e.manageBookSelection.length)+")")]):e._e(),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"cacheBookOnServer"}},[e._v("服务器缓存")]),t("el-dropdown-item",{attrs:{command:"cacheBookSSE"}},[e._v("缓存到服务器")]),t("el-dropdown-item",{attrs:{command:"cacheBookLocal"}},[e._v("缓存到浏览器")]),t("el-dropdown-item",{attrs:{command:"deleteBookCache"}},[e._v("删除服务器缓存")]),t("el-dropdown-item",{attrs:{command:"deleteBookLocalCache"}},[e._v("删除浏览器缓存")])],1)],1),e.multiOperating?t("el-button",{attrs:{size:"medium"},on:{click:e.cancelMulti}},[e._v("取消批量操作")]):e._e()],1),t("div",{staticClass:"source-pagination"},[t("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[25,50,100,200,300,400,e.filterList.length],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next",total:e.filterList.length,"pager-count":e.$store.state.miniInterface?5:7},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"update:pageSize":function(t){return e.$set(e.pagination,"size",t)},"update:page-size":function(t){return e.$set(e.pagination,"size",t)}}})],1)])]):e._e()}),F=[],U=(o("4de4"),o("c740"),o("caad"),o("a15b"),o("fb6a"),o("4e82"),o("a434"),o("910d"),o("2532"),o("7513")),D=o("f537"),E=o.n(D),M=o("30b5"),N={model:{prop:"show",event:"setShow"},name:"BookManage",data:function(){return{bookList:[],manageBookSelection:[],search:"",pagination:{page:1,size:25},sortable:{prop:"",order:null},multiOperating:!1}},props:["show"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),{},{bookGroupList:function(){return this.$store.state.bookGroupList.filter((function(e){return e.groupId>0}))},bookGroupFilters:function(){return[{text:"未分组",value:0}].concat(this.bookGroupList.map((function(e){return{text:e.groupName,value:e.groupId}})))},cachingBookList:{get:function(){return this.$store.state.cachingBookList},set:function(e){this.$store.commit("setCachingBookList",e)}},cachingBookMap:function(){var e={};return this.cachingBookList.map((function(t){e[t.bookUrl]=!0})),e},filterList:function(){var e=this;return this.bookList.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}))},sortList:function(){var e=this;if(!this.sortable.prop||!this.sortable.order)return this.filterList;var t=[].concat(this.filterList);return t.sort((function(t,o){if("ascending"!==e.sortable.order){var n=t;t=o,o=n}return t[e.sortable.prop]>o[e.sortable.prop]?1:t[e.sortable.prop]<o[e.sortable.prop]?-1:0})),t},showList:function(){var e=(this.pagination.page-1)*this.pagination.size;return e>this.sortList.length?[]:this.sortList.slice(e,Math.min(e+this.pagination.size,this.sortList.length))}}),created:function(){window.cacheEventSource=window.cacheEventSource||{},window.cacheRequestHandle=window.cacheRequestHandle||{},window.bookManageComp=this},watch:{show:function(e){e?this.loadBookCacheInfo():this.manageBookSelection=[]}},methods:{cancel:function(){this.$emit("setShow",!1)},formatTableField:function(e,t,o){switch(t.property){default:return o}},isBookSelectable:function(){return!0},sortChange:function(e){var t=e.prop,o=e.order;this.sortable={prop:t,order:o}},loadBookCacheInfo:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",l["a"].get(e.api+"/getShelfBookWithCacheInfo").then((function(t){t.data.isSuccess&&e.computeCachedCata(t.data.data).then((function(t){e.bookList=t}))}),(function(t){e.$message.error("获取书架信息失败 "+(t&&t.toString()))})));case 1:case"end":return t.stop()}}),t)})))()},deleteBookList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.manageBookSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的书籍"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的书籍吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/deleteBooks",e.manageBookSelection).then((function(t){t.data.isSuccess&&(e.manageBookSelection=[],e.$message.success("删除书籍成功"),e.loadBookCacheInfo(),e.$root.$children[0].loadBookShelf())}),(function(t){e.$message.error("删除书籍失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},addBookGroupMulti:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.operateBookGroupMulti(!0));case 1:case"end":return t.stop()}}),t)})))()},removeBookGroupMulti:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.operateBookGroupMulti());case 1:case"end":return t.stop()}}),t)})))()},operateBookGroupMulti:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n,r,a,i,c,u;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=e?"添加":"移除",t.manageBookSelection.length){o.next=4;break}return t.$message.error("请选择需要"+n+"分组的书籍"),o.abrupt("return");case 4:return r={groupId:""},a=[{name:"groupId",label:n+"分组",type:"select",placeholder:"请选择分组",multiple:!1,options:t.bookGroupList.map((function(e){return{label:e.groupName,value:e.groupId}}))}],o.next=8,t.$msgbox({title:e?"批量添加分组":"批量删除分组",message:t.renderForm(e?"addBookGroupMulti":"removeBookGroupMulti",r,a,(function(e){return r.groupId=0|e.groupId})),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"})["catch"]((function(e){return"close"===e&&"close"}));case 8:if(i=o.sent,"confirm"===i){o.next=11;break}return o.abrupt("return");case 11:if(c=t.bookGroupList.find((function(e){return e.groupId===r.groupId})),c){o.next=15;break}return t.$message.error("请选择分组"),o.abrupt("return");case 15:return o.next=17,t.$confirm(e?"确认要将所选择的书籍添加到".concat(c.groupName,"分组吗?"):"确认要将所选择的书籍从".concat(c.groupName,"分组中移除吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 17:if(u=o.sent,u){o.next=20;break}return o.abrupt("return");case 20:l["a"].post(t.api+(e?"/addBookGroupMulti":"/removeBookGroupMulti"),{groupId:c.groupId,bookList:t.manageBookSelection}).then((function(e){e.data.isSuccess&&(t.$message.success("操作成功"),t.loadBookCacheInfo(),t.$root.$children[0].loadBookShelf())}),(function(e){t.$message.error("操作失败 "+(e&&e.toString()))}));case 21:case"end":return o.stop()}}),o)})))()},renderBookGroup:function(e){var t=[];return this.$store.state.bookGroupList.forEach((function(o){o.groupId>0&&E.a.fromNumber(o.groupId).and(e.group).greaterThan(0)&&t.push(o.groupName)})),t.length||t.push("未分组"),t.join(" ")},filterHandler:function(e,t,o){var n=o["property"];return t[n]===e},showBookInfo:function(e){u["a"].$emit("showBookInfoDialog",e)},editBook:function(e){var t=this;u["a"].$emit("editBook",e,!1,(function(){t.loadBookCacheInfo()}))},setBookGroup:function(e){this.$store.commit("setShowBookInfo",e),u["a"].$emit("showBookGroupDialog",!0)},isCaching:function(e){return!!this.cachingBookMap[e.bookUrl]||(!(!window.cacheEventSource||!window.cacheEventSource[e.bookUrl])||!(!window.cacheRequestHandle||!window.cacheRequestHandle[e.bookUrl]))},cacheBook:function(e,t){this[t](e)},cancelMulti:function(){if(this.multiOperating){if(this.multiCachingHandler.cancel(),"cacheBookSSE"===this.multiOperating||"cacheBookLocal"===this.multiOperating)for(var e=0;e<this.lastSelection.length;e++)this.isCaching(this.lastSelection[e])&&this[this.multiOperating](this.lastSelection[e]);this.multiOperating=!1,this.lastSelection=[],this.$message.info("批量操作已取消")}},multiOperate:function(e){this.manageBookSelection.length?this[e]():this.$message.error("请选择需要操作的书籍")},cacheBookMulti:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n,r,a,i;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.multiOperating){o.next=3;break}return t.$message.error("正在批量操作，请取消后再试"),o.abrupt("return");case 3:if(t.manageBookSelection.length){o.next=6;break}return t.$message.error("请选择需要操作的书籍"),o.abrupt("return");case 6:if("deleteBookCache"!==e&&"deleteBookLocalCache"!==e){o.next=12;break}return o.next=9,t.$confirm("确认要批量删除".concat("deleteBookCache"===e?"服务器上":"浏览器中","所选书籍的缓存章节吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 9:if(n=o.sent,n){o.next=12;break}return o.abrupt("return");case 12:if("cacheBookOnServer"!==e){o.next=20;break}return o.next=15,t.$confirm("确认要在服务器上批量缓存所选书籍的章节内容吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 15:if(r=o.sent,r){o.next=18;break}return o.abrupt("return");case 18:return t.cacheBookOnServer(t.manageBookSelection),o.abrupt("return");case 20:t.multiOperating=e,t.lastSelection=[].concat(t.manageBookSelection),t.multiCachingHandler=Object(U["a"])(2,(function(e){e.isEnd()&&(t.multiOperating=!1,t.lastSelection=[],t.$message.success("批量操作完成"))})),a=Object(s["a"])().mark((function o(n){return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:t.multiCachingHandler((function(){return t[e](t.manageBookSelection[n])}));case 1:case"end":return o.stop()}}),o)})),i=0;case 25:if(!(i<t.manageBookSelection.length)){o.next=30;break}return o.delegateYield(a(i),"t0",27);case 27:i++,o.next=25;break;case 30:t.$message.info("批量操作未完成/取消之前请勿关闭当前页面");case 31:case"end":return o.stop()}}),o)})))()},cacheBookSSE:function(e){var t=this;return new Promise((function(o,n){var r=function(){try{window.cacheEventSource[e.bookUrl]&&window.cacheEventSource[e.bookUrl].readyState!==window.cacheEventSource[e.bookUrl].CLOSED&&window.cacheEventSource[e.bookUrl].close(),window.cacheEventSource[e.bookUrl]=null,delete window.cacheEventSource[e.bookUrl];var o=t.cachingBookList.findIndex((function(t){return t.bookUrl===e.bookUrl}));t.cachingBookList.splice(o,1),t.cachingBookList=[].concat(t.cachingBookList)}catch(n){}};if(t.isCaching(e))return t.$message.info("已取消缓存"),n("已取消缓存"),void(window.cacheEventSource[e.bookUrl]&&r());var a={url:e.bookUrl,refresh:0},s=M(t.api+"/cacheBookSSE",a);r(),t.cachingBookList=t.cachingBookList.concat([e]),window.cacheEventSource[e.bookUrl]=new EventSource(s,{withCredentials:!0}),window.cacheEventSource[e.bookUrl].addEventListener("error",(function(e){r();try{if(e.data){var o=JSON.parse(e.data);o&&o.errorMsg&&(t.$message.error(o.errorMsg),n(o.errorMsg))}}catch(a){}})),window.cacheEventSource[e.bookUrl].addEventListener("end",(function(n){t.$message.info(e.name+"缓存到服务器完成"),o(e.name+"缓存到服务器完成"),r();try{n.data}catch(a){}})),window.cacheEventSource[e.bookUrl].addEventListener("message",(function(o){try{if(o.data){var n=JSON.parse(o.data);if(n&&n.cachedCount){var r=t.bookList.findIndex((function(t){return t.bookUrl===e.bookUrl}));t.$set(t.bookList,r,Object(i["a"])(Object(i["a"])({},e),{},{cachedChapterCount:n.cachedCount}))}}}catch(a){}}))}))},cacheBookLocal:function(e){var t=this;return new Promise((function(o,n){if(t.isCaching(e))return t.$message.info("已取消缓存"),n("已取消缓存"),void(window.cacheRequestHandle[e.bookUrl]&&(window.cacheRequestHandle[e.bookUrl].cancel(),window.cacheRequestHandle[e.bookUrl]=null,delete window.cacheRequestHandle[e.bookUrl]));var r=!1,a=function(){t.computeCachedCata([e]).then((function(o){r=!1;var n=t.bookList.findIndex((function(t){return t.bookUrl===e.bookUrl}));t.$set(t.bookList,n,Object(i["a"])(Object(i["a"])({},e),{},{localCacheCount:o[0].localCacheCount}))}))};window.cacheRequestHandle[e.bookUrl]=Object(U["a"])(2,(function(e){r||(r=!0,a()),e.isEnd()&&(t.$message.success("缓存到浏览器完成"),o("缓存到浏览器完成"),a())}));for(var s=function(o){window.cacheRequestHandle[e.bookUrl]((function(){return t.$root.$children[0].getBookContent(o,{timeout:1e3*t.$store.getters.config.chapterRequestTimeout,silent:!0},!1,!0,e)}))},c=0;c<e.totalChapterNum;c++)s(c)}))},cacheBookOnServer:function(e){var t=this;e=Array.isArray(e)?e:[e],l["a"].post(this.api+"/cacheBookOnServer",{bookUrlList:e.map((function(e){return e.bookUrl}))}).then((function(e){e.data.isSuccess&&t.$message.success("提交缓存任务成功")}),(function(e){t.$message.error("提交缓存任务失败 "+(e&&e.toString()))}))},exportBook:function(e,t){var o=M(this.api+"/exportBook",{url:e.bookUrl,isEpub:"epub"===t?1:0,accessToken:this.$store.state.token});window.open(o,"__blank")},computeCachedCata:function(e,t){var o={};return e.forEach((function(e){o[e.bookUrl]={key:"localCache@"+e.name+"_"+e.author+"@"+e.bookUrl+"@chapterContent-",map:{}}})),window.$cacheStorage.iterate((function(e,t){for(var n in o)if(t.startsWith(o[n].key)){try{var r=parseInt(t.replace(o[n].key,""));o[n].map[r]=!0}catch(a){}break}})).then((function(){return t?o:e.map((function(e){var t=o[e.bookUrl].map;return e.localCacheCount=Object.keys(t).length,e}))}))["catch"]((function(){return t?o:e.map((function(e){return e.localCacheCount=0,e}))}))},deleteBookCache:function(e,t){var o=this;return new Promise(function(){var n=Object(c["a"])(Object(s["a"])().mark((function n(r,a){var i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,o.$confirm("确认要删除服务器上《".concat(e.name,"》的缓存章节吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 3:if(i=n.sent,i){n.next=7;break}return a("canceled"),n.abrupt("return");case 7:l["a"].post(o.api+"/deleteBookCache",{bookUrl:e.bookUrl}).then((function(e){e.data.isSuccess&&(o.$message.success("删除服务器缓存成功"),o.loadBookCacheInfo(),r(""))}),(function(e){o.$message.error("删除服务器缓存失败 "+(e&&e.toString())),a(e)}));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},deleteBookLocalCache:function(e,t){var o=this;return new Promise(function(){var n=Object(c["a"])(Object(s["a"])().mark((function n(r,a){var i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,o.$confirm("确认要删除浏览器中《".concat(e.name,"》的缓存章节吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 3:if(i=n.sent,i){n.next=7;break}return a("canceled"),n.abrupt("return");case 7:o.computeCachedCata([e],!0).then((function(t){var o=[];for(var n in t[e.bookUrl].map){var r=t[e.bookUrl].key+n;o.push(window.$cacheStorage.removeItem(r))}return Promise.all(o)})).then((function(){o.$message.success("删除浏览器缓存成功"),r("删除浏览器缓存成功"),o.computeCachedCata([].concat(o.bookList)).then((function(e){o.bookList=e}))}));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}}},_=N,P=(o("6a04"),Object(b["a"])(_,R,F,!1,null,"99ff4e1a",null)),G=P.exports,W=function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书籍信息",visible:e.show,width:e.dialogSmallWidth,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("书籍信息 "),e.isInShelf&&"index"===e.$route.name?t("span",{staticClass:"float-right span-btn",on:{click:e.editBook}},[e._v("编辑")]):e._e(),e.isInShelf?t("span",{staticClass:"float-right span-btn",on:{click:e.showBookConfig}},[e._v("设置")]):e._e(),e.isInShelf&&"index"===e.$route.name?t("span",{staticClass:"float-right span-btn",on:{click:e.deleteBook}},[e._v("移出书架")]):e._e(),e.isInShelf?t("span",{staticClass:"float-right span-btn",on:{click:e.triggerBookCoverRefClick}},[e._v("修改封面")]):e.isInShelf?e._e():t("span",{staticClass:"float-right span-btn",on:{click:function(t){return e.saveBook(e.showBookInfo,!0)}}},[e._v("加入书架")])])]),e.show?t("div",{staticClass:"book-info-container"},[t("div",{staticClass:"book-cover"},[t("div",{staticClass:"book-cover-bg",style:e.bookCoverBgStyle}),t("div",{staticClass:"book-cover-bg-image"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.getCover(e.getBookCoverUrl(e.showBookInfo)),expression:"getCover(getBookCoverUrl(showBookInfo))"}],key:e.showBookInfo.name,attrs:{alt:""},on:{click:e.triggerBookCoverRefClick}}),t("input",{ref:"bookCoverRef",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpg, image/png, image/jpeg"},on:{change:e.onCoverFileChange}})])]),t("div",{staticClass:"book-name"},[e._v(e._s(e.showBookInfo.name))]),t("BookKind",{staticClass:"text-center",attrs:{book:e.showBookInfo}}),t("div",{staticClass:"book-props"},[t("div",{staticClass:"book-prop book-author"},[e._v(" 作者： "+e._s(e.showBookInfo.author||"未知")+" ")]),t("div",{staticClass:"book-prop book-origin"},[e._v(" 来源： "+e._s(e.displayOriginName(e.showBookInfo.origin))+" "),"loc_book"===e.showBookInfo.origin?t("el-button",{staticClass:"book-prop-btn",attrs:{type:"text"},on:{click:function(t){return e.refreshLocalBook(e.showBookInfo)}}},[e._v("更新")]):e._e()],1),t("div",{staticClass:"book-prop book-latest"},[t("span",{staticClass:"latest-title"},[e._v("最新： "+e._s(e.showBookInfo.latestChapterTitle)+" ")]),e.isInShelf?t("span",{staticClass:"book-prop-btn"},[e._v(" 追更 "),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},on:{change:function(t){return e.toggleBookCanUpdate(e.showBookInfo)}},model:{value:e.showBookInfo.canUpdate,callback:function(t){e.$set(e.showBookInfo,"canUpdate",t)},expression:"showBookInfo.canUpdate"}})],1):e._e()]),e.showBookInfo.lastCheckError?t("div",{staticClass:"book-prop last-check-error"},[e._v(" 错误： "+e._s(e.showBookInfo.lastCheckError)+" ")]):e._e(),e.isInShelf?t("div",{staticClass:"book-prop book-group"},[e._v(" 分组： "+e._s(e.displayGroupName(e.showBookInfo.group))+" "),t("el-button",{staticClass:"book-prop-btn",attrs:{type:"text"},on:{click:function(t){return e.showSetBookGroup()}}},[e._v("设置分组")])],1):e._e()]),t("div",{staticClass:"book-intro",domProps:{innerHTML:e._s(e.renderBookIntro(e.showBookInfo))}})],1):e._e()])},z=[],H=o("0fe7"),V={components:{BookKind:H["a"]},model:{prop:"show",event:"setShow"},name:"BookInfo",data:function(){return{}},props:["show"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),{},{bookCoverBgStyle:function(){return{backgroundImage:"url(".concat(this.getCover(this.getBookCoverUrl(this.showBookInfo),!0),")")}},bookSourceList:function(){return this.$store.state.bookSourceList},showBookInfo:{get:function(){return this.$store.state.showBookInfo},set:function(e){this.$store.commit("setShowBookInfo",e)}},isInShelf:function(){var e=this;return this.$store.getters.shelfBooks.find((function(t){return t.bookUrl===e.showBookInfo.bookUrl}))}}),watch:{show:function(e){}},methods:{cancel:function(){this.$emit("setShow",!1)},displayGroupName:function(e){var t=[],o="";return this.$store.state.bookGroupList.forEach((function(n){n.groupId>0&&E.a.fromNumber(n.groupId).and(e).greaterThan(0)?t.push(n.groupName):-4===n.groupId&&(o=n.groupName)})),t.join(",")||o||"未分组"},displayOriginName:function(e){return"loc_book"===e?"本地":(this.bookSourceList.find((function(t){return t.bookSourceUrl===e}))||{}).bookSourceName||"未知书源"},renderBookIntro:function(e){var t=(e.intro||"暂无简介").split("\n");return t.map((function(e){return"<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".concat(e.replace(/^\s+/g,""),"</p>")})).join("")},getBookCoverUrl:function(e){return e.customCoverUrl||e.coverUrl},triggerBookCoverRefClick:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isInShelf){t.next=7;break}return t.next=3,e.$confirm("请选择操作?","提示",{confirmButtonText:"上传封面",cancelButtonText:"选择其它书源",type:"warning",closeOnClickModal:!1,closeOnPressEscape:!1,distinguishCancelAndClose:!0})["catch"]((function(e){return"close"===e&&"close"}));case 3:if(o=t.sent,"close"!==o){t.next=6;break}return t.abrupt("return");case 6:o?e.$refs.bookCoverRef.dispatchEvent(new MouseEvent("click")):u["a"].$emit("showBookCoverDialog",e.showBookInfo);case 7:case"end":return t.stop()}}),t)})))()},onCoverFileChange:function(e){var t=this;if(e.target&&e.target.files&&e.target.files.length){var o=e.target.files&&e.target.files[0],n=new FormData;n.append("file",o),n.append("type","covers"),l["a"].post(this.api+"/uploadFile",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.isSuccess){if(!e.data.data.length)return void t.$message.error("上传文件失败");t.showBookInfo.customCoverUrl=e.data.data[0],t.saveBook(t.showBookInfo)}}),(function(e){t.$message.error("上传文件失败 "+(e&&e.toString()))}))}},refreshLocalBook:function(e){var t=this;l["a"].post(this.api+"/refreshLocalBook",{bookUrl:e.bookUrl}).then((function(e){e.data.isSuccess&&(t.$message.success("更新成功"),t.showBookInfo=e.data.data,t.$store.commit("updateShelfBook",e.data.data))}),(function(e){t.$message.error("更新失败"+(e&&e.toString()))}))},toggleBookCanUpdate:function(e){return this.saveBook(e)},saveBook:function(e,t){var o=this;return l["a"].post(this.api+"/saveBook",e).then((function(e){e.data.isSuccess&&(o.$message.success(t?"加入书架成功":"操作成功"),o.showBookInfo=e.data.data,t?o.$root.$children[0].loadBookShelf(!0):o.$store.commit("updateShelfBook",e.data.data))}),(function(e){o.$message.error((t?"加入书架失败":"操作失败")+(e&&e.toString()))}))},deleteBook:function(){this.$root.$children[0].deleteBook(this.showBookInfo)},editBook:function(){var e=this;u["a"].$emit("editBook",this.showBookInfo,!1,(function(t){e.showBookInfo=t}))},showBookConfig:function(){u["a"].$emit("showBookConfigDialog")},showSetBookGroup:function(){u["a"].$emit("showBookGroupDialog",!0)}}},Q=V,K=(o("6fec"),o("79a1"),Object(b["a"])(Q,W,z,!1,null,"1a462b56",null)),J=K.exports,q=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"用户管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title flex-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("用户管理 ")]),t("span",{staticClass:"title-center"},[t("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.showList,height:e.dialogContentHeight-42},on:{"selection-change":function(t){e.manageUserSelection=t},"sort-change":e.sortChange}},[t("el-table-column",{attrs:{type:"selection",width:"25",selectable:e.isUserSelectable,fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"username",label:"用户名","min-width":"100",sortable:"custom",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"lastLoginAt",label:"上次登录",sortable:"custom",formatter:e.formatTableField,"min-width":"120"}}),t("el-table-column",{attrs:{property:"createdAt",label:"注册时间",sortable:"custom",formatter:e.formatTableField,"min-width":"120"}}),t("el-table-column",{attrs:{property:"enableWebdav",label:"WebDAV","min-width":"80",filters:[{text:"开启",value:!0},{text:"关闭",value:!1}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(o){return["default"!==o.row.userNS?t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},on:{change:function(t){return e.toggleUserWebdav(o.row,t)}},model:{value:o.row.enableWebdav,callback:function(t){e.$set(o.row,"enableWebdav",t)},expression:"scope.row.enableWebdav"}}):e._e()]}}],null,!1,2358517604)}),t("el-table-column",{attrs:{property:"enableLocalStore",label:"书仓","min-width":"80",filters:[{text:"开启",value:!0},{text:"关闭",value:!1}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(o){return["default"!==o.row.userNS?t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},on:{change:function(t){return e.toggleUserLocalStore(o.row,t)}},model:{value:o.row.enableLocalStore,callback:function(t){e.$set(o.row,"enableLocalStore",t)},expression:"scope.row.enableLocalStore"}}):e._e()]}}],null,!1,4075233220)}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return["default"!=o.row.userNS?t("el-button",{staticClass:"text-button",attrs:{type:"text"},on:{click:function(t){return e.editUser(o.row)}}},[e._v("修改")]):e._e(),"default"!=o.row.userNS?t("el-button",{staticClass:"text-button",attrs:{type:"text"},on:{click:function(t){return e.resetPassword(o.row)}}},[e._v("重置密码")]):e._e(),"default"!=o.row.userNS?t("el-button",{staticClass:"text-button",attrs:{type:"text"},on:{click:function(t){return e.setAsDefaultBookSources(o.row)}}},[e._v("设为默认书源")]):e._e()]}}],null,!1,1517798773)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteUserList}},[e._v("批量删除"),e.manageUserSelection.length?t("span",[e._v(" ("+e._s(e.manageUserSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteUserBookSource}},[e._v("使用默认书源")]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.clearInactiveUser()}}},[e._v("清理")]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.showAddUserDialog()}}},[e._v("新增")])],1),t("div",{staticClass:"source-pagination"},[t("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[25,50,100,200,300,400,e.filterList.length],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next",total:e.filterList.length,"pager-count":e.$store.state.miniInterface?5:7},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"update:pageSize":function(t){return e.$set(e.pagination,"size",t)},"update:page-size":function(t){return e.$set(e.pagination,"size",t)}}})],1)])]):e._e()},Y=[],Z={model:{prop:"show",event:"setShow"},name:"UserManage",data:function(){return{manageUserSelection:[],search:"",pagination:{page:1,size:25},sortable:{prop:"",order:null}}},props:["show"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),{},{userList:{get:function(){return this.$store.state.userList},set:function(e){this.$store.commit("setUserList",e)}},filterList:function(){var e=this;return this.userList.filter((function(t){return"default"!==t.userNS&&(!e.search||t.username.toLowerCase().includes(e.search.toLowerCase()))}))},sortList:function(){var e=this;if(!this.sortable.prop||!this.sortable.order)return this.filterList;var t=[].concat(this.filterList);return t.sort((function(t,o){if("ascending"!==e.sortable.order){var n=t;t=o,o=n}return t[e.sortable.prop]>o[e.sortable.prop]?1:t[e.sortable.prop]<o[e.sortable.prop]?-1:0})),t},showList:function(){var e=(this.pagination.page-1)*this.pagination.size;return e>this.sortList.length?[]:this.sortList.slice(e,Math.min(e+this.pagination.size,this.sortList.length))}}),watch:{show:function(e){e&&(this.manageUserSelection=[])}},methods:{cancel:function(){this.$emit("setShow",!1)},sortChange:function(e){var t=e.prop,o=e.order;this.sortable={prop:t,order:o}},showAddUserDialog:function(){u["a"].$emit("showUserFormDialog")},clearInactiveUser:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$prompt("请输入需要清理的未登录天数","清理不活跃用户",{inputValue:31,confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return e?!isNaN(parseInt(e))||"天数必须是数字":"天数不能为空"}})["catch"]((function(){return!1}));case 2:if(o=t.sent,o&&o.value){t.next=5;break}return t.abrupt("return");case 5:l["a"].post(e.api+"/clearInactiveUsers",{inactiveDay:parseInt(o.value)},{timeout:0}).then((function(t){t.data.isSuccess&&(e.$message.success("清理不活跃用户成功"),e.userList=t.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{userNS:e.username})})))}),(function(t){e.$message.error("清理不活跃用户失败 "+(t&&t.toString()))}));case 6:case"end":return t.stop()}}),t)})))()},formatTableField:function(e,t,o){switch(t.property){case"createdAt":case"lastLoginAt":case"lastModified":return o?new Date(o).format("yy-MM-dd hh:mm"):"";case"size":return e.isDirectory?"":Object(U["d"])(o);default:return o}},isUserSelectable:function(e){return"default"!==e.userNS},deleteUserList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.manageUserSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的用户"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/deleteUsers",e.manageUserSelection.map((function(e){return e.username})),{timeout:0}).then((function(t){t.data.isSuccess&&(e.manageUserSelection=[],e.$message.success("删除用户成功"),e.userList=t.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{userNS:e.username})})))}),(function(t){e.$message.error("删除用户失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},deleteUserBookSource:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.manageUserSelection.length){t.next=3;break}return e.$message.error("请选择需要删除书源的用户"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的用户书源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/deleteUserBookSource",e.manageUserSelection.map((function(e){return e.username}))).then((function(t){t.data.isSuccess&&(e.manageUserSelection=[],e.$message.success("操作成功"))}),(function(t){e.$message.error("操作失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},toggleUserWebdav:function(e,t){var o=this;l["a"].post(this.api+"/updateUser",{username:e.username,enableWebdav:t}).then((function(e){e.data.isSuccess&&(o.$message.success("修改成功"),o.userList=e.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{userNS:e.username})})))}),(function(e){o.$message.error("修改失败 "+(e&&e.toString()))}))},toggleUserLocalStore:function(e,t){var o=this;l["a"].post(this.api+"/updateUser",{username:e.username,enableLocalStore:t}).then((function(e){e.data.isSuccess&&(o.$message.success("修改成功"),o.userList=e.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{userNS:e.username})})))}),(function(e){o.$message.error("修改失败 "+(e&&e.toString()))}))},editUser:function(e){u["a"].$emit("showUserFormDialog",e)},setAsDefaultBookSources:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要将用户".concat(e.username,"的书源设为默认书源（新用户有效）吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:return o.abrupt("return",l["a"].post(t.api+"/setAsDefaultBookSources",{username:e.username}).then((function(e){e.data.isSuccess&&t.$message.success("设置成功")}),(function(e){t.$message.error("设置失败 "+(e&&e.toString()))})));case 6:case"end":return o.stop()}}),o)})))()},resetPassword:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$prompt("","重置密码",{inputValue:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"密码不能为空"}})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/resetPassword",{username:e.username,password:n.value}).then((function(e){e.data.isSuccess&&t.$message.success("重置密码成功")}),(function(e){t.$message.error("重置密码失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},filterHandler:function(e,t,o){var n=o["property"];return t[n]===e}}},X=Z,ee=(o("6867"),Object(b["a"])(X,q,Y,!1,null,"33306aac",null)),te=ee.exports,oe=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:e.isAdd?"新增用户":"修改用户",visible:e.show,width:e.dialogSmallWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("el-form",{attrs:{model:e.userForm}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{autocomplete:"off",readonly:!e.isAdd},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),e.isAdd?t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1):e._e(),t("el-form-item",{attrs:{label:"书籍上限"}},[t("el-input-number",{attrs:{min:1},model:{value:e.userForm.bookLimit,callback:function(t){e.$set(e.userForm,"bookLimit",t)},expression:"userForm.bookLimit"}})],1),t("el-form-item",{attrs:{label:"书源上限"}},[t("el-input-number",{attrs:{min:1},model:{value:e.userForm.bookSourceLimit,callback:function(t){e.$set(e.userForm,"bookSourceLimit",t)},expression:"userForm.bookSourceLimit"}})],1),t("el-checkbox",{model:{value:e.userForm.enableWebdav,callback:function(t){e.$set(e.userForm,"enableWebdav",t)},expression:"userForm.enableWebdav"}},[e._v("启用webdav")]),t("el-checkbox",{model:{value:e.userForm.enableLocalStore,callback:function(t){e.$set(e.userForm,"enableLocalStore",t)},expression:"userForm.enableLocalStore"}},[e._v("启用书仓")]),t("el-checkbox",{model:{value:e.userForm.enableBookSource,callback:function(t){e.$set(e.userForm,"enableBookSource",t)},expression:"userForm.enableBookSource"}},[e._v("编辑书源")]),t("el-checkbox",{model:{value:e.userForm.enableRssSource,callback:function(t){e.$set(e.userForm,"enableRssSource",t)},expression:"userForm.enableRssSource"}},[e._v("编辑RSS源")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1):e._e()},ne=[],re={username:"",password:"",bookLimit:200,bookSourceLimit:100,enableWebdav:!1,enableLocalStore:!1,enableBookSource:!0,enableRssSource:!0},ae={model:{prop:"show",event:"setShow"},name:"UserForm",data:function(){return{isAdd:!0,userForm:Object(i["a"])({},re)}},props:["show","user"],computed:Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),watch:{show:function(e){e&&(this.user&&this.user.username?(this.userForm=Object(i["a"])(Object(i["a"])({},re),this.user),this.isAdd=!1):(this.userForm=Object(i["a"])({},re),this.isAdd=!0))}},methods:{cancel:function(){this.$emit("setShow",!1)},save:function(){var e=this;this.userForm.username?!this.isAdd||this.userForm.password?l["a"].post(this.api+(this.isAdd?"/addUser":"/updateUser"),this.userForm).then((function(t){if(t.data.isSuccess){e.$message.success("操作成功"),e.cancel();var o=t.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{userNS:e.username})}));e.$store.commit("setUserList",o)}}),(function(t){e.$message.error("操作失败 "+(t&&t.toString()))})):this.$message.success("密码不能为空"):this.$message.success("用户名不能为空")}}},ie=ae,se=Object(b["a"])(ie,oe,ne,!1,null,"7e126aa8",null),ce=se.exports,le=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:e.isShowBookGroupSettingDialog?"设置分组":"分组管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t},opened:e.opened}},[t("div",{staticClass:"source-container table-container"},[t("el-table",{key:e.isShowBookGroupSettingDialog,ref:"bookGroupTableRef",attrs:{data:e.showBookGroupList,height:e.dialogContentHeight},on:{"selection-change":function(t){e.bookGroupSelection=t}}},[e.isShowBookGroupSettingDialog?t("el-table-column",{attrs:{type:"selection",width:"25"}}):e._e(),t("el-table-column",{attrs:{property:"groupName",label:"分组名","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",{staticClass:"drag-icon"},[t("i",{staticClass:"el-icon-rank"})]),t("span",[e._v(" "+e._s(e.displayBookGroupName(o.row)))])]}}],null,!1,4111896031)}),e.isShowBookGroupSettingDialog?e._e():t("el-table-column",{attrs:{property:"show",label:"显示","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":!0,"inactive-value":!1},on:{change:function(t){return e.toggleBookGroupShow(o.row,t)}},model:{value:o.row.show,callback:function(t){e.$set(o.row,"show",t)},expression:"scope.row.show"}})]}}],null,!1,3235955515)}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.saveBookGroup(o.row)}}},[e._v("编辑")]),!e.isShowBookGroupSettingDialog&&o.row.groupId>0&&!e.getShowShelfBooks(o.row.groupId).length?t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(t){return e.deleteBookGroup(o.row)}}},[e._v("删除")]):e._e()]}}],null,!1,1414828911)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.saveBookGroup()}}},[e._v("添加分组")]),e.isShowSaveOrderButton?t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.saveOrder()}}},[e._v("保存排序")]):e._e(),e.isShowBookGroupSettingDialog?t("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.setBookGroup}},[e._v("确认")]):e._e(),t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")])],1)]):e._e()},ue=[],fe=o("2909"),de=(o("13d5"),o("9485"),o("aa47")),pe={model:{prop:"show",event:"setShow"},name:"BookGroup",data:function(){return{isShowBookGroupSettingDialog:!1,showBookGroupList:[],sortedBookGroupList:[],refreshCounter:0,bookGroupSelection:[]}},props:["show","isSet"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),{},{bookGroupList:function(){return this.$store.state.bookGroupList},shelfBooks:function(){return this.$store.getters.shelfBooks},showBookInfo:{get:function(){return this.$store.state.showBookInfo},set:function(e){this.$store.commit("setShowBookInfo",e)}},isShowSaveOrderButton:function(){return this.showBookGroupList.reduce((function(e,t){return e+""+t.groupId}),"")!==this.sortedBookGroupList.reduce((function(e,t){return e+""+t.groupId}),"")}}),watch:{show:function(e){e&&(this.isShowBookGroupSettingDialog=this.isSet,this.bookGroupSelection=[],this.computeBookGroupList())},isSet:function(e){this.dragableElement&&this.dragableElement.option("disabled",e)},bookGroupList:function(){this.computeBookGroupList()}},methods:{cancel:function(){this.isShowBookGroupSettingDialog=!1,this.$emit("setShow",!1)},computeBookGroupList:function(){var e=this;this.showBookGroupList=[],this.$nextTick((function(){e.showBookGroupList=e.isSet?e.$store.state.bookGroupList.filter((function(e){return e.groupId>0})):e.$store.state.bookGroupList,e.sortedBookGroupList=e.showBookGroupList}))},opened:function(){var e=this;if(this.$refs.bookGroupTableRef.doLayout(),this.setDragable(),this.isSet){var t=this.getBookGroupListForBook(this.showBookInfo.group);this.$nextTick((function(){e.$refs.bookGroupTableRef.clearSelection(),t.forEach((function(t){e.$refs.bookGroupTableRef.toggleRowSelection(t,!0)}))}))}},loadBookGroup:function(e){return this.$root.$children[0].loadBookGroup(e)},getShowShelfBooks:function(e){if(-1===e)return this.shelfBooks;if(-2===e)return this.shelfBooks.filter((function(e){return"loc_book"===e.origin}));if(-3===e)return this.shelfBooks.filter((function(e){return 1===e.type}));if(-4===e)return this.shelfBooks.filter((function(e){return 0===e.group}));try{return this.shelfBooks.filter((function(t){return 0===e||E.a.fromNumber(t.group).and(e).greaterThan(0)}))}catch(t){}},toggleBookGroupShow:function(e,t){var o=this;l["a"].post(this.api+"/saveBookGroup",Object(i["a"])(Object(i["a"])({},e),{},{show:t})).then((function(e){e.data.isSuccess&&(o.$message.success("修改成功"),o.loadBookGroup(!0))}),(function(e){o.$message.error("修改失败 "+(e&&e.toString()))}))},deleteBookGroup:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要删除该分组吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/deleteBookGroup",{groupId:e.groupId}).then((function(e){e.data.isSuccess&&(t.$message.success("删除分组成功"),t.loadBookGroup(!0))}),(function(e){t.$message.error("删除分组失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},saveBookGroup:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$prompt("","".concat(e?"编辑分组":"添加分组"),{inputValue:e?e.groupName:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"分组名不能为空"}})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/saveBookGroup",Object(i["a"])(Object(i["a"])({},e),{},{groupName:n.value})).then((function(o){o.data.isSuccess&&(t.$message.success(e?"修改成功":"添加成功"),t.loadBookGroup(!0))}),(function(o){t.$message.error((e?"修改失败":"添加失败")+(o&&o.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},displayBookGroupName:function(e){return e.groupName+(e.groupId<0?"("+this.$store.getters.builtInBookGroupMap[e.groupId]+")":"")},setBookGroup:function(){var e=this;this.bookGroupSelection.length?l["a"].post(this.api+"/saveBookGroupId",{bookUrl:this.showBookInfo.bookUrl,groupId:this.bookGroupSelection.reduce((function(e,t){return E.a.fromNumber(e).or(t.groupId).toNumber()}),0)}).then((function(t){t.data.isSuccess&&(e.$message.success("设置成功"),e.cancel(),e.showBookInfo=t.data.data,e.$store.commit("updateShelfBook",t.data.data))}),(function(t){e.$message.error("设置失败"+(t&&t.toString()))})):this.$message.error("请选择书籍分组")},getBookGroupListForBook:function(e){var t=[];return this.$store.state.bookGroupList.forEach((function(o){o.groupId>0&&E.a.fromNumber(e).and(o.groupId).greaterThan(0)&&t.push(o)})),t},setDragable:function(){var e=this,t=this.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.dragableElement=de["a"].create(t,{handle:".drag-icon",setData:function(e){e.setData("Text","")},onEnd:function(t){if(t.oldIndex!==t.newIndex){var o=Object(fe["a"])(e.showBookGroupList),n=o.splice(t.oldIndex,1)[0];o.splice(t.newIndex,0,n),e.sortedBookGroupList=o}}}),window.bookGroupComp=this,this.dragableElement.option("disabled",this.isSet)},saveOrder:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:l["a"].post(e.api+"/saveBookGroupOrder",{order:e.sortedBookGroupList.map((function(e,t){return{groupId:e.groupId,order:t}}))}).then((function(t){t.data.isSuccess&&(e.$message.success("保存成功"),e.loadBookGroup(!0))}),(function(t){e.$message.error("保存失败"+(t&&t.toString()))}));case 1:case"end":return t.stop()}}),t)})))()}}},he=pe,me=(o("525d"),Object(b["a"])(he,le,ue,!1,null,"289916ad",null)),ge=me.exports,be=function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{visible:e.show,width:e.dialogSmallWidth,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("RSS订阅("+e._s(e.rssSourceList.length)+") "),t("span",{staticClass:"float-right span-btn",on:{click:function(t){e.showRssSourceEditButton=!e.showRssSourceEditButton}}},[e._v(e._s(e.showRssSourceEditButton?"取消":"编辑"))]),t("span",{staticClass:"float-right span-btn",on:{click:e.uploadRssSource}},[e._v("导入")]),t("span",{staticClass:"float-right span-btn",on:{click:function(t){return e.editRssSource(!1)}}},[e._v("新增")])]),t("input",{ref:"rssInputRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.onSourceFileChange(t,!0)}}})]),t("div",{staticClass:"rss-source-list-container"},e._l(e.rssSourceList,(function(o,n){return t("div",{key:"rss-"+n,staticClass:"rss-source",on:{click:function(t){return e.showRssArticleListDialog(o)}}},[e.showRssSourceEditButton?t("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.deleteRssSource(o)}}}):e._e(),e.showRssSourceEditButton?t("i",{staticClass:"el-icon-edit",on:{click:function(t){return t.stopPropagation(),e.editRssSource(o)}}}):e._e(),t("el-image",{staticClass:"rss-icon",attrs:{src:e.getImage(o.sourceIcon,!0),fit:"cover",lazy:""}}),t("div",{staticClass:"rss-title"},[e._v(e._s(o.sourceName))])],1)})),0)])},ke=[],we=(o("f4b3"),o("e9c4"),{model:{prop:"show",event:"setShow"},name:"RssSourceList",data:function(){return{showRssSourceEditButton:!1}},props:["show","rssSource"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),{},{rssSourceList:function(){return[].concat(this.$store.state.rssSourceList).sort((function(e,t){return e.customOrder-t.customOrder}))}}),watch:{show:function(e){}},methods:{cancel:function(){this.$emit("setShow",!1)},deleteRssSource:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要删除该RSS订阅源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/deleteRssSource",e).then((function(e){e.data.isSuccess&&(t.$message.success("删除成功"),t.loadRssSources(!0))}),(function(e){t.$message.error("删除失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},uploadRssSource:function(){this.$refs.rssInputRef.dispatchEvent(new MouseEvent("click"))},onSourceFileChange:function(e,t){u["a"].$emit("onSourceFileChange",e,t)},showRssArticleListDialog:function(e){u["a"].$emit("showRssArticleListDialog",e)},editRssSource:function(e){var t=this;e=e||{sourceName:"新增RSS源",sourceUrl:"",sourceIcon:"",sourceGroup:"",enabled:!0,singleUrl:!0,articleStyle:0,ruleArticles:"",ruleTitle:"",rulePubDate:"",ruleImage:"",ruleLink:"",ruleContent:"",enableJs:!0},u["a"].$emit("showEditor","编辑RSS源",JSON.stringify(e,null,4),(function(e,o){try{var n=JSON.parse(e);if(!n.sourceName)return void t.$message.error("RSS源名称不能为空");if(!n.sourceUrl)return void t.$message.error("RSS源链接不能为空");l["a"].post(t.api+"/saveRssSource",n).then((function(e){e.data.isSuccess&&(o(),t.$message.success("保存RSS源成功"),t.loadRssSources(!0))}),(function(e){t.$message.error("保存RSS源失败 "+(e&&e.toString()))}))}catch(r){t.$message.error("RSS源必须是JSON格式")}}))},loadRssSources:function(e){return this.$root.$children[0].loadRssSources(e)}}}),ve=we,Se=(o("a428"),o("421e"),Object(b["a"])(ve,be,ke,!1,null,"ef9d6efc",null)),Ae=Se.exports,xe=function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:e.rssSource.sourceName,visible:e.show,width:e.dialogSmallWidth,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[e.sortUrls.length>1?t("el-tabs",{on:{"tab-click":e.onTabClick},model:{value:e.sortName,callback:function(t){e.sortName=t},expression:"sortName"}},e._l(e.sortUrls,(function(e,o){return t("el-tab-pane",{key:"sort-"+o+e.name,attrs:{label:e.name,name:e.name}})})),1):e._e(),t("div",{ref:"rssArticleListRef",staticClass:"rss-article-list-container"},[e._l(e.rssArticleList,(function(o,n){return t("div",{key:"rss-article-"+n,staticClass:"rss-article",on:{click:function(t){return e.getRssArticleContent(o)}}},[t("div",{staticClass:"rss-article-info"},[t("div",{staticClass:"rss-article-title"},[e._v(e._s(o.title))]),t("div",{staticClass:"rss-article-date"},[e._v(e._s(o.pubDate))])]),o.image?t("div",{staticClass:"rss-article-image"},[t("div",{staticClass:"image-wrapper"},[t("el-image",{staticClass:"rss-article-img",attrs:{src:e.getCover(o.image,!0,!0),"preview-src-list":e.rssArticleImageList,fit:"cover",lazy:""},on:{click:function(t){return t.stopPropagation(),e.noop.apply(null,arguments)}}})],1)]):e._e()])})),t("div",{staticClass:"load-more-rss",on:{click:function(t){e.hasMoreRssArticles&&e.getRssArticles(e.page+1)}}},[e._v(" "+e._s(e.hasMoreRssArticles?"加载更多":"没有更多啦")+" ")])],2)],1)},Be=[],Ce=(o("9911"),{model:{prop:"show",event:"setShow"},name:"RssArticleList",data:function(){return{rssArticleList:[],sourceUrl:"",sortUrls:[],sortName:"",sortUrl:"",hasMoreRssArticles:!0,page:1}},props:["show","rssSource"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),{},{rssArticleImageList:function(){var e=this;return this.rssArticleList.filter((function(e){return e.image})).map((function(t){return e.getImage(t.image,!0,!0)}))}}),watch:{show:function(e){if(e)try{this.parseSourceUrl(),this.getRssArticles()}catch(t){this.$message.error("解析失败: "+t)}else this.sortUrls=[],this.rssArticleList=[],this.page=1,this.sortName="",this.sortUrl="",this.hasMoreRssArticles=!0}},methods:{cancel:function(){this.$emit("setShow",!1)},parseSourceUrl:function(){if(this.sourceUrl=this.rssSource.sourceUrl,!this.rssSource.singleUrl&&this.rssSource.sortUrl){var e=[];this.rssSource.sortUrl.replace(/\r\n/g,"\n").split("\n").forEach((function(t){t&&(t=t.split("::"),e.push({name:t[0],url:t[1]}))})),this.sortUrls=e,this.sortName=e[0].name,this.sortUrl=e[0].url}},onTabClick:function(e){this.sortUrl=this.sortUrls.find((function(t){return t.name===e.name})).url,this.page=1,this.hasMoreRssArticles=!0,this.getRssArticles()},getRssArticles:function(e){var t=this;this.page=e||1,l["a"].post(this.api+"/getRssArticles",{sourceUrl:this.sourceUrl,sortName:this.sortName,sortUrl:this.sortUrl,page:this.page}).then((function(e){if(e.data.isSuccess){var o=e.data.data.first;if(!o.length)return t.$message.error("没有数据"),void(t.hasMoreRssArticles=!1);t.page>1?t.rssArticleList=[].concat(t.rssArticleList).concat(o):t.rssArticleList=o}}),(function(e){t.$message.error("加载RSS文章列表失败 "+(e&&e.toString()))}))},noop:function(){},showRssArticle:function(){},getRssArticleContent:function(e){var t=this;l["a"].post(this.api+"/getRssContent",{sourceUrl:this.rssSource.sourceUrl,link:e.link,origin:e.origin}).then((function(t){t.data.isSuccess&&u["a"].$emit("showRssArticleDialog",Object(i["a"])(Object(i["a"])({},e),{},{content:t.data.data}))}),(function(e){t.$message.error("加载RSS文章内容失败 "+(e&&e.toString()))}))}}}),ye=Ce,Oe=(o("ff48"),o("a7a7"),Object(b["a"])(ye,xe,Be,!1,null,"3672581d",null)),Ie=Oe.exports,Te=(o("e01a"),function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:e.rssArticleInfo.title,visible:e.show,width:e.dialogSmallWidth,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[e.show?t("div",{staticClass:"rss-article-info-container"},[t("div",{ref:"rssArticleContentRef",staticClass:"rss-article-content",domProps:{innerHTML:e._s(e.rssArticleInfo.content||e.rssArticleInfo.description)},on:{click:e.rssArticleClickHandler}})]):e._e()])}),je=[],Le={model:{prop:"show",event:"setShow"},name:"RssArticle",data:function(){return{rssArticleList:[],sourceUrl:"",sortUrls:[],sortName:"",hasMoreRssArticles:!0,page:1}},props:["show","rssArticleInfo"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),{},{rssArticleImageList:function(){var e=this;return this.rssArticleList.filter((function(e){return e.image})).map((function(t){return e.getImage(t.image,!0,!0)}))}}),watch:{show:function(e){e&&this.$nextTick(this.runScript)}},methods:{cancel:function(){this.$emit("setShow",!1)},rssArticleClickHandler:function(e){if(e.target&&e.target.nodeName&&"img"===e.target.nodeName.toLowerCase()){var t=this.$refs.rssArticleContentRef.querySelectorAll("img");if(t.length){for(var o=[],n=0,r=0;r<t.length;r++)o.push(t[r].src),t[r]===e.target&&(n=r);this.$store.commit("setPreviewImageIndex",n),this.$store.commit("setPreviewImgList",o)}}},runScript:function(){try{var e=this.$refs.rssArticleContentRef.querySelectorAll("script");if(e.length)for(var t=0;t<e.length;t++){var o=e[t].innerText;new Function(o)()}}catch(n){this.$message.error("执行脚本出错: "+n)}}}},$e=Le,Re=(o("60fa"),o("b799"),Object(b["a"])($e,Te,je,!1,null,"12878b5b",null)),Fe=Re.exports,Ue=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t},opened:e.opend}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[t("span",{staticClass:"title-input"},[t("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"搜索书籍内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBookContent(-1)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{ref:"resultTable",attrs:{data:e.searchResultList,height:e.dialogContentHeight},on:{"row-click":e.clickRow}},[t("el-table-column",{attrs:{property:"chapterTitle","min-width":"100px",label:"章节"}}),t("el-table-column",{attrs:{property:"resultText","min-width":"250px",label:"搜索结果"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium",disabled:e.loading},on:{click:function(t){return e.searchBookContent(e.lastIndex)}}},[e._v(e._s(e.loading?"加载中":"加载更多"))]),e.lastScrollTop>0?t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.restoreScrollTop}},[e._v("跳转上次位置")]):e._e(),t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取消")])],1)]):e._e()},De=[],Ee={model:{prop:"show",event:"setShow"},name:"SearchBookContent",data:function(){return{lastScrollTop:0,keyword:"",lastIndex:0,searchResultList:[],loading:!1}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show","book"],watch:{show:function(e){},book:{deep:!0,handler:function(e,t){e.bookUrl!==t.bookUrl&&(this.keyword="",this.lastIndex=-1,this.searchResultList=[])}}},created:function(){window.searchBookComp=this},methods:{formatTableField:function(e,t,o){switch(t.property){default:return o}},opend:function(){var e=this;this.$nextTick((function(){e.restoreScrollTop()}))},restoreScrollTop:function(){var e=this;if(this.$refs.resultTable&&this.$refs.resultTable.$ready)try{this.$refs.resultTable.bodyWrapper.scrollTop=this.lastScrollTop}catch(t){setTimeout((function(){e.restoreScrollTop()}),10)}else this.$nextTick((function(){e.restoreScrollTop()}))},cancel:function(){this.$emit("setShow",!1)},searchBookContent:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.loading){o.next=2;break}return o.abrupt("return");case 2:t.loading=!0,l["a"].post(t.api+"/searchBookContent",{url:t.book.bookUrl,keyword:t.keyword,lastIndex:e}).then((function(o){t.loading=!1,o.data.isSuccess&&(t.lastIndex=o.data.data.lastIndex,t.searchResultList=-1===e?o.data.data.list:[].concat(t.searchResultList).concat(o.data.data.list))}),(function(e){t.loading=!1,t.$message.error("加载失败 "+(e&&e.toString()))}));case 4:case"end":return o.stop()}}),o)})))()},clickRow:function(e){this.lastScrollTop=this.$refs.resultTable.bodyWrapper.scrollTop,u["a"].$emit("showSearchContent",e),this.cancel()}}},Me=Ee,Ne=(o("13d2e"),Object(b["a"])(Me,Ue,De,!1,null,"6e24e744",null)),_e=Ne.exports,Pe=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title flex-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.book?e.book.name:"")+" 书签管理 ")]),t("span",{staticClass:"title-center"},[t("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.showList,height:e.dialogContentHeight-42},on:{"selection-change":function(t){e.localSelection=t},"sort-change":e.sortChange}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{"min-width":"150px",label:"书籍",sortable:"custom",fixed:e.$store.state.miniInterface},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.bookName)+" - "+e._s(t.row.bookAuthor)+" ")]}}],null,!1,3213026799)}),t("el-table-column",{attrs:{property:"chapterName",label:"章节","min-width":"150px",sortable:"custom"}}),t("el-table-column",{attrs:{property:"bookText",label:"内容","min-width":"150px"}}),t("el-table-column",{attrs:{property:"content",label:"备注","min-width":"150px"}}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[e.book?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showBookmark(o.row)}}},[e._v("跳转")]):e._e(),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editBookmark(o.row)}}},[e._v("编辑")])]}}],null,!1,2296415621)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteBookmarks}},[e._v("批量删除 "),e.localSelection.length?t("span",[e._v(" ("+e._s(e.localSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.uploadFile}},[e._v("导入")]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.addBookmark}},[e._v("添加")]),t("input",{ref:"fileRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.onFileChange(t)}}})],1),t("div",{staticClass:"source-pagination"},[t("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[25,50,100,200,300,400,e.filterList.length],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next",total:e.filterList.length,"pager-count":e.$store.state.miniInterface?5:7},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"update:pageSize":function(t){return e.$set(e.pagination,"size",t)},"update:page-size":function(t){return e.$set(e.pagination,"size",t)}}})],1)])]):e._e()},Ge=[],We={model:{prop:"show",event:"setShow"},name:"Bookmark",data:function(){return{localSelection:[],search:"",pagination:{page:1,size:25},sortable:{prop:"",order:null}}},computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),{},{bookmarkList:function(){var e=this;return this.book&&this.book.name?this.$store.state.bookmarks.filter((function(t){return t.bookName===e.book.name&&t.bookAuthor===e.book.author})):this.$store.state.bookmarks},filterList:function(){var e=this;return this.bookmarkList.filter((function(t){return!e.search||t.bookName.toLowerCase().includes(e.search.toLowerCase())||t.bookAuthor.toLowerCase().includes(e.search.toLowerCase())||t.chapterName.toLowerCase().includes(e.search.toLowerCase())||t.bookText.toLowerCase().includes(e.search.toLowerCase())||t.content.toLowerCase().includes(e.search.toLowerCase())}))},sortList:function(){var e=this;if(!this.sortable.prop||!this.sortable.order)return this.filterList;var t=[].concat(this.filterList);return t.sort((function(t,o){if("ascending"!==e.sortable.order){var n=t;t=o,o=n}return t[e.sortable.prop]>o[e.sortable.prop]?1:t[e.sortable.prop]<o[e.sortable.prop]?-1:0})),t},showList:function(){var e=(this.pagination.page-1)*this.pagination.size;return e>this.filterList.length?[]:this.filterList.slice(e,Math.min(e+this.pagination.size,this.filterList.length))}}),props:["show","book"],watch:{show:function(e){}},methods:{formatTableField:function(e,t,o){switch(t.property){default:return o}},sortChange:function(e){var t=e.prop,o=e.order;this.sortable={prop:t,order:o}},cancel:function(){this.$emit("setShow",!1)},addBookmark:function(){u["a"].$emit("addBookmark")},deleteBookmarks:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的书签"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的书签吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/deleteBookmarks",e.localSelection).then((function(t){t.data.isSuccess&&(e.localSelection=[],e.$message.success("删除书签成功"),e.$root.$children[0].loadBookmarks(!0))}),(function(t){e.$message.error("删除书签失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},editBookmark:function(e){u["a"].$emit("showBookmarkForm",Object(i["a"])({},e),!1)},uploadFile:function(){this.$refs.fileRef.dispatchEvent(new MouseEvent("click"))},onFileChange:function(e){var t=this,o=e.target.files&&e.target.files[0],n=new FileReader;n.onload=function(e){var o=e.target.result;try{var n=JSON.parse(o);Array.isArray(n)&&n.length&&t.comfirmImport(n)}catch(r){t.$message.error("书签文件错误")}},n.onerror=function(){var e=new FormData;e.append("file",o),l["a"].post(t.api+"/readSourceFile",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.isSuccess){var o=[];e.data.data.forEach((function(e){try{var t=JSON.parse(e);Array.isArray(t)&&(o=o.concat(t))}catch(n){}})),o.length?t.comfirmImport(o):t.$message.error("书签文件错误")}}),(function(e){t.$message.error("读取书签文件内容失败 "+(e&&e.toString()))}))},n.readAsText(o),this.$refs.fileRef.value=null},comfirmImport:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要导入文件中的".concat(e.length,"条书签吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/saveBookmarks",e).then((function(e){e.data.isSuccess&&(t.$message.success("导入书签成功"),t.$root.$children[0].loadBookmarks(!0))}),(function(e){t.$message.error("导入书签失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},showBookmark:function(e){u["a"].$emit("showBookmark",e),this.cancel()}}},ze=We,He=(o("3455"),Object(b["a"])(ze,Pe,Ge,!1,null,"6574bc14",null)),Ve=He.exports,Qe=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书签",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("el-form",{attrs:{model:e.bookmarkForm}},[t("el-form-item",{attrs:{label:"书名"}},[t("el-input",{attrs:{readonly:""},model:{value:e.bookmarkForm.bookName,callback:function(t){e.$set(e.bookmarkForm,"bookName",t)},expression:"bookmarkForm.bookName"}})],1),t("el-form-item",{attrs:{label:"作者"}},[t("el-input",{attrs:{readonly:""},model:{value:e.bookmarkForm.bookAuthor,callback:function(t){e.$set(e.bookmarkForm,"bookAuthor",t)},expression:"bookmarkForm.bookAuthor"}})],1),t("el-form-item",{attrs:{label:"章节"}},[t("el-input",{attrs:{readonly:""},model:{value:e.bookmarkForm.chapterName,callback:function(t){e.$set(e.bookmarkForm,"chapterName",t)},expression:"bookmarkForm.chapterName"}})],1),t("el-form-item",{attrs:{label:"内容"}},[t("el-input",{attrs:{type:"textarea",rows:5,readonly:""},model:{value:e.bookmarkForm.bookText,callback:function(t){e.$set(e.bookmarkForm,"bookText",t)},expression:"bookmarkForm.bookText"}})],1),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.bookmarkForm.content,callback:function(t){e.$set(e.bookmarkForm,"content",t)},expression:"bookmarkForm.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium"},on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1):e._e()},Ke=[],Je={model:{prop:"show",event:"setShow"},name:"BookmarkForm",data:function(){return{bookmarkForm:Object(i["a"])({},A["c"])}},props:["show","bookmark","isAdd"],computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),watch:{show:function(e){e&&(this.bookmarkForm=this.bookmark||Object(i["a"])({},A["c"]))}},methods:{cancel:function(){this.$emit("setShow",!1)},save:function(){var e=this;if(this.bookmarkForm.bookName||this.bookmarkForm.bookAuthor)if(this.bookmarkForm.bookText){var t=Object(i["a"])({},this.bookmarkForm);l["a"].post("/saveBookmark",t).then((function(t){t.data.isSuccess&&(e.$message.success((e.isAdd?"新增":"编辑")+"书签成功"),e.$root.$children[0].loadBookmarks(!0),e.cancel())}),(function(t){e.$message.error((e.isAdd?"新增":"编辑")+"书签失败 "+(t&&t.toString()))}))}else this.$message.error("书籍内容不能为空");else this.$message.error("书籍信息错误")}}},qe=Je,Ye=(o("c1cd"),Object(b["a"])(qe,Qe,Ke,!1,null,"b4d6c7ce",null)),Ze=Ye.exports,Xe=(o("8a79"),function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:e.title,visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v(e._s(this.title)+" "),t("span",{staticClass:"float-right span-btn",on:{click:e.resolveAndImportBooks}},[e._v("一键导入")]),t("span",{staticClass:"float-right span-btn",on:{click:e.resolveBooks}},[e._v("解析书籍")])])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{ref:"fileTable",attrs:{data:e.filteredFileList,height:e.dialogContentHeight},on:{"selection-change":function(t){e.fileSelection=t}}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface,selectable:function(e){return!e.toParent}}}),t("el-table-column",{attrs:{property:"name","min-width":"150px",label:e.resolveMode?"书名":"文件名",sortable:"","sort-method":e.sortMethod,filters:[{text:"已导入",value:"imported"},{text:"未导入",value:"unImport"},{text:"可导入",value:"canImport"},{text:"目录",value:"directory"}],"filter-method":e.filterHandler,fixed:e.$store.state.miniInterface},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.isImported?t("span",{staticClass:"imported-book-name"},[e._v(e._s(o.row.name))]):o.row.isDirectory?e._e():t("span",[e._v(e._s(o.row.name))]),o.row.isDirectory?t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.showFileList(o.row.path)}}},[e._v(e._s(o.row.name))]):e._e()]}}],null,!1,3985659619)}),e.resolveMode?t("el-table-column",{attrs:{property:"book.author",label:"作者名","min-width":"100px",sortable:"",filters:e.authorList,"filter-method":e.filterAuthor}}):e._e(),t("el-table-column",{attrs:{property:"size",label:"大小",sortable:"",formatter:e.formatTableField,"min-width":"100px"}}),t("el-table-column",{attrs:{property:"lastModified",label:"修改时间",sortable:"",formatter:e.formatTableField,width:"120px"}}),t("el-table-column",{attrs:{align:"right",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(o){return[o.row.isDirectory?e._e():t("el-dropdown",{attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:function(t){return e.operateFile(o.row,t)}}},[t("el-button",{staticClass:"text-button",attrs:{type:"text",size:"medium"}},[e._v(" 操作"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o.row.isDirectory?e._e():t("el-dropdown-item",{attrs:{command:"downloadFile"}},[e._v("下载")]),!o.row.isDirectory&&o.row.name.endsWith(".zip")?t("el-dropdown-item",{attrs:{command:"restoreFromFile"}},[e._v("还原")]):e._e(),!o.row.isDirectory&&o.row.name.endsWith(".json")?t("el-dropdown-item",{attrs:{command:"editFile"}},[e._v("编辑")]):e._e(),o.row.canImport?t("el-dropdown-item",{attrs:{command:"importFromFile"}},[e._v("加入书架")]):e._e()],1)],1),o.row.toParent?e._e():t("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(t){return e.deleteFile(o.row)}}},[e._v("删除")])]}}],null,!1,1541015572)},[t("template",{slot:"header"},[t("el-input",{attrs:{size:"mini",placeholder:"搜索本页"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],2)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-dropdown",{staticClass:"float-left",attrs:{trigger:e.$store.state.touchable?"click":"hover"},on:{command:e.operate}},[t("el-button",{attrs:{type:"primary",size:"medium"}},[e._v(" 操作"),e.fileSelection.length?t("span",[e._v(" ("+e._s(e.fileSelection.length)+")")]):e._e(),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"deleteFileList"}},[e._v("批量删除")]),t("el-dropdown-item",{attrs:{command:"importFromFile"}},[e._v("批量加入书架")]),t("el-dropdown-item",{attrs:{command:"mkdir"}},[e._v("新建目录")]),t("el-dropdown-item",{attrs:{command:"upload"}},[e._v("上传文件")])],1)],1),t("input",{ref:"bookRef",staticStyle:{display:"none"},attrs:{type:"file",multiple:"multiple"},on:{change:e.onFileChange}})],1)]):e._e()}),et=[],tt=(o("3c65"),o("30b5")),ot={model:{prop:"show",event:"setShow"},name:"FileManager",data:function(){return{currentPath:"/",fileList:[],keyword:"",searchWord:"",resolveMode:!1,fileSelection:[]}},props:["show","home","title"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),{},{localBook:function(){return this.$store.getters.shelfBooks.filter((function(e){return"loc_book"===e.origin}))},filteredFileList:function(){var e=this;return this.fileList.filter((function(t){return!e.keyword||t.name.toLowerCase().includes(e.keyword.toLowerCase())}))},authorList:function(){if(!this.resolveMode)return[];var e={};return this.filteredFileList.map((function(e){return e.book.author})).filter((function(t){return!(!t||e[t])&&(e[t]=1,!0)})).map((function(e){return{text:e,value:e}}))}}),watch:{show:function(e){var t=this;e&&(this.resolveMode=!1,this.showFileList("/"),this.$nextTick((function(){t.$refs.fileTable.clearFilter(),t.$refs.fileTable.clearSelection(),t.$refs.fileTable.clearSort()})))}},methods:{formatTableField:function(e,t,o){switch(t.property){case"createdAt":case"lastLoginAt":case"lastModified":return o?new Date(o).format("yy-MM-dd hh:mm"):"";case"size":return e.isDirectory?"":Object(U["d"])(o);default:return o}},canImport:function(e){var t=e.path.toLowerCase();return t.endsWith(".txt")||t.endsWith(".epub")||t.endsWith(".umd")||t.endsWith(".cbz")||t.endsWith(".pdf")},cancel:function(){this.$emit("setShow",!1)},resolveBooks:function(){var e=this;this.$confirm("解析当前目录及子目录的所有书籍耗费资源较多，确认要继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,o,n){"confirm"===t?(o.confirmButtonLoading=!0,o.confirmButtonText="解析中...",l["a"].post(e.api+"/file/parse",{path:e.currentPath,home:e.home}).then((function(t){t.data.isSuccess&&(e.fileList=t.data.data.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{isImported:!!e.localBook.find((function(e){return e.originName.indexOf(t.path)>=0})),canImport:e.canImport(t)})})),e.resolveMode=!0,e.$nextTick((function(){e.$refs.fileTable&&e.$refs.fileTable.doLayout()})))}),(function(t){e.$message.error("解析书籍失败 "+(t&&t.toString()))})).then((function(){n(),o.confirmButtonLoading=!1}))):n()}})["catch"]((function(){return!1}))},resolveAndImportBooks:function(){var e=this;this.$confirm("一键导入当前目录及子目录的所有书籍耗费资源较多，确认要继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,o,n){"confirm"===t?(o.confirmButtonLoading=!0,o.confirmButtonText="导入中...",l["a"].post(e.api+"/file/parse",{path:e.currentPath,home:e.home,import:1},{timeout:3e5}).then((function(t){t.data.isSuccess&&(e.$root.$children[0].loadBookShelf(),e.$alert("成功导入"+t.data.data.length+"本书","导入结果"))}),(function(t){e.$message.error("一键导入书籍失败 "+(t&&t.toString()))})).then((function(){n(),o.confirmButtonLoading=!1}))):n()}})["catch"]((function(){return!1}))},showFileList:function(e){var t=this;this.currentPath=e||"/",l["a"].get(this.api+"/file/list",{params:{path:this.currentPath,home:this.home}}).then((function(e){if(e.data.isSuccess){if(e.data.data=e.data.data||[],"/"!==t.currentPath){var o=t.currentPath.split("/").filter((function(e){return e}));o.pop(),e.data.data.unshift({name:"..",isDirectory:!0,toParent:!0,path:"/"+o.join("/")})}e.data.data.sort(t.sortMethod),t.fileList=e.data.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{isImported:!e.isDirectory&&!!t.localBook.find((function(t){return t.originName.indexOf(e.path)>=0})),canImport:t.canImport(e)})}))}}),(function(e){t.$message.error("加载文件列表失败 "+(e&&e.toString()))}))},sortMethod:function(e,t){return".."===e.name?-1:".."===t.name?1:e.isDirectory&&!t.isDirectory?-1:!e.isDirectory&&t.isDirectory||e.name>t.name?1:-1},filterHandler:function(e,t){switch(e){case"imported":return t.isImported;case"unImport":return!t.isDirectory&&!t.isImported;case"canImport":return!t.isDirectory&&t.canImport;case"directory":return t.isDirectory;default:return!0}},filterAuthor:function(e,t){return t.book.author===e},operate:function(e){if("importFromFile"===e)return this.importFromFile(!0);this[e].call(this)},operateFile:function(e,t){this[t].call(this,e)},deleteFileList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fileSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的文件"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/file/deleteMulti",{path:e.fileSelection.map((function(e){return e.path})),home:e.home}).then((function(t){t.data.isSuccess&&(e.fileSelection=[],e.$message.success("删除文件成功"),e.showFileList(e.currentPath))}),(function(t){e.$message.error("删除文件失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},deleteFile:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要删除该".concat(e.isDirectory?"目录":"文件","吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/file/delete",{path:e.path,home:t.home}).then((function(e){e.data.isSuccess&&(t.$message.success("删除成功"),t.showFileList(t.currentPath))}),(function(e){t.$message.error("删除失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},editFile:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:l["a"].get(t.api+"/file/get",{params:{path:e.path,home:t.home}}).then((function(o){if(o.data.isSuccess){var n=o.data.data;try{n=JSON.stringify(JSON.parse(n),null,4)}catch(r){n=o.data.data}u["a"].$emit("showEditor","编辑 "+e.name,n,function(){var o=Object(c["a"])(Object(s["a"])().mark((function o(n,r){var a;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.$confirm("随意修改内容有可能会造成数据错乱，确认要保存编辑后的内容吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 3:if(a=o.sent,a){o.next=6;break}return o.abrupt("return");case 6:l["a"].post(t.api+"/file/save",{path:e.path,home:t.home,content:n}).then((function(e){e.data.isSuccess&&r()}),(function(e){t.$message.error("保存文件内容失败 "+(e&&e.toString()))})),o.next=12;break;case 9:o.prev=9,o.t0=o["catch"](0),t.$message.error("内容必须是JSON格式");case 12:case"end":return o.stop()}}),o,null,[[0,9]])})));return function(e,t){return o.apply(this,arguments)}}())}}),(function(e){t.$message.error("获取文件内容失败 "+(e&&e.toString()))}));case 1:case"end":return o.stop()}}),o)})))()},mkdir:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$prompt("","新建目录",{inputValue:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"目录名不能为空"}})["catch"]((function(){return!1}));case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return");case 5:l["a"].post(e.api+"/file/mkdir",{path:e.currentPath,name:o.value,home:e.home}).then((function(t){t.data.isSuccess&&(e.$message.success("操作成功"),e.showFileList(e.currentPath))}),(function(t){e.$message.error("操作失败"+(t&&t.toString()))}));case 6:case"end":return t.stop()}}),t)})))()},importFromFile:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!0!==e){o.next=4;break}if(t.fileSelection.length){o.next=4;break}return t.$message.error("请选择需要加入书架的书籍"),o.abrupt("return");case 4:l["a"].post(t.api+"/file/importPreview",{path:!0===e?t.fileSelection.map((function(e){return e.path})):[e.path],home:t.home}).then((function(e){if(e.data.isSuccess){if(!e.data.data||!e.data.data.length)return void t.$message.error("没有选择可导入的书籍");setTimeout((function(){u["a"].$emit("importPreview",e.data.data)}),0)}}),(function(e){t.$message.error("请求失败 "+(e&&e.toString()))}));case 5:case"end":return o.stop()}}),o)})))()},upload:function(){this.$refs.bookRef.dispatchEvent(new MouseEvent("click"))},downloadFile:function(e){var t=tt(this.api+"/file/download",{home:this.home,path:e.path,accessToken:this.$store.state.token});window.open(t,"__blank")},onFileChange:function(e){var t=this;if(e.target&&e.target.files&&e.target.files.length){for(var o=new FormData,n=0;n<e.target.files.length;n++){var r=e.target.files[n];o.append("file"+n,r)}o.append("home",this.home),o.append("path",this.currentPath),l["a"].post(this.api+"/file/upload",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data.isSuccess&&(t.$message.success("上传文件成功"),t.showFileList(t.currentPath))}),(function(e){t.$message.error("上传文件 "+(e&&e.toString()))})),this.$refs.bookRef.value=null}},restoreFromFile:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要从该压缩文件恢复书源、书架、分组、RSS订阅数据、替换规则、书签、用户配置和Webdav书籍吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/file/restore",{path:e.path,home:t.home}).then((function(e){e.data.isSuccess&&(t.$message.success("恢复成功"),t.$root.$children[0].init(!0))}),(function(e){t.$message.error("恢复失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()}}},nt=ot,rt=(o("9be0"),o("c4fe"),Object(b["a"])(nt,Xe,et,!1,null,"eecda6a0",null)),at=rt.exports,it=function(){var e=this,t=e._self._c;return t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书籍封面",visible:e.show,width:e.dialogSmallWidth,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("书籍封面 "),t("span",{staticClass:"float-right span-btn",class:{loading:e.loadingMore},on:{click:e.searchBookSourceByEventStream}},[e.loadingMore?t("i",{staticClass:"el-icon-loading"}):e._e(),e._v(" "+e._s(e.loadingMore?"加载中...":"加载更多")+" ")])])]),e.show?t("div",{staticClass:"book-cover-container"},[e.coverList.length?t("div",{staticClass:"cover-list"},e._l(e.coverList,(function(o,n){return t("div",{key:"cover-"+n,staticClass:"book-cover-wrapper",on:{click:function(t){return e.setCover(o)}}},[t("el-image",{staticClass:"book-cover",attrs:{src:o,fit:"cover",lazy:""}},[t("img",{staticClass:"el-image__inner",staticStyle:{"object-fit":"cover"},attrs:{slot:"error",src:e.noCover,alt:""},slot:"error"})])],1)})),0):t("div",{staticClass:"empty-notice"},[e._v(" 暂无其它来源 ")])]):e._e()])},st=[],ct=o("7e43"),lt=o.n(ct),ut=o("30b5"),ft={model:{prop:"show",event:"setShow"},name:"BookCover",data:function(){return{coverList:[],lastIndex:-1,loadingMore:!1,noCover:lt.a}},props:["show","book"],computed:Object(i["a"])(Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),{},{showBookInfo:{get:function(){return this.$store.state.showBookInfo},set:function(e){this.$store.commit("setShowBookInfo",e)}},coverListMap:function(){return this.coverList.reduce((function(e,t){return e[t]=t,e}),{})}}),watch:{show:function(e){e&&(this.coverList=[],this.lastIndex=-1,this.loadingMore=!1,this.getBookSource())}},methods:{cancel:function(){this.$emit("setShow",!1)},getBookCoverUrl:function(e){return e.customCoverUrl||e.coverUrl},getBookSource:function(e){var t=this;l["a"].post(this.api+"/getAvailableBookSource",{url:this.book.bookUrl,refresh:e?1:0}).then((function(e){t.loading=!1,e.data.isSuccess&&(t.coverList=(e.data.data||[]).map((function(e){return e.coverUrl})))}),(function(e){throw t.loading=!1,t.$message.error("获取书籍来源信息失败 "+(e&&e.toString())),e}))},searchBookSourceByEventStream:function(){var e=this,t=function(){try{e.searchEventSource&&e.searchEventSource.readyState!=e.searchEventSource.CLOSED&&e.searchEventSource.close(),e.searchEventSource=null}catch(t){}};if(this.loadingMore)return t(),void(this.loadingMore=!1);var o={accessToken:this.$store.state.token,concurrentCount:this.$store.state.searchConfig.concurrentCount,url:this.book.bookUrl,lastIndex:this.lastIndex};this.loadingMore=!0;var n=ut(this.api+"/searchBookSourceSSE",o);t(),this.searchEventSource=new EventSource(n,{withCredentials:!0}),this.searchEventSource.addEventListener("error",(function(o){e.loadingMore=!1,t();try{if(o.data){var n=JSON.parse(o.data);n&&n.errorMsg&&e.$message.error(n.errorMsg)}}catch(r){}}));var r=this.coverList.length;this.searchEventSource.addEventListener("end",(function(o){e.loadingMore=!1,t();try{if(o.data){var n=JSON.parse(o.data);n&&n.lastIndex&&(e.lastIndex=n.lastIndex)}e.coverList.length===r&&e.$message.error("没有更多啦")}catch(a){}})),this.searchEventSource.addEventListener("message",(function(t){try{if(t.data){var o=JSON.parse(t.data);o&&o.lastIndex&&(e.lastIndex=o.lastIndex),o.data&&(e.coverList=[].concat(e.coverList,o.data.filter((function(t){return!e.coverListMap[t.coverUrl]})).map((function(e){return e.coverUrl}))))}}catch(n){}}))},setCover:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n,r;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要将封面设置为所选择的图片吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return",!1);case 5:r=Object(i["a"])(Object(i["a"])({},t.book),{},{coverUrl:e}),t.saveBook(r);case 7:case"end":return o.stop()}}),o)})))()},saveBook:function(e){var t=this;return l["a"].post(this.api+"/saveBook",e).then((function(o){o.data.isSuccess&&(t.$message.success("操作成功"),t.showBookInfo.bookUrl===e.bookUrl&&(t.showBookInfo=o.data.data),t.$store.commit("updateShelfBook",o.data.data))}),(function(e){t.$message.error("操作失败"+(e&&e.toString()))}))}}},dt=ft,pt=(o("d7fd"),o("d8db"),Object(b["a"])(dt,it,st,!1,null,"2fdb5f62",null)),ht=pt.exports,mt=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"授权管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("授权管理 "),t("span",{staticClass:"float-right span-btn",on:{click:e.importLicense}},[e._v("更新密钥")])])]),t("div",[t("div",{staticClass:"license-item"},[t("span",{staticClass:"license-name"},[e._v("授权类型")]),t("span",{staticClass:"license-value"},[e._v(e._s(e.license.type))])]),t("div",{staticClass:"license-item"},[t("span",{staticClass:"license-name"},[e._v("授权域名")]),t("span",{staticClass:"license-value"},[e._v(e._s(e.license.host))])]),t("div",{staticClass:"license-item"},[t("span",{staticClass:"license-name"},[e._v("过期时间")]),t("span",{staticClass:"license-value"},[e._v(e._s(0===e.license.expiredAt?"永久有效":new Date(e.license.expiredAt).format("yy-MM-dd hh:mm")))])]),t("div",{staticClass:"license-item"},[t("span",{staticClass:"license-name"},[e._v("用户上限")]),t("span",{staticClass:"license-value"},[e._v(e._s(e.license.userMaxLimit)+" 人")])]),t("div",{staticClass:"license-item"},[t("span",{staticClass:"license-name"},[e._v("kindle端")]),t("span",{staticClass:"license-value"},[e._v(e._s(0===e.license.simpleWebExpiredAt?"永久有效":new Date(e.license.simpleWebExpiredAt).format("yy-MM-dd hh:mm"))+" 过期")]),t("span",{staticClass:"span-btn",on:{click:e.supplyLicense}},[e._v("申请7天试用")])])])]):e._e()},gt=[],bt=(o("466d"),"https://r.htmake.com"),kt={model:{prop:"show",event:"setShow"},name:"License",data:function(){return{license:{host:"",userMaxLimit:50,expiredAt:0,openApi:!1,simpleWebExpiredAt:(new Date).getTime()}}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show"],watch:{show:function(e){e&&this.getLicense()}},methods:{cancel:function(){this.$emit("setShow",!1)},getLicense:function(){var e=this;l["a"].get(this.api+"/getLicense").then((function(t){t.data.isSuccess&&(e.license=t.data.data.license)}),(function(t){e.$message.error("获取授权失败 "+(t&&t.toString()))}))},supplyLicense:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$prompt("请输入邮箱进行验证，每个邮箱仅限试用一次，有效期7天","验证邮箱",{inputValue:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"邮箱不能为空"}})["catch"]((function(){return!1}));case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return");case 5:if(n=o.value,n.match(/@(163|126|qq|yahoo|sina|sohu|yeah|139|189|21cn|outlook|gmail|icloud).com$/)){t.next=9;break}return e.$message.error("仅支持163|126|qq|yahoo|sina|sohu|yeah|139|189|21cn|outlook|gmail|icloud等邮箱"),t.abrupt("return");case 9:l["a"].post(bt+"/reader3/sendCodeToEmail",{email:n}).then((function(t){t.data.isSuccess&&e.showVerifyCodePrompt(n)}),(function(t){e.$message.error("发送验证码失败 "+(t&&t.toString()))}));case 10:case"end":return t.stop()}}),t)})))()},showVerifyCodePrompt:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$prompt("请输入验证码","验证邮箱",{inputValue:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"验证码不能为空"}})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(bt+"/reader3/supplyLicense",{email:e,code:n.value},{alert:!1}).then((function(e){e.data.isSuccess&&(t.$message.success("申请试用密钥成功，有效期7天，请谨慎更新"),t.comfirmImport(e.data.data.key))}),(function(e){t.$message.error("申请试用失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()},importLicense:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$prompt("请输入密钥","更新密钥",{inputValue:"",confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e||"密钥不能为空"}})["catch"]((function(){return!1}));case 2:if(o=t.sent,o){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",e.comfirmImport(o.value));case 6:case"end":return t.stop()}}),t)})))()},comfirmImport:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要更新密钥吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/importLicense",{content:e}).then((function(e){e.data.isSuccess&&(t.$message.success("更新密钥成功"),t.license=e.data.data.license)}),(function(e){t.$message.error("更新密钥失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()}}},wt=kt,vt=(o("62a7"),Object(b["a"])(wt,mt,gt,!1,null,"3ee772ca",null)),St=vt.exports,At=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书籍设置",visible:e.show,width:e.dialogSmallWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("el-form",{attrs:{model:e.bookConfig}},[t("el-form-item",{attrs:{label:"PDF图片宽度"}},[t("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择PDF图片宽度"},model:{value:e.bookConfig.pdfImageWidth,callback:function(t){e.$set(e.bookConfig,"pdfImageWidth",t)},expression:"bookConfig.pdfImageWidth"}},e._l(e.pdfImageWidthList,(function(e,o){return t("el-option",{key:"pdf-image-width-"+o,attrs:{label:e.name,value:e.value}})})),1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.save}},[e._v("保 存")]),t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.cancel}},[e._v("关 闭")])],1)],1):e._e()},xt=[],Bt={model:{prop:"show",event:"setShow"},name:"BookConfig",data:function(){return{isAdd:!0,bookConfig:{pdfImageWidth:(this.$store.state.showBookInfo.readConfig||{}).pdfImageWidth||800},pdfImageWidthList:[{name:"750px",value:750},{name:"800px",value:800},{name:"850px",value:850},{name:"900px",value:900},{name:"950px",value:950},{name:"1000px",value:1e3},{name:"1100px",value:1100},{name:"1200px",value:1200},{name:"1300px",value:1300},{name:"1400px",value:1400},{name:"1500px",value:1500},{name:"1600px",value:1600}]}},props:["show"],computed:Object(i["a"])({},Object(h["b"])(["dialogSmallWidth","dialogTop"])),watch:{show:function(e){e&&(this.bookConfig={pdfImageWidth:(this.$store.state.showBookInfo.readConfig||{}).pdfImageWidth||800})}},methods:{cancel:function(){this.$emit("setShow",!1)},save:function(){var e=this;l["a"].post("/book/saveBookConfig",Object(i["a"])({bookUrl:this.$store.state.showBookInfo.bookUrl},this.bookConfig)).then((function(t){t.data.isSuccess&&(e.$message.success("更新成功"),e.showBookInfo=t.data.data,e.$store.commit("updateShelfBook",t.data.data))}),(function(t){e.$message.error("更新失败"+(t&&t.toString()))}))}}},Ct=Bt,yt=Object(b["a"])(Ct,At,xt,!1,null,"08713662",null),Ot=yt.exports,It=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书源订阅管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("书源订阅管理 ")])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.remoteBookSourceList,height:e.dialogContentHeight},on:{"selection-change":function(t){e.localSelection=t}}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"name","min-width":"150px",label:"名称",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"link",label:"链接","min-width":"150px"}}),t("el-table-column",{attrs:{property:"lastSyncTime",formatter:e.formatTableField,label:"上次同步","min-width":"150px"}}),t("el-table-column",{attrs:{label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showForm(o.row,o.$index)}}},[e._v("修改")]),t("el-button",{attrs:{type:"text",disabled:e.loadingIndex>=0},on:{click:function(t){return e.sync(o.row,o.$index)}}},[e.loadingIndex===o.$index?t("i",{staticClass:"el-icon-loading"}):e._e(),e._v(e._s(e.loadingIndex===o.$index?"同步中":"同步"))])]}}],null,!1,3286982204)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteRemoteBookSourceSub}},[e._v("批量删除"),e.localSelection.length?t("span",[e._v(" ("+e._s(e.localSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.showForm(!1)}}},[e._v("新增")])],1)])]):e._e()},Tt=[],jt=function(e,t){return l["a"].get("/file/get",{params:{path:e,home:t||"__HOME__"},silent:!0}).then((function(e){return e.data.isSuccess?e.data.data:null}))["catch"]((function(){return null}))},Lt=function(e,t,o){return l["a"].post("/file/save",{path:e,content:t,home:o||"__HOME__"},{silent:!0}).then((function(e){return!!e.data.isSuccess}))["catch"]((function(){return null}))},$t={model:{prop:"show",event:"setShow"},name:"RemoteBookSourceSub",data:function(){return{localSelection:[],filePath:"remoteBookSourceSub.json",remoteBookSourceList:[],loadingIndex:-1}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show"],watch:{show:function(e){e&&this.loadRemoteBookSourceList()}},methods:{formatTableField:function(e,t,o){switch(t.property){case"lastSyncTime":return o?new Date(o).format("yy-MM-dd hh:mm"):"";default:return o}},cancel:function(){this.$emit("setShow",!1)},loadRemoteBookSourceList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,jt(e.filePath);case 2:if(o=t.sent,o)try{n=JSON.parse(o),Array.isArray(n)&&(e.remoteBookSourceList=n)}catch(r){}case 4:case"end":return t.stop()}}),t)})))()},deleteRemoteBookSourceSub:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的书源订阅"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的书源订阅吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:n=e.remoteBookSourceList.filter((function(t){return!e.localSelection.includes(t)})),e.saveData(n);case 10:case"end":return t.stop()}}),t)})))()},sync:function(e,t){var o=this;this.loadingIndex=t,l["a"].post("/saveFromRemoteSource",{url:e.link},{timeout:6e5}).then((function(e){o.loadingIndex=-1,o.$root.$children[0].loadBookSource(!0),e.data.isSuccess&&(o.remoteBookSourceList[t].lastSyncTime=(new Date).getTime(),o.saveData(o.remoteBookSourceList,!0))}),(function(e){o.$message.error("同步失败 "+(e&&e.toString()))}))},showForm:function(e,t){var o=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var r,a,c,l;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=!e,e=Object(i["a"])({},e||{name:"",link:"",lastSyncTime:null}),a=[{name:"name",label:"名称",type:"input"},{name:"link",label:"链接",type:"input"}],n.next=5,o.$msgbox({title:r?"新增订阅":"编辑订阅",message:o.renderForm(o.filePath,e,a,(function(t){return e=t})),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"})["catch"]((function(e){return"close"===e&&"close"}));case 5:if(c=n.sent,"confirm"!==c){n.next=12;break}l=[].concat(o.remoteBookSourceList),r?l=l.concat([e]):l[t]=e,o.saveData(l),n.next=13;break;case 12:return n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n)})))()},saveData:function(e,t){var o=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Lt(o.filePath,JSON.stringify(e));case 2:r=n.sent,r&&(o.localSelection=[],t||o.$message.success("操作成功"),o.loadRemoteBookSourceList());case 4:case"end":return n.stop()}}),n)})))()}}},Rt=$t,Ft=(o("62b7"),Object(b["a"])(Rt,It,Tt,!1,null,"e4af2df0",null)),Ut=Ft.exports,Dt=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"密钥管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("密钥管理 ")])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.list,height:e.dialogContentHeight},on:{"selection-change":function(t){e.localSelection=t}}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"host","min-width":"150px",label:"Host",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"code",label:"Code","min-width":"100px"}}),t("el-table-column",{attrs:{property:"type",label:"类型","min-width":"100px"}}),t("el-table-column",{attrs:{property:"userMaxLimit",label:"用户上限","min-width":"100px"}}),t("el-table-column",{attrs:{property:"expiredAt",label:"过期时间",formatter:e.formatTableField,"min-width":"100px"}}),t("el-table-column",{attrs:{property:"simpleWebExpiredAt",formatter:e.formatTableField,label:"Kindle过期","min-width":"150px"}}),t("el-table-column",{attrs:{property:"activeTime",formatter:e.formatTableField,label:"激活时间","min-width":"150px"}}),t("el-table-column",{attrs:{property:"activeIp",label:"激活IP","min-width":"100px"}}),t("el-table-column",{attrs:{property:"lastOnlineTime",formatter:e.formatTableField,label:"上次在线时间","min-width":"150px"}}),t("el-table-column",{attrs:{property:"lastOnlineIp",label:"上次在线IP","min-width":"100px"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteItems}},[e._v("批量删除"),e.localSelection.length?t("span",[e._v(" ("+e._s(e.localSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.showForm}},[e._v("生成密钥")])],1)])]):e._e()},Et=[],Mt=o("63f0"),Nt={model:{prop:"show",event:"setShow"},name:"ActiveLicense",data:function(){return{localSelection:[],filePath:"data/activeLicense.json",list:[],loadingIndex:-1}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show"],watch:{show:function(e){e&&this.loadList()}},methods:{formatTableField:function(e,t,o){switch(t.property){case"expiredAt":case"simpleWebExpiredAt":case"activeTime":case"lastOnlineTime":return o?new Date(o).format("yy-MM-dd hh:mm"):"";default:return o}},cancel:function(){this.$emit("setShow",!1)},loadList:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,jt(e.filePath,"__STORAGE__");case 2:if(o=t.sent,o)try{n=JSON.parse(o),Array.isArray(n)&&(e.list=n)}catch(r){}case 4:case"end":return t.stop()}}),t)})))()},deleteItems:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的记录"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:n=e.list.filter((function(t){return!e.localSelection.includes(t)})),e.saveData(n);case 10:case"end":return t.stop()}}),t)})))()},showForm:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(Mt["b"])("lastGenerateLicenseConfig",{host:"*",userMaxLimit:15,expiredAt:0,openApi:!1,simpleWebExpiredAt:1735660799e3,key:"Pvkp7tMQJpi4kWBE",type:"basic",code:""}),n=[{name:"host",label:"Host",type:"input"},{name:"userMaxLimit",label:"用户上限",type:"input"},{name:"expiredAt",label:"过期时间",type:"input"},{name:"simpleWebExpiredAt",label:"Kindle有效期",type:"input"},{name:"type",label:"类型",type:"input"},{name:"code",label:"Code",type:"input"}],t.next=4,e.$msgbox({title:"生成密钥",message:e.renderForm(e.filePath,o,n,(function(e){return o=e})),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"})["catch"]((function(e){return"close"===e&&"close"}));case 4:if(r=t.sent,"confirm"!==r){t.next=16;break}return o.userMaxLimit=parseInt(o.userMaxLimit),o.expiredAt=""+o.expiredAt,o.expiredAt&&o.expiredAt.indexOf("-")>0?o.expiredAt=new Date(o.expiredAt.replace(/-/g,"/")+" 23:59:59").getTime():o.expiredAt=parseInt(o.expiredAt),o.simpleWebExpiredAt=""+o.simpleWebExpiredAt,o.simpleWebExpiredAt&&o.simpleWebExpiredAt.indexOf("-")>0?o.simpleWebExpiredAt=new Date(o.simpleWebExpiredAt.replace(/-/g,"/")+" 23:59:59").getTime():o.simpleWebExpiredAt=parseInt(o.simpleWebExpiredAt),Object(Mt["c"])("lastGenerateLicenseConfig",o),t.next=14,l["a"].post("/generateLicense",o).then((function(e){e.data.isSuccess&&u["a"].$emit("showEditor","生成授权",JSON.stringify(e.data.data,null,4))}),(function(t){throw e.$message.error("生成密钥失败 "+(t&&t.toString())),t}));case 14:t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t)})))()},saveData:function(e,t){var o=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Lt(o.filePath,JSON.stringify(e),"__STORAGE__");case 2:r=n.sent,r&&(o.localSelection=[],t||o.$message.success("操作成功"),o.loadList());case 4:case"end":return n.stop()}}),n)})))()}}},_t=Nt,Pt=(o("c9b1"),Object(b["a"])(_t,Dt,Et,!1,null,"53b78df8",null)),Gt=Pt.exports,Wt=function(){var e=this,t=e._self._c;return e.$store.getters.isNormalPage?t("el-dialog",{class:e.isWebApp&&!e.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"HttpTTS管理",visible:e.show,width:e.dialogWidth,top:e.dialogTop,fullscreen:e.$store.state.miniInterface,"before-close":e.cancel},on:{"update:visible":function(t){e.show=t}}},[t("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"el-dialog__title"},[e._v("HttpTTS管理")])]),t("div",{staticClass:"source-container table-container"},[t("el-table",{attrs:{data:e.$store.state.httpTTS,height:e.dialogContentHeight},on:{"selection-change":function(t){e.localSelection=t}}},[t("el-table-column",{attrs:{type:"selection",width:"25",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"name","min-width":"150px",label:"名称",fixed:e.$store.state.miniInterface}}),t("el-table-column",{attrs:{property:"url",label:"链接","min-width":"150px"}}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editItem(o.row)}}},[e._v("编辑")])]}}],null,!1,966691103)})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",[t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.deleteReplaceRules}},[e._v("批量删除"),e.localSelection.length?t("span",[e._v(" ("+e._s(e.localSelection.length)+")")]):e._e()]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.uploadFile}},[e._v("导入")]),t("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:e.addNew}},[e._v("添加")]),t("input",{ref:"fileRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.onFileChange(t)}}})],1)])]):e._e()},zt=[],Ht={model:{prop:"show",event:"setShow"},name:"HttpTTS",data:function(){return{localSelection:[]}},computed:Object(i["a"])({},Object(h["b"])(["dialogWidth","dialogTop","dialogContentHeight"])),props:["show"],watch:{show:function(e){}},methods:{formatTableField:function(e,t,o){switch(t.property){default:return o}},cancel:function(){this.$emit("setShow",!1)},deleteReplaceRules:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.localSelection.length){t.next=3;break}return e.$message.error("请选择需要删除的HttpTTS"),t.abrupt("return");case 3:return t.next=5,e.$confirm("确认要删除所选择的HttpTTS吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=t.sent,o){t.next=8;break}return t.abrupt("return");case 8:l["a"].post(e.api+"/httpTTS/deleteMulti",e.localSelection).then((function(t){t.data.isSuccess&&(e.localSelection=[],e.$message.success("删除HttpTTS成功"),e.$root.$children[0].loadHttpTTS(!0))}),(function(t){e.$message.error("删除HttpTTS失败 "+(t&&t.toString()))}));case 9:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.showEditor(Object(i["a"])({},e),"编辑HttpTTS")},addNew:function(){this.showEditor({name:"新增HttpTTS",url:"",contentType:"",header:""},"新增HttpTTS")},showEditor:function(e,t){var o=this;u["a"].$emit("showEditor",t,JSON.stringify(e,null,4),(function(e,t){try{var n=JSON.parse(e);if(!n.name)return void o.$message.error("名称不能为空");if(!n.url)return void o.$message.error("链接不能为空");l["a"].post(o.api+"/httpTTS/save",n).then((function(e){e.data.isSuccess&&(t(),o.$message.success("保存成功"),o.$root.$children[0].loadHttpTTS(!0))}),(function(e){o.$message.error("保存失败 "+(e&&e.toString()))}))}catch(r){o.$message.error("必须是JSON格式")}}))},uploadFile:function(){this.$refs.fileRef.dispatchEvent(new MouseEvent("click"))},onFileChange:function(e){var t=this,o=e.target.files&&e.target.files[0],n=new FileReader;n.onload=function(e){var o=e.target.result;try{var n=JSON.parse(o);Array.isArray(n)&&n.length&&t.comfirmImport(n)}catch(r){t.$message.error("HttpTTS文件错误")}},n.onerror=function(){var e=new FormData;e.append("file",o),l["a"].post(t.api+"/readSourceFile",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.isSuccess){var o=[];e.data.data.forEach((function(e){try{var t=JSON.parse(e);Array.isArray(t)&&(o=o.concat(t))}catch(n){}})),o.length?t.comfirmImport(o):t.$message.error("HttpTTS文件错误")}}),(function(e){t.$message.error("读取HttpTTS文件内容失败 "+(e&&e.toString()))}))},n.readAsText(o),this.$refs.fileRef.value=null},comfirmImport:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$confirm("确认要导入文件中的".concat(e.length,"条HttpTTS吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return");case 5:l["a"].post(t.api+"/httpTTS/saveMulti",e).then((function(e){e.data.isSuccess&&(t.$message.success("导入HttpTTS成功"),t.$root.$children[0].loadHttpTTS(!0))}),(function(e){t.$message.error("导入HttpTTS失败 "+(e&&e.toString()))}));case 6:case"end":return o.stop()}}),o)})))()}}},Vt=Ht,Qt=(o("96b6"),Object(b["a"])(Vt,Wt,zt,!1,null,"75500020",null)),Kt=Qt.exports,Jt=o("0377"),qt=o("c197"),Yt=o.n(qt);o("f393"),o("a878"),o("82da");Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e},String.prototype.getBytesLength=function(){for(var e,t=0,o=0;o<this.length;o++)e=this.charCodeAt(o),e<127?t++:t+=128<=e&&e<=2047?2:2048<=e&&e<=65535?3:4;return t};var Zt={name:"app",components:{ImageViewer:f["a"],ReplaceRule:w,ReplaceRuleForm:y,MPCode:$,BookManage:G,BookInfo:J,UserManage:te,UserForm:ce,BookGroup:ge,RssSourceList:Ae,RssArticleList:Ie,RssArticle:Fe,SearchBookContent:_e,Bookmark:Ve,BookmarkForm:Ze,FileManager:at,BookCover:ht,License:St,BookConfig:Ot,RemoteBookSourceSub:Ut,ActiveLicense:Gt,HttpTTS:Kt},data:function(){return{remember:!0,loginForm:{username:"",password:"",code:""},showEditor:!1,editorTitle:"编辑器",editorContent:"",showReplaceRuleDialog:!1,showReplaceRuleForm:!1,replaceRule:{},isAddReplaceRule:!0,showMPCodeDialog:!1,showBookManageDialog:!1,showBookInfoDialog:!1,showUserManageDialog:!1,showUserFormDialog:!1,userForm:{},showBookGroupDialog:!1,isSetBookGroup:!1,showRssSourceListDialog:!1,showRssArticleListDialog:!1,rssSource:{},showRssArticleDialog:!1,rssArticleInfo:{},showSearchBookContentDialog:!1,searchBook:{},isLogin:!0,showBookmarkDialog:!1,showBookmarkForm:!1,bookmark:{},isAddBookmark:!0,bookmarkInBook:{},showFileManager:!1,fileManagerHome:"",fileManagerTitle:"文件管理",showBookCoverDialog:!1,bookCoverBook:{},showLicenseDialog:!1,showBookConfigDialog:!1,showRemoteBookSourceSubDialog:!1,showActiveLicenseDialog:!1,showHttpTTSDialog:!1}},beforeCreate:function(){var e=this;this.$store.dispatch("init"),this.$store.dispatch("syncFromLocalStorage"),this.$store.commit("setMiniInterface",Object(U["e"])()),document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px")),window.onresize=function(){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px")),e.$store.commit("setMiniInterface",Object(U["e"])()),e.$store.commit("setWindowSize",{width:window.innerWidth,height:window.innerHeight}),e.$store.commit("setTouchable","ontouchstart"in document)};var t=window.getQueryString("api");t&&this.$store.commit("setApi",t),(window.navigator.userAgent.indexOf("iPhone")>=0||window.navigator.userAgent.indexOf("iPad")>=0)&&(document.documentElement.style.setProperty("height","100vh"),document.body.style.setProperty("height","100vh"));try{var o=getComputedStyle(document.documentElement);this.$store.commit("setSafeArea",{top:0|o.getPropertyValue("--sat"),bottom:0|o.getPropertyValue("--sab"),left:0|o.getPropertyValue("--sal"),right:0|o.getPropertyValue("--sar")})}catch(n){}},created:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$route&&e.$route.query&&e.$route.query.api&&e.$store.commit("setApi",e.$route.query.api),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){e.autoSetTheme(e.autoTheme)})),t.next=4,e.tauriInit()["catch"]((function(){}));case 4:e.getUserInfo().then((function(){e.$store.state.notAutoSync||e.restoreUserConfig(!0),e.$store.dispatch("syncFromLocalStorage"),e.autoSetTheme(e.autoTheme),e.init()})),e.loadTxtTocRules();case 6:case"end":return t.stop()}}),t)})))()},beforeMount:function(){var e=this;this.setTheme(this.isNight),this.setMiniInterfaceClass(),this.setPageTypeClass(),this.setDocumentProperty(),this.eventBus=u["a"],u["a"].$on("showEditor",this.showEditorListener),u["a"].$on("showReplaceRuleForm",this.showReplaceRuleFormListener),u["a"].$on("showReplaceRuleDialog",(function(){e.showReplaceRuleDialog=!0})),u["a"].$on("showMPCodeDialog",(function(){e.showMPCodeDialog=!0})),u["a"].$on("showBookManageDialog",(function(){e.showBookManageDialog=!0})),u["a"].$on("showBookInfoDialog",(function(t){e.showBookInfo=t,e.showBookInfoDialog=!0})),u["a"].$on("showUserManageDialog",(function(){e.showUserManageDialog=!0})),u["a"].$on("showUserFormDialog",(function(t){e.showUserFormDialog=!0,e.userForm=Object(i["a"])({},t)})),u["a"].$on("showBookGroupDialog",(function(t){e.showBookGroupDialog=!0,e.isSetBookGroup=!!t})),u["a"].$on("showRssArticleListDialog",(function(t){e.showRssArticleListDialog=!0,e.rssSource=t})),u["a"].$on("showRssSourceListDialog",(function(){e.showRssSourceListDialog=!0})),u["a"].$on("showRssArticleDialog",(function(t){e.showRssArticleDialog=!0,e.rssArticleInfo=t})),u["a"].$on("showSearchBookContentDialog",(function(t){e.showSearchBookContentDialog=!0,e.searchBook=t})),u["a"].$on("showBookmarkForm",(function(t,o,n){e.bookmark=t,e.isAddBookmark=o,e.bookmarkCallback=n,e.showBookmarkForm=!0})),u["a"].$on("showBookmarkDialog",(function(t){e.showBookmarkDialog=!0,e.bookmarkInBook=t})),u["a"].$on("showFileManagerDialog",(function(t,o){e.fileManagerHome=t,e.fileManagerTitle=o,e.showFileManager=!0})),u["a"].$on("showBookCoverDialog",(function(t){e.showBookCoverDialog=!0,e.bookCoverBook=t})),u["a"].$on("showBookConfigDialog",(function(){e.showBookConfigDialog=!0})),u["a"].$on("showLicenseDialog",(function(){e.showLicenseDialog=!0})),u["a"].$on("showRemoteBookSourceSubDialog",(function(){e.showRemoteBookSourceSubDialog=!0})),u["a"].$on("showActiveLicenseDialog",(function(){e.showActiveLicenseDialog=!0})),u["a"].$on("showHttpTTSDialog",(function(){e.showHttpTTSDialog=!0}))},mounted:function(){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px")),window.reader=this},computed:{isNight:function(){return this.$store.getters.isNight},autoTheme:function(){return this.$store.getters.config.autoTheme},dialogWidth:function(){return this.$store.getters.dialogSmallWidth},dialogTop:function(){return this.$store.getters.dialogTop},showLogin:{get:function(){return this.$store.state.showLogin},set:function(e){this.$store.commit("setShowLogin",e)}},connected:function(){return this.$store.state.connected},showBookInfo:{get:function(){return this.$store.state.showBookInfo},set:function(e){this.$store.commit("setShowBookInfo",e)}}},watch:{isNight:function(e){this.setTheme(e)},autoTheme:function(e){this.autoSetTheme(e)},miniInterface:function(){this.setMiniInterfaceClass()},connected:function(e){e&&(window.customCSSLoad||window.loadLink(this.$store.getters.customCSSUrl,(function(){window.customCSSLoad=!0})))},"$store.state.config.pageType":function(){this.setPageTypeClass()},"$store.state.config.horizontalPadding":function(){this.setDocumentProperty()},"$store.state.config.topPadding":function(){this.setDocumentProperty()},"$store.state.config.bottomPadding":function(){this.setDocumentProperty()},showReplaceRuleForm:function(e){e||this.replaceRuleCallback&&(this.replaceRuleCallback(),this.replaceRuleCallback=null)},showBookmarkForm:function(e){e||this.bookmarkCallback&&(this.bookmarkCallback(),this.bookmarkCallback=null)},showLogin:function(e){e||(this.isLogin=!0)}},methods:{tauriInit:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o,n,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!window.__TAURI__||!window.__TAURI__.invoke){t.next=14;break}return t.next=3,window.__TAURI__.invoke("is_server_running")["catch"]((function(){return!1}));case 3:if(o=t.sent,n=function(){var t=Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.__TAURI__.invoke("get_server_port")["catch"]((function(){return!1}));case 2:o=t.sent,o&&e.$store.commit("setApi","http://localhost:".concat(o,"/reader3/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o){t.next=12;break}return r=e.$loading({lock:!0,text:"正在启动服务...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.next=9,window.__TAURI__.invoke("start_server")["catch"]((function(t){e.$message.error(t),e.$nextTick((function(){e.$router.push("/setting")}))})).then(n);case 9:r.close(),t.next=14;break;case 12:return t.next=14,n();case 14:case"end":return t.stop()}}),t)})))()},autoSetTheme:function(e){e&&(window.matchMedia("(prefers-color-scheme: dark)").matches?this.$store.commit("setNightTheme",!0):this.$store.commit("setNightTheme",!1))},setTheme:function(e){document.body.className=e?(document.body.className||"").replace("night-theme","")+" night-theme":(document.body.className||"").replace("night-theme","")},setMiniInterfaceClass:function(){this.$store.state.miniInterface?document.body.className=(document.body.className||"").replace("mini-interface","")+" mini-interface":document.body.className=(document.body.className||"").replace("mini-interface","")},setPageTypeClass:function(){this.$store.getters.isKindlePage?document.body.className=(document.body.className||"").replace("kindle-page","")+" kindle-page":document.body.className=(document.body.className||"").replace("kindle-page","")},setDocumentProperty:function(){if(document.documentElement.style.setProperty("--horizontal-padding","".concat(0|this.$store.state.config.horizontalPadding,"px")),document.documentElement.style.setProperty("--top-padding","".concat(0|this.$store.state.config.topPadding,"px")),document.documentElement.style.setProperty("--bottom-padding","".concat(0|this.$store.state.config.bottomPadding,"px")),window.contentCom)try{window.contentCom.syncCSSProperty()}catch(e){}},cancel:function(){this.showLogin=!1,this.loginForm={username:"",password:"",code:""}},login:function(){var e=this;return Object(c["a"])(Object(s["a"])().mark((function t(){var o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isLogining){t.next=2;break}return t.abrupt("return");case 2:return e.isLogining=!0,t.next=5,l["a"].post("/login",Object(i["a"])(Object(i["a"])({},e.loginForm),{},{isLogin:e.isLogin}));case 5:o=t.sent,o.data.isSuccess&&(e.$store.commit("setShowLogin",!1),e.$nextTick((function(){e.$store.commit("setLoginAuth",!0)})),e.remember&&o.data.data&&o.data.data.accessToken&&e.$store.commit("setToken",o.data.data.accessToken),e.getUserInfo().then((function(){e.$store.dispatch("syncFromLocalStorage"),e.init(!0)}))),e.isLogining=!1;case 8:case"end":return t.stop()}}),t)})))()},init:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t.initing){o.next=3;break}return e&&setTimeout((function(){t.init(e)}),100),o.abrupt("return");case 3:if(t.initing=!0,!e&&t.$store.state.shelfBooks.length){o.next=7;break}return o.next=7,t.loadBookShelf()["catch"]((function(){t.initing=!1}));case 7:return o.next=9,Promise.all([t.loadBookSource(e),t.loadBookGroup(e),t.loadRssSources(e),t.loadReplaceRules(e),t.loadBookmarks(e),t.loadHttpTTS(e)]);case 9:t.initing=!1;case 10:case"end":return o.stop()}}),o)})))()},getUserInfo:function(){var e=this;return Object(U["g"])((function(){return l["a"].get(e.api+"/getUserInfo")}),"userInfo").then((function(t){t.data.isCache?e.$store.commit("setConnected",!1):e.$store.commit("setConnected",!0),t.data.isSuccess&&(e.$store.commit("setIsSecureMode",t.data.data.secure),t.data.data.secure&&t.data.data.secureKey&&e.$store.commit("setShowManagerMode",!0),t.data.data.userInfo&&e.$store.commit("setUserInfo",t.data.data.userInfo))}),(function(t){e.$message.error("加载用户信息失败 "+(t&&t.toString()))}))},loadTxtTocRules:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setTxtTocRules",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get("/getTxtTocRules")}),"txtTocRules",e,o).then(o,(function(e){t.$message.error("加载txt章节规则失败 "+(e&&e.toString()))}))},loadHttpTTS:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setHttpTTS",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get("/httpTTS/list")}),"httpTTS",e,o).then(o,(function(e){t.$message.error("加载httpTTS失败 "+(e&&e.toString()))}))},showEditorListener:function(e,t,o){var n=this;this.editorTitle=e,this.editorContent=t,this.showEditor=!0,this.callback=o,this.$nextTick((function(){n.initEditor()}))},showReplaceRuleFormListener:function(e,t,o){this.replaceRule=e,this.isAddReplaceRule=t,this.replaceRuleCallback=o,this.showReplaceRuleForm=!0},loadBookShelf:function(e,t){var o=this;return t=t||this.api,Object(U["g"])((function(){return l["a"].get(t+"/getBookshelf?refresh="+(e?1:0),{timeout:3e5})}),"getBookshelf@"+this.currentUserName).then((function(e){e.data.isCache?o.$store.commit("setConnected",!1):o.$store.commit("setConnected",!0),e.data.isSuccess&&(o.$store.commit("setShelfBooks",e.data.data),u["a"].$emit("shelfBooksLoaded",e.data.data))}))["catch"]((function(e){throw o.$store.commit("setConnected",!1),o.$message.error("后端连接失败 "+(e&&e.toString())),e}))},loadBookGroup:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setBookGroupList",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get(t.api+"/getBookGroups")}),"bookGroup@"+this.currentUserName,e,o).then(o,(function(e){t.$message.error("加载分组列表失败 "+(e&&e.toString()))}))},loadRssSources:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setRssSourceList",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get(t.api+"/getRssSources",{params:{simple:1}})}),"rssSources@"+this.currentUserName,e).then(o,(function(e){t.$message.error("加载RSS订阅列表失败 "+(e&&e.toString()))}))},loadBookSource:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setBookSourceList",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get(t.api+"/getBookSources",{params:{simple:1}})}),"bookSourceList@"+this.currentUserName,e,o).then(o,(function(e){t.$message.error("加载书源列表失败 "+(e&&e.toString()))}))},loadReplaceRules:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setFilterRules",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get(t.api+"/getReplaceRules")}),"replaceRule@"+this.currentUserName,e,o).then(o,(function(e){t.$message.error("加载替换规则失败 "+(e&&e.toString()))}))},loadBookmarks:function(e){var t=this,o=function(e){e.data.isSuccess&&t.$store.commit("setBookmarks",e.data.data||[])};return Object(U["i"])((function(){return l["a"].get(t.api+"/getBookmarks")}),"bookmark@"+this.currentUserName,e,o).then(o,(function(e){t.$message.error("加载书签失败 "+(e&&e.toString()))}))},isInShelf:function(e,t){var o=this;return Object(c["a"])(Object(s["a"])().mark((function n(){var r,a;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&e.bookUrl&&e.origin){n.next=3;break}return o.$message.error("书籍信息错误"),n.abrupt("return",!1);case 3:if(r=o.$store.getters.shelfBooks.find((function(t){return t.bookUrl===e.bookUrl})),r){n.next=12;break}if(!t){n.next=12;break}return n.next=8,o.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 8:if(a=n.sent,a){n.next=11;break}return n.abrupt("return",!1);case 11:return n.abrupt("return",l["a"].post(o.api+"/saveBook",e).then((function(e){if(e.data.isSuccess)return!0}),(function(){return o.$message.error("导入书籍失败"),!1})));case 12:return n.abrupt("return",!!r);case 13:case"end":return n.stop()}}),n)})))()},getBookContent:function(e,t,o,n,r){var a=this;r=r||{name:this.$store.getters.readingBook.name,author:this.$store.getters.readingBook.author,bookUrl:this.$store.getters.readingBook.bookUrl};var s={url:r.bookUrl,index:e};return o&&(s.refresh=1),n&&(s.cache=1),Object(U["b"])((function(){return l["a"].post(a.api+"/getBookContent",s,Object(i["a"])({timeout:1e3*a.$store.getters.config.chapterRequestTimeout},t))}),r.name+"_"+r.author+"@"+r.bookUrl+"@chapterContent-"+e,o)},initEditor:function(){var e=this,t=this.$refs.editorRef;t||setTimeout((function(){e.initEditor()}),10);try{this.jar=Object(Jt["a"])(t,Yt.a.highlightElement,{tab:"\t"}),this.jar.updateCode(this.editorContent),this.jar.onUpdate((function(t){e.editorContent=t}))}catch(o){}},closeEditor:function(){this.jar&&this.jar.destroy&&this.jar.destroy(),this.showEditor=!1,this.editorTitle="",this.editorContent="",this.callback=null},saveEditor:function(){var e=this;this.callback&&this.callback(this.editorContent,(function(){e.closeEditor()}))},closeViewer:function(){this.$store.commit("setPreviewImgList",!1)},saveUserConfig:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n,r;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(window.localStorage){o.next=3;break}return t.$message.error("当前终端不支持localStorage"),o.abrupt("return");case 3:if(e){o.next=9;break}return o.next=6,t.$confirm("确认要备份当前终端的阅读配置、书架设置、搜索设置、自定义配置方案、朗读配置吗?","提示")["catch"]((function(){return!1}));case 6:if(n=o.sent,n){o.next=9;break}return o.abrupt("return");case 9:r={},["config","shelfConfig","searchConfig","customConfigList","speechVoiceConfig"].forEach((function(e){var t=Object(Mt["b"])(e);t&&(r[e]=t)})),l["a"].post(t.api+"/saveUserConfig",r).then((function(e){e.data.isSuccess&&t.$message.success("备份配置成功")}),(function(e){t.$message.error("备份配置失败 "+(e&&e.toString()))}));case 12:case"end":return o.stop()}}),o)})))()},restoreUserConfig:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(window.localStorage){o.next=3;break}return t.$message.error("当前终端不支持localStorage"),o.abrupt("return");case 3:if(e){o.next=9;break}return o.next=6,t.$confirm("确认要从备份文件中恢复当前终端的阅读配置、书架设置、搜索设置、自定义配置方案、朗读方案吗?","提示")["catch"]((function(){return!1}));case 6:if(n=o.sent,n){o.next=9;break}return o.abrupt("return");case 9:l["a"].get(t.api+"/getUserConfig").then((function(e){if(e.data.isSuccess){for(var o in e.data.data)Object.hasOwnProperty.call(e.data.data,o)&&Object(Mt["c"])(o,e.data.data[o]);t.$store.dispatch("syncFromLocalStorage"),t.$message.success("同步配置成功")}}),(function(e){t.$message.error("同步配置失败 "+(e&&e.toString()))}));case 10:case"end":return o.stop()}}),o)})))()},deleteBook:function(e){var t=this;return Object(c["a"])(Object(s["a"])().mark((function o(){var n;return Object(s["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e&&(e.name||e.bookUrl)){o.next=3;break}return t.$message.error("书籍信息错误"),o.abrupt("return");case 3:return o.next=5,t.$confirm("此操作将删除书籍信息以及阅读进度, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(n=o.sent,n){o.next=8;break}return o.abrupt("return");case 8:l["a"].post(t.api+"/deleteBook",e).then((function(e){e.data.isSuccess&&(t.$message.success("删除成功"),t.loadBookShelf())}),(function(e){t.$message.error("删除失败 "+(e&&e.toString()))}));case 9:case"end":return o.stop()}}),o)})))()}}},Xt=Zt,eo=(o("6b7cd"),o("fb25"),Object(b["a"])(Xt,r,a,!1,null,null,null)),to=eo.exports,oo=o("8c4f");n["default"].use(oo["a"]);var no=oo["a"].prototype.push;oo["a"].prototype.push=function(e){return no.call(this,e)["catch"]((function(e){return e}))};var ro=[{path:"/",name:"index",component:function(){return Promise.all([o.e("index~reader"),o.e("index")]).then(o.bind(null,"d504"))}},{path:"/setting",name:"Setting",component:function(){return o.e("setting").then(o.bind(null,"4ef5"))}},{path:"/reader",name:"Reader",component:function(){return Promise.all([o.e("index~reader"),o.e("reader")]).then(o.bind(null,"968f"))}}],ao=new oo["a"]({base:"",routes:ro}),io=ao,so=(o("0fb7"),o("450d"),o("f529")),co=o.n(so),lo=(o("9e1f"),o("6ed5")),uo=o.n(lo),fo=(o("960d"),o("defb")),po=o.n(fo),ho=(o("bd49"),o("18ff")),mo=o.n(ho),go=(o("cb70"),o("b370")),bo=o.n(go),ko=(o("e612"),o("dd87")),wo=o.n(ko),vo=(o("075a"),o("72aa")),So=o.n(vo),Ao=(o("e2f3"),o("06f9")),xo=o.n(Ao),Bo=(o("acb6"),o("c673")),Co=o.n(Bo),yo=(o("9d4c"),o("e450")),Oo=o.n(yo),Io=(o("672e"),o("101e")),To=o.n(Io),jo=(o("3c52"),o("0d7b")),Lo=o.n(jo),$o=(o("fe07"),o("6ac5")),Ro=o.n($o),Fo=(o("fd71"),o("a447")),Uo=o.n(Fo),Do=(o("e960"),o("b35b")),Eo=o.n(Do),Mo=(o("eca7"),o("3787")),No=o.n(Mo),_o=(o("425f"),o("4105")),Po=o.n(_o),Go=(o("b5c2"),o("20cf")),Wo=o.n(Go),zo=(o("a586"),o("7464")),Ho=o.n(zo),Vo=(o("d4df"),o("7fc1")),Qo=o.n(Vo),Ko=(o("560b"),o("dcdc")),Jo=o.n(Ko),qo=(o("a7cc"),o("df33")),Yo=o.n(qo),Zo=(o("b0ee"),o("d180")),Xo=o.n(Zo),en=(o("a335"),o("c0bb")),tn=o.n(en),on=(o("be4f"),o("896a")),nn=o.n(on),rn=(o("cbb5"),o("8bbc")),an=o.n(rn),sn=(o("6611"),o("e772")),cn=o.n(sn),ln=(o("1f1a"),o("4e4b")),un=o.n(ln),fn=(o("10cb"),o("f3ad")),dn=o.n(fn),pn=(o("06f1"),o("6ac9")),hn=o.n(pn),mn=(o("5466"),o("ecdf")),gn=o.n(mn),bn=(o("38a0"),o("ad41")),kn=o.n(bn),wn=(o("b84d"),o("c216")),vn=o.n(wn),Sn=(o("8f24"),o("76b9")),An=o.n(Sn),xn=(o("e3ea"),o("7bc3")),Bn=o.n(xn),Cn=(o("1951"),o("eedf")),yn=o.n(Cn);o("cca6");n["default"].use(yn.a),n["default"].use(Bn.a),n["default"].use(An.a),n["default"].use(vn.a),n["default"].use(kn.a),n["default"].use(gn.a),n["default"].use(hn.a),n["default"].use(dn.a),n["default"].use(un.a),n["default"].use(cn.a),n["default"].use(an.a),n["default"].use(nn.a.directive),n["default"].use(tn.a),n["default"].use(Xo.a),n["default"].use(Yo.a),n["default"].use(Jo.a),n["default"].use(Qo.a),n["default"].use(Ho.a),n["default"].use(Wo.a),n["default"].use(Po.a),n["default"].use(No.a),n["default"].use(Eo.a),n["default"].use(Uo.a),n["default"].use(Ro.a),n["default"].use(Lo.a),n["default"].use(To.a),n["default"].use(Oo.a),n["default"].use(Co.a),n["default"].use(xo.a),n["default"].use(So.a),n["default"].use(wo.a),n["default"].use(bo.a),n["default"].use(mo.a),n["default"].use(po.a),n["default"].prototype.$msgbox=uo.a,n["default"].prototype.$message=Object.assign({},co.a,{info:function(e,t){var o="string"===typeof e?{message:e}:e;o.duration=t||1e3,co.a.info(o)},error:function(e,t){var o="string"===typeof e?{message:e}:e;o.duration=t||2e3,co.a.error(o)},success:function(e,t){var o="string"===typeof e?{message:e}:e;o.duration=t||1e3,co.a.success(o)}}),n["default"].prototype.$ELEMENT={zIndex:2100},n["default"].prototype.$alert=uo.a.alert,n["default"].prototype.$confirm=uo.a.confirm,n["default"].prototype.$prompt=uo.a.prompt,n["default"].prototype.$loading=nn.a.service;var On=o("1a58"),In=(o("be72"),o("9483"));function Tn(){try{window.getQueryString("nopwa")||Object(In["a"])("".concat("","service-worker.js"),{ready:function(){window.serviceWorkerReady=!0},registered:function(e){if(window.localStorage){var t=window.localStorage.getItem("READER_APP_BUILD_VERSION"),o="v3.2.14-05250935";t!==o&&(e.active.postMessage({type:"SKIP_WAITING"}),window.localStorage.setItem("READER_APP_BUILD_VERSION",o))}}})}catch(e){}}var jn=o("3e1c"),Ln=o.n(jn),$n=o("caf9"),Rn=o("53ca"),Fn=Object.prototype.hasOwnProperty;function Un(e){return"[Throws: "+(e?e.message:"?")+"]"}function Dn(e,t){if(Fn.call(e,t))try{return e[t]}catch(o){return Un(o)}return e[t]}function En(e){var t=[];function o(e){if(null===e||"object"!==Object(Rn["a"])(e))return e;if(-1!==t.indexOf(e))return"[Circular]";if(t.push(e),"function"===typeof e.toJSON)try{var n=o(e.toJSON());return t.pop(),n}catch(i){return Un(i)}if(Array.isArray(e)){var r=e.map(o);return t.pop(),r}var a=Object.keys(e).reduce((function(t,n){return t[n]=o(Dn(e,n)),t}),{});return t.pop(),a}return o(e)}var Mn=function(e,t,o){return JSON.stringify(En(e),t,o)},Nn=o("a002"),_n=o.n(Nn);try{o("eb2f")}catch(Pn){console.error(Pn)}try{window.location.href.indexOf("errorAlert")>0&&(window.errorAlert=!0),window.onerror=function(e,t,o,n,r){window.errorAlert&&window.alert(Mn({event:e,source:t,lineno:o,colno:n,error:r}))},window.addEventListener("unhandledrejection",(function(e){window.errorAlert&&window.alert(Mn(e))})),n["default"].config.errorHandler=function(e){window.errorAlert&&window.alert(Mn(e)),console.error(e)},window.$cacheStorage=_n.a.createInstance({name:"cacheStorage"}),Tn(),n["default"].config.productionTip=!1,n["default"].use($n["a"],{observer:!0,preLoad:1.8}),n["default"].mixin({computed:{api:function(){return this.$store.getters.api},isWebApp:function(){return window.navigator.standalone},isPWA:function(){return["fullscreen","standalone","minimal-ui"].some((function(e){return window.matchMedia("(display-mode: "+e+")").matches}))},isNightTheme:function(){return this.$store.getters.isNight},currentUserName:function(){return this.$store.getters.currentUserName}},methods:{getImagePath:function(e,t){return e&&(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//"))?t&&window.serviceWorkerReady||"noProxy"===this.$store.state.shelfConfig.imageProxy?e:this.api+"/cover?path="+e:!!e&&this.$store.getters.apiRoot+e},getCover:function(e,t,o){return e=this.getImagePath(e,o),e?t?e:{src:e,error:lt.a}:lt.a},getImage:function(e,t,o){return e=this.getImagePath(e,o),e?t?e:{src:e,error:lt.a}:Ln.a},currentDateTime:function(){var e=new Date,t=function(e){return e<10?"0"+e:e};return e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+"_"+t(e.getHours())+t(e.getMinutes())+t(e.getSeconds())},dateFormat:function(e){var t=(new Date).getTime(),o=parseInt((t-e)/1e3),n="";return n=o<=30?"刚刚":o<60?o+"秒前":o<3600?parseInt(o/60)+"分钟前":o<86400?parseInt(o/3600)+"小时前":o<2592e3?parseInt(o/86400)+"天前":o<31536e3?parseInt(o/2592e3)+"月前":parseInt(o/31536e3)+"年前",n},renderForm:function(e,t,o,r){this.$createElement;n["default"].component(e,{render:function(){var e=this,t=arguments[0];return t("div",{style:{textAlign:"center"}},[o.map((function(o){switch(o.type){case"input":return t("div",{class:"form-item"},[t("span",{style:{display:"inline-block",width:"85px"}},[o.label,"："]),t("el-input",{attrs:{size:"mini"},style:{width:"172px"},model:{value:e.info[o.name],callback:function(t){e.$set(e.info,o.name,t)}}})]);case"select":return t("div",{class:"form-item"},[t("span",{style:{display:"inline-block",width:"85px"}},[o.label,"："]),t("el-select",{attrs:{size:"mini",filterable:!0,multiple:"undefined"===typeof o.multiple||o.multiple,placeholder:o.placeholder||""},model:{value:e.info[o.name],callback:function(t){e.$set(e.info,o.name,t)}}},[o.options.map((function(e,n){return t("el-option",{key:o.name+"-op-"+n,attrs:{label:e.label,value:e.value}})}))])]);default:return null}}))])},data:function(){return{info:t,items:o}},watch:{info:{handler:function(e){r(e)},deep:!0}}});var a=n["default"].component(e);return this.$createElement(a)},nearBottom:function(e){return document.documentElement.clientHeight+(document.documentElement.scrollTop||document.body.scrollTop)>=document.documentElement.scrollHeight-e}}}),new n["default"]({router:io,store:On["a"],render:function(e){return e(to)}}).$mount("#app")}catch(Pn){alert(Pn.stack)}},"5d98":function(e,t,o){},"60fa":function(e,t,o){"use strict";o("a6d1")},"62a7":function(e,t,o){"use strict";o("4d71")},"62b7":function(e,t,o){"use strict";o("5d98")},6398:function(e,t,o){},"63f0":function(e,t,o){"use strict";o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return a}));o("f4b3"),o("e9c4"),o("b64b");var n=function(e,t){t="string"===typeof t?t:JSON.stringify(t),window.localStorage&&window.localStorage.setItem(e,t)},r=function(e){window.localStorage&&window.localStorage.removeItem(e)},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t;try{if(o=window.localStorage&&window.localStorage.getItem(e),null===o)return t;if(o){var n=JSON.parse(o);if(null!==n)return n}return o}catch(r){return o}}},6867:function(e,t,o){"use strict";o("b464")},"68bb":function(e,t,o){},"6a04":function(e,t,o){"use strict";o("7543")},"6a60":function(e,t,o){},"6b7cd":function(e,t,o){"use strict";o("0571")},"6fec":function(e,t,o){"use strict";o("ad55")},7286:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXr5djn4dTp49bt59rT6LKxAAACnElEQVQozw3NUUwScRzA8d8R6MF8YMIx8uk47hDSJbj14IPzOGc7jPLvwTGg5uAYDbe2tt56cLtznvEnS6yDqCcEaWi91DvrbLJZz7b1aFtz1aO+2OZWvn+/+4CHeB6BMYaqBLfjPNRY6RFT2JJYby+uAk4WUTrtlmJ4hgPYb2q1XGDQjaK8pgJHvqNaAX+KyuIkDXpgQinb46nOulnn4b5laUHTxLfseeArAoNOeJlOIjdoal0n1FA7tKFv5roK+YaHOqP3P0XyKHPHY+MhTRe5uCZnKhtJKw2eSrSoBDPLtpZuNcFNJcFyiCMxOaaHIfXz1e8HQbWLySrBQ4x0x1qlhnHlnz2HQEC6TNb0gTHXa7IKhcaHqkE015hk9whA0YeWiLIXf7Fa2CZo3DjqjB4tTuF8jIcbfcEx5z/w4sXpQhXW+ju0cqh7icTFmRMaG+v6CIvTjcSpHcH8JEsF3EPh3fRthYdVLLgI2fWXm85/pGFE4l046s70L+yKCcirGFR+jbpy3kMmiCGHrSezVONsn1RBixncyk2PcVWk7DlgxHo8iZwDyq5uAUD854dZhdIFYzKoQig2haUKi1lVufz2RZUZPZ41n/hrOQB6h0Hhg8I367FNoEHgeM/KY7szSeQwD8q2WE3HM35ZLl0K1MJiOtHIkBclRQUwZnyOWcNsRQQgVLj1PSqkjF9DsoOSaSg3iinKzvfmgsNFFfpP/2T3GLGvL4fHEfwIX1sVvXcPqLztehWGcfn9nI2U9nTfCgJPe/jFPLZwgVEzimBgAm0VIyK2tt1cE/AzQdLK+SxLSQ4aDCZnnId94OG2S1XwvnTbNk/ZnhyRCQT+sZM6z9g6LXL1BOBe+zJySiFkHAINCtnQokbCJ/apCv0foqPiZVfhpywAAAAASUVORK5CYII="},7456:function(e,t,o){},7513:function(e,t,o){"use strict";o.d(t,"d",(function(){return s})),o.d(t,"a",(function(){return c})),o.d(t,"g",(function(){return l})),o.d(t,"b",(function(){return u})),o.d(t,"i",(function(){return f})),o.d(t,"e",(function(){return d})),o.d(t,"c",(function(){return p})),o.d(t,"f",(function(){return h})),o.d(t,"h",(function(){return m}));var n=o("53ca"),r=o("c7eb"),a=o("1da1"),i=(o("d9e2"),o("d401"),o("99af"),o("14d9"),o("b680"),o("63f0")),s=function(e,t){if(null==e||""==e)return"0 Bytes";var o=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),n=0;n=Math.floor(Math.log(e)/Math.log(1024));var r=e/Math.pow(1024,n);return r=r.toFixed(t||2),r+" "+o[n]},c=function(e,t){var o=0,n=[];function i(){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(Object(r["a"])().mark((function e(){var a,s,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,++o,c.leftCount=n.length,l=n.shift(),e.next=6,l();case 6:s=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),a=e.t0,c.errorCount++;case 13:return e.prev=13,--o,c.requestCount++,c.leftCount=n.length,t&&t(c,s,a),n.length>0&&i(),e.finish(13);case 20:case"end":return e.stop()}}),e,null,[[0,9,13,20]])}))),s.apply(this,arguments)}var c=function(t){t&&t instanceof Function&&(n.push(t),c.leftCount=n.length,o<e&&i())};return c.requestCount=0,c.leftCount=0,c.errorCount=0,c.cancel=function(){n=[],c.leftCount=0},c.isEnd=function(){return!c.leftCount&&!o},c},l=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t,o){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o="localCache@"+o,e.next=3,t()["catch"]((function(){return window.$cacheStorage.getItem(o).then((function(e){if(e)return"object"===Object(n["a"])(e)&&(e.isCache=!0),{data:e}}))["catch"]((function(e){var t=Object(i["b"])(o);if(t)return{data:t};throw e}))}));case 3:return a=e.sent,a.data&&a.data.isSuccess&&window.$cacheStorage.setItem(o,a.data)["catch"]((function(){})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),u=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t,o,a){var s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o="localCache@"+o,!0===a){e.next=8;break}return e.next=4,window.$cacheStorage.getItem(o).then((function(e){if(e)return"object"===Object(n["a"])(e)&&(e.isCache=!0),e;throw new Error("Cache not found")}))["catch"]((function(){var e=Object(i["b"])(o);return e}));case 4:if(s=e.sent,!s){e.next=8;break}if(!(!a||a&&a(s))){e.next=8;break}return e.abrupt("return",{data:s});case 8:return e.next=10,t();case 10:return c=e.sent,c.data&&c.data.isSuccess&&window.$cacheStorage.setItem(o,c.data)["catch"]((function(){})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,o,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(t,o,s,c){var l,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o="localCache@"+o,l=function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,n.data&&n.data.isSuccess&&window.$cacheStorage.setItem(o,n.data)["catch"]((function(){})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!0===s){e.next=10;break}return e.next=5,window.$cacheStorage.getItem(o).then((function(e){if(e)return"object"===Object(n["a"])(e)&&(e.isCache=!0),e;throw new Error("Cache not found")}))["catch"]((function(){var e=Object(i["b"])(o);return e}));case 5:if(u=e.sent,!u){e.next=10;break}if(!(!s||s&&s(u))){e.next=10;break}return l().then(c||function(){}),e.abrupt("return",{data:u});case 10:return e.next=12,l();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,o,n,r){return e.apply(this,arguments)}}(),d=function(){return window.innerWidth<=750},p=function(e,t){if(e===t)return 1;if(!e||!t)return 0;for(var o=new Array(e.length+1),n=0;n<=e.length;n++)o[n]=new Array(t.length+1);for(var r=0;r<=e.length;r++)for(var a=0;a<=t.length;a++)0===r?o[0][a]=a:0===a?o[r][0]=r:e.charAt(r-1)===t.charAt(a-1)?o[r][a]=o[r-1][a-1]:o[r][a]=1+Math.min(o[r-1][a-1],Math.min(o[r][a-1],o[r-1][a]));return 1-o[e.length][t.length]/Math.max(e.length,t.length)},h=function(e,t){if(window.customFonts=window.customFonts||{},!window.customFonts[e]||window.customFonts[e]!==t){var o=document.createElement("style");o.textContent='\n    @font-face {\n      font-family: "'.concat(e,'";\n      src: url("').concat(t,'");\n    }'),o.id="custom-font-"+e,document.head.appendChild(o),window.customFonts[e]=t}},m=function(e){window.customFonts=window.customFonts||{},delete window.customFonts[e];for(var t=document.querySelectorAll("#custom-font-"+e),o=0;o<t.length;o++){var n=t[o];n.remove()}}},7543:function(e,t,o){},"79a1":function(e,t,o){"use strict";o("7456")},"7abd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXm9PXq+Pno9vfs+vttWKBGAAACPElEQVQozw3RQWrbQACF4TfCMjPqZgIj4RRaxsZKE0PuMBZ2cLKaCI9RDAXFmJJknUWWI1O1UlamOMHJSjGkuFn3AD2Cr9CepDrAg+/xIxK4QwIqHHQkUhQ/WuphInVIFBojl8QXc012Tgq4RTtVHWVLZVFh1tEoI91uiN4joCqde8Ukn/zGM1B2W4ari2PtTwyw55Ld+Wways54qhGPyS6FzbIT3lIY8WwWdCq56Yolx6KmSKzoqrsCB5heAp4TGNQWJ1Pc6XlE5jQD5OlIX9I47A9uiUQcPQxcury/ToyxWJG/za6ki88crxKPocKS59Sl3EtBG7C89fCGflpfqoSzCeC4crioJA7F0V5+8MaSIk4qSCdwzpogmbqzEirVpGiS2dOVJvUuuqFEmhHao06KEpq+8lvHI14NJk3Qrmi9vBuRLwAz0qZB4hsDXQFXgtnlpDX3C6ug9BquSw/CYtwAzuTz5vuQNdr/YibhR68378ehZH30FSpjh71LpQkrsj+Q062h5WwZ5wlRoD6uQJy1DqvSYuCUapMBqT5YA4ZFw4KlWapxoUGlKWrx0eDQvmigu4WMYt97ruru98fYL8/0lG6CTOFcFWBhFK5gKw19h2JN808nh7xhkU6sWKLXdtkqBL6h+lULK5k19wFB/FldnGYf3LDeuf6IC2/MzJOSOP0qPxLqzaGIqtBcFIItrstkazONOkrc1D1czjuwEGESB4JJnjgSMN7PXAu7fZQpl1C236C+9mM4Af8P98Ch4R2TRl8AAAAASUVORK5CYII="},"7e43":function(e,t,o){e.exports=o.p+"img/noCover.b5c48bc1.jpeg"},"802e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEUWGBkYGhsdHyAfISI1t/v6AAAB5ElEQVQozxXQsYoTURSA4f/EeycZsDgDdySDjihk38Hy3GWi2J2BCaziQhaiaB+tt9AFu1kwvYUPsIXNPoB9BAUfwAfwEUzKv/v4odGrroyp9/rUaC6rZ5skv5F8qPsfYYP+yKUMymmAEEeW55oUR4o8jr05KNzJ07yvB7w0KKfLwcQUSjfmMU0PJfPHFoEVU+ohNrcKMEzMQ23FDnVSI2dqtYWI7KlLu6vE4UnyvKc3SJuL7lBbeEEl42ItpGLjzIT8PRJCmkRjVpVpsbJFVN0687okJNZiHAr5Z7MV0BnGIDc+THM1zlbieBc1Fq+tH5BH+OpnbWkj40hSqC8Lw2TvFuF0SUFJCk2IytXbjeqcRAt6NHpnrUkUU4KRzZs8RCK8N/Akn2W04LwxMU/V7XK0bDyN2RxfDyx7I4h5vjZby72V8UnOWumZL3qtYc+8DTE0siSBMXGhywx2dMYPnQHbxdFZ7deiNGxCCtD/QWnbwDoGhRYPDzUdUA3krjpnkvdAgDN4ddLkEQSov9qjd42HaDjI34gEqS9TUueAk+sc4qg5ws407KQYKs8G1jv4xBlqBVk6cb4dISZIwVi1Jzu4+HLk6lyfUxkXvwy+1Q+4WVdHIhwfybZ6CWVhxMEhShOgsP/HOW0MvZJeFwAAAABJRU5ErkJggg=="},"82da":function(e,t,o){},8552:function(e,t,o){"use strict";var n=o("2b0e");t["a"]=new n["default"]},"922e":function(e,t,o){},9308:function(e,t,o){"use strict";o("d194")},"96b6":function(e,t,o){"use strict";o("edfd")},"974b":function(e,t,o){},"9be0":function(e,t,o){"use strict";o("360d")},a428:function(e,t,o){"use strict";o("a461")},a461:function(e,t,o){},a6b1:function(e,t,o){},a6d1:function(e,t,o){},a7a7:function(e,t,o){"use strict";o("bdc0")},ad55:function(e,t,o){},b165:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXe3t7a2trc3Nzg4OCXP9lCAAACoklEQVQozwXBzU/TYBwA4N+QEr4CNbSFwcFuowSqMRvEAwShHWAYNsu7dS0dLnGUSWT4kZB4lGzE4VtcwgIDJqcOWLJxcv4BOoQZuCPxSNSD4WSWLJGL8XmAIiyo2RgJ4A1pxQQlOxRAszLTdnPu2oQGb05RC5slJld7ZAIfo4O44Bn1ud59F0BcjnYOa17Jhwc6EdiKettncsXjT1f8KUBZUW41pK0Jc1Az4dEV3rkkPBtDSZ83Blyt0kSf2PRjzIykoBwINisPbPPtljdVE9iAXRfUPkXLVIgYrCccp5g687NdZbcJ+xa5VE/HhTtT23IKsN5jj/pcUd0dTZNAqCVw72n4gOwnTOC0vvHfaauT8d9zAoRRfPpISZRVyUiw8ELzOG1b2DZpFzkSrHLhq52twDEdyZHwvp2j4uv/bjvOf23/AcEtTuJbY5Cp4YcAer1IGkUzOo2rn8LQOKjFJw3NTw24nprQXY5aF4wxcqcSdbFQ00H4xFl8Drx4X4CikvAM1tuR8bKIBCBoLnKN10KJG4zKAsc7c9WEB9gnCi6BhVjqoco6t20ILAJuVctvaEZK732cRHDRmGfuihOam0o2CHByUZ/epCcVlRs2wmCnMqsd6aSim3ibBJtm1LGyXW3Bb7tJCPlFtUG+SvPdeEUAB60lNdo+VQbLcwRNVtT68FsLcr1+NotgNihlpExS1V2SFgNbeC8bEhgm8sM17wSi6Us2gxVWJU/5GKBpandvfyYbU1yHCLpCgWGbbPXn40rehEsUXKIJr9DMKgICfjc4bl1YfvUhE/YIECGRqjCxSM9hrybAIkND5OeWfFZsXkxB+qDzb7pUQ3EfQ3Ml6EChEt3D+iS01VqC7EQ/Z/DuPQcz4yChoFQJce2Qr+NNAv0HxofmpXGqgHkAAAAASUVORK5CYII="},b464:function(e,t,o){},b525:function(e,t,o){},b671:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEX48dr48Nf58tv379X17NJtIBxUAAACFUlEQVQ4y1XRUZakMAgF0Af2AiDWApDZgHZqAV1nZv9rGh7Rj7Y8McUFEg1wvcMESMNVD/neU8Xcaz7nYYkYlYO6Ti82PBI4BvIEg1aj3wKwRvIMgZsUy5LdhCawPFh1sZs4SrlyN9fQKpv8s5dgZ2eLyqqJiu+WkCmUEybXkm3INS01WAiv0PapJ0CZc0SJQUzcWnZYbOOY20iFD8Bk+/j2A3wNxH7GdShFYS5ff237kXh9I9zSkQmIAhOsOSVfJ6DIXTMDaPnzkRJ92S1BQQmXl5LdirgRLLDdcYqcGPwe3QN4xCBiGNbrqq9wpW1XCecChwaQdVOsRDpPCpeoolPdxeXp3WNB9PHVzWBHlygy4NJCCrFHREv6bDt0VGwJZASkpONmm1UseGeFKAQexgaAkrfYWl3AGxWOLL2AIMBNbCXpktmS3k3vHeYjGCPBa43wJTurO3ZFVpQSJdAZGLoHTyk1upkjxMEaIxum3iIARcCa5kSkFAW5fi1mUlL9eyOsaanFmOMruwvEdE3ZYzsRSzo5ewRLXyVPPEvknt8ij4DvCg2O7xOgBCUprEzV4z1WekSpUgI8DT2mrnSOXKRfQavwuKA1F+tFnMKdJSUpMA7wQAifWRkMgjUKKZE4lBl6MCM4B1pq1P4uIjDE6Pq6rL0FnW1nIFmta5vrSvq/Ch4tpqG/ZNyyWa5jZPktq81eYv8Bt5s4iFITOp4AAAAASUVORK5CYII="},b799:function(e,t,o){"use strict";o("1406")},bc99:function(e,t,o){},bdc0:function(e,t,o){},be3b:function(e,t,o){"use strict";var n=o("c7eb"),r=(o("9e1f"),o("450d"),o("6ed5")),a=o.n(r),i=(o("0fb7"),o("f529")),s=o.n(i),c=o("5530"),l=o("1da1"),u=(o("d401"),o("c975"),o("14d9"),o("0d03"),o("d3b7"),o("25f0"),o("4795"),o("bc3a")),f=o.n(u),d=o("bfff"),p=o("1a58"),h=f.a.create({baseURL:p["a"].getters.api,withCredentials:!0,timeout:6e4});p["a"].watch((function(e){return e.api}),(function(){h.defaults.baseURL=p["a"].getters.api})),h.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var m=!1,g=function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(t){var o,r,i,l,u,f,b,k,w,v,S,A,x,B,C,y,O,I,T;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.url,r=t.method,i=void 0===r?"get":r,l=t.params,u=void 0===l?{}:l,f=t.data,b=void 0===f?{}:f,k=t.headers,w=void 0===k?{}:k,v=t.options,S=void 0===v?{}:v,A=t.alert,void 0===A&&(A="post"===i),p["a"].state.token&&(u.accessToken=p["a"].state.token),p["a"].state.isManagerMode&&p["a"].state.secureKey&&(u.secureKey=p["a"].state.secureKey,u.userNS=p["a"].state.userNS),u.v=(new Date).getTime(),x=Object(c["a"])({url:o,method:i,headers:w,params:u,data:b},S),e.next=8,h(x)["catch"]((function(e){if(b&&b.bookSourceUrl&&p["a"].state.failureIncludeTimeout){var t=e.toString();window.errorMsgList=window.errorMsgList||[],window.errorMsgList.push(t),t.indexOf("timeout")>=0&&p["a"].commit("addFailureBookSource",{bookSourceUrl:b.bookSourceUrl,errorMsg:t})}throw e}));case 8:if(B=e.sent,B){e.next=11;break}return e.abrupt("return");case 11:if(C=B.data,"string"!==typeof C){e.next=14;break}return e.abrupt("return",B);case 14:if(y=C.isSuccess,O=C.errorMsg,y){e.next=48;break}e.t0=C.data,e.next="NEED_LOGIN"===e.t0?19:"NEED_SECURE_KEY"===e.t0?22:32;break;case 19:return p["a"].commit("setShowLogin",!0),m||(m=!0,setTimeout((function(){O&&s.a.error({message:O,duration:2e3}),setTimeout((function(){m=!1}),2e3)}),200)),e.abrupt("break",46);case 22:return e.next=24,a.a.prompt("请输入管理密码后继续操作","操作确认");case 24:if(I=e.sent,!I||"confirm"!==I.action||!I.value){e.next=31;break}return u.secureKey=I.value,p["a"].commit("setSecureKey",I.value),e.next=30,g({url:o,method:i,params:u,data:b,headers:w,alert:A});case 30:return e.abrupt("return",e.sent);case 31:return e.abrupt("break",46);case 32:if(!b||!b.bookSourceUrl){e.next=44;break}if(!O){e.next=44;break}window.errorMsgList=window.errorMsgList||[],window.errorMsgList.push(O),T=0;case 37:if(!(T<d["e"].length)){e.next=44;break}if(!(O.indexOf(d["e"][T])>=0)){e.next=41;break}return p["a"].commit("addFailureBookSource",{bookSourceUrl:b.bookSourceUrl,errorMsg:O}),e.abrupt("break",44);case 41:T++,e.next=37;break;case 44:return S.silent||O&&s.a.error({message:O,duration:2e3}),e.abrupt("break",46);case 46:e.next=49;break;case 48:A&&O&&s.a.success({message:O,duration:1500});case 49:return e.abrupt("return",B);case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();g.get=function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(t,o){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=o||{},e.next=3,g({url:t,method:"get",params:o.params||{},options:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}(),g.post=function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(t,o,r){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g({url:t,data:o,method:"post",options:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,o,n){return e.apply(this,arguments)}}(),t["a"]=g},be72:function(e,t,o){o("d401"),o("0d03"),o("d3b7"),o("25f0"),o("e323"),String.prototype.MD5=function(e){var t=this;function o(e,t){return e<<t|e>>>32-t}function n(e,t){var o,n,r,a,i;return r=2147483648&e,a=2147483648&t,o=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),o&n?2147483648^i^r^a:o|n?1073741824&i?3221225472^i^r^a:1073741824^i^r^a:i^r^a}function r(e,t,o){return e&t|~e&o}function a(e,t,o){return e&o|t&~o}function i(e,t,o){return e^t^o}function s(e,t,o){return t^(e|~o)}function c(e,t,a,i,s,c,l){return e=n(e,n(n(r(t,a,i),s),l)),n(o(e,c),t)}function l(e,t,r,i,s,c,l){return e=n(e,n(n(a(t,r,i),s),l)),n(o(e,c),t)}function u(e,t,r,a,s,c,l){return e=n(e,n(n(i(t,r,a),s),l)),n(o(e,c),t)}function f(e,t,r,a,i,c,l){return e=n(e,n(n(s(t,r,a),i),l)),n(o(e,c),t)}function d(e){var t,o=e.length,n=o+8,r=(n-n%64)/64,a=16*(r+1),i=Array(a-1),s=0,c=0;while(c<o)t=(c-c%4)/4,s=c%4*8,i[t]=i[t]|e.charCodeAt(c)<<s,c++;return t=(c-c%4)/4,s=c%4*8,i[t]=i[t]|128<<s,i[a-2]=o<<3,i[a-1]=o>>>29,i}function p(e){var t,o,n="",r="";for(o=0;o<=3;o++)t=e>>>8*o&255,r="0"+t.toString(16),n+=r.substr(r.length-2,2);return n}var h,m,g,b,k,w,v,S,A,x=Array(),B=7,C=12,y=17,O=22,I=5,T=9,j=14,L=20,$=4,R=11,F=16,U=23,D=6,E=10,M=15,N=21;for(x=d(t),w=1732584193,v=4023233417,S=2562383102,A=271733878,h=0;h<x.length;h+=16)m=w,g=v,b=S,k=A,w=c(w,v,S,A,x[h+0],B,3614090360),A=c(A,w,v,S,x[h+1],C,3905402710),S=c(S,A,w,v,x[h+2],y,606105819),v=c(v,S,A,w,x[h+3],O,3250441966),w=c(w,v,S,A,x[h+4],B,4118548399),A=c(A,w,v,S,x[h+5],C,1200080426),S=c(S,A,w,v,x[h+6],y,2821735955),v=c(v,S,A,w,x[h+7],O,4249261313),w=c(w,v,S,A,x[h+8],B,1770035416),A=c(A,w,v,S,x[h+9],C,2336552879),S=c(S,A,w,v,x[h+10],y,4294925233),v=c(v,S,A,w,x[h+11],O,2304563134),w=c(w,v,S,A,x[h+12],B,1804603682),A=c(A,w,v,S,x[h+13],C,4254626195),S=c(S,A,w,v,x[h+14],y,2792965006),v=c(v,S,A,w,x[h+15],O,1236535329),w=l(w,v,S,A,x[h+1],I,4129170786),A=l(A,w,v,S,x[h+6],T,3225465664),S=l(S,A,w,v,x[h+11],j,643717713),v=l(v,S,A,w,x[h+0],L,3921069994),w=l(w,v,S,A,x[h+5],I,3593408605),A=l(A,w,v,S,x[h+10],T,38016083),S=l(S,A,w,v,x[h+15],j,3634488961),v=l(v,S,A,w,x[h+4],L,3889429448),w=l(w,v,S,A,x[h+9],I,568446438),A=l(A,w,v,S,x[h+14],T,3275163606),S=l(S,A,w,v,x[h+3],j,4107603335),v=l(v,S,A,w,x[h+8],L,1163531501),w=l(w,v,S,A,x[h+13],I,2850285829),A=l(A,w,v,S,x[h+2],T,4243563512),S=l(S,A,w,v,x[h+7],j,1735328473),v=l(v,S,A,w,x[h+12],L,2368359562),w=u(w,v,S,A,x[h+5],$,4294588738),A=u(A,w,v,S,x[h+8],R,2272392833),S=u(S,A,w,v,x[h+11],F,1839030562),v=u(v,S,A,w,x[h+14],U,4259657740),w=u(w,v,S,A,x[h+1],$,2763975236),A=u(A,w,v,S,x[h+4],R,1272893353),S=u(S,A,w,v,x[h+7],F,4139469664),v=u(v,S,A,w,x[h+10],U,3200236656),w=u(w,v,S,A,x[h+13],$,681279174),A=u(A,w,v,S,x[h+0],R,3936430074),S=u(S,A,w,v,x[h+3],F,3572445317),v=u(v,S,A,w,x[h+6],U,76029189),w=u(w,v,S,A,x[h+9],$,3654602809),A=u(A,w,v,S,x[h+12],R,3873151461),S=u(S,A,w,v,x[h+15],F,530742520),v=u(v,S,A,w,x[h+2],U,3299628645),w=f(w,v,S,A,x[h+0],D,4096336452),A=f(A,w,v,S,x[h+7],E,1126891415),S=f(S,A,w,v,x[h+14],M,2878612391),v=f(v,S,A,w,x[h+5],N,4237533241),w=f(w,v,S,A,x[h+12],D,1700485571),A=f(A,w,v,S,x[h+3],E,2399980690),S=f(S,A,w,v,x[h+10],M,4293915773),v=f(v,S,A,w,x[h+1],N,2240044497),w=f(w,v,S,A,x[h+8],D,1873313359),A=f(A,w,v,S,x[h+15],E,4264355552),S=f(S,A,w,v,x[h+6],M,2734768916),v=f(v,S,A,w,x[h+13],N,1309151649),w=f(w,v,S,A,x[h+4],D,4149444226),A=f(A,w,v,S,x[h+11],E,3174756917),S=f(S,A,w,v,x[h+2],M,718787259),v=f(v,S,A,w,x[h+9],N,3951481745),w=n(w,m),v=n(v,g),S=n(S,b),A=n(A,k);return 32==e?p(w)+p(v)+p(S)+p(A):p(v)+p(S)}},bfff:function(e,t,o){"use strict";o.d(t,"e",(function(){return P})),o.d(t,"d",(function(){return G})),o.d(t,"c",(function(){return W})),o.d(t,"f",(function(){return z})),o.d(t,"a",(function(){return H}));var n=o("5530"),r=(o("99af"),o("b64b"),o("7286")),a=o.n(r),i=o("477e"),s=o.n(i),c=o("e160"),l=o.n(c),u=o("df5e"),f=o.n(u),d=o("ec0f"),p=o.n(d),h=o("b671"),m=o.n(h),g=o("5629"),b=o.n(g),k=o("d0e3"),w=o.n(k),v=o("4039"),S=o.n(v),A=o("1e75"),x=o.n(A),B=o("1632"),C=o.n(B),y=o("7abd"),O=o.n(y),I=o("356c"),T=o.n(I),j=o("b165"),L=o.n(j),$=o("cf68"),R=o.n($),F=o("4400"),U=o.n(F),D=o("802e"),E=o.n(D),M={configDefaultType:"白天默认",name:"内置白天",theme:0,font:0,chineseFont:"简体",fontSize:18,fontWeight:400,fontColor:"#262626",bodyColor:"#eadfca",contentColor:"#fff",popupColor:"#ede7da",themeType:"day",readMethod:"上下滑动",clickMethod:"自动",animateMSTime:300,readWidth:800,lineHeight:1.8,paragraphSpace:.2,autoReadingMethod:"像素滚动",autoReadingPixel:1,autoReadingLineTime:1e3,pageMode:"自适应",selectionAction:"操作弹窗",topPadding:0,bottomPadding:0,horizontalPadding:0,epubMode:"iframe",chapterRequestTimeout:10,quickKeyMode:"默认",quickKey:{ArrowUp:"上一页",ArrowDown:"下一页",ArrowLeft:"上一章",ArrowRight:"下一章",Escape:"返回",Space:"下半页",PageUp:"下一页",PageDown:"上一页",Home:"首页",End:"尾页"}},N={configDefaultType:"黑夜默认",name:"内置黑夜",theme:6,font:0,chineseFont:"简体",fontSize:18,fontWeight:400,fontColor:"#666666",bodyColor:"#121212",contentColor:"#171717",popupColor:"#121212",themeType:"night",readMethod:"上下滑动",clickMethod:"自动",animateMSTime:300,readWidth:800,lineHeight:1.8,paragraphSpace:.2,autoReadingMethod:"像素滚动",autoReadingPixel:1,autoReadingLineTime:1e3,pageMode:"自适应",selectionAction:"操作弹窗",topPadding:0,bottomPadding:0,horizontalPadding:0,epubMode:"iframe",chapterRequestTimeout:10,quickKeyMode:"默认",quickKey:{ArrowUp:"上一页",ArrowDown:"下一页",ArrowLeft:"上一章",ArrowRight:"下一章",Escape:"返回",Space:"下半页",PageUp:"下一页",PageDown:"上一页",Home:"首页",End:"尾页"}},_={shelfConfig:{showBookGroup:-1,viewCate:"list",bookOrder:"durChapterTime",imageProxy:"noProxy",virtualOptimize:"yes"},searchConfig:{searchType:"multi",bookSourceGroup:"",bookSourceUrl:"",concurrentCount:4},customConfigList:[Object(n["a"])({},M),Object(n["a"])({},N)],config:Object(n["a"])(Object(n["a"])({},M),{},{customConfig:"内置白天",autoTheme:!0,pageType:"正常"}),speechVoiceConfig:{ttsType:"local",cacheTTSAudio:!1,voiceName:"",speechRate:1,speechPitch:1},defaultNightTheme:6,themes:[{body:"url("+a.a+") repeat",content:"url("+s.a+") repeat",popup:"url("+l.a+") repeat"},{body:"url("+f.a+") repeat",content:"url("+p.a+") repeat",popup:"url("+m.a+") repeat"},{body:"url("+b.a+") repeat",content:"url("+w.a+") repeat",popup:"url("+S.a+") repeat"},{body:"url("+x.a+") repeat",content:"url("+C.a+") repeat",popup:"url("+O.a+") repeat"},{body:"#ebcece repeat",content:"#f5e4e4 repeat",popup:"#faeceb repeat"},{body:"url("+T.a+") repeat",content:"url("+L.a+") repeat",popup:"url("+R.a+") repeat"},{body:"url("+U.a+") repeat",content:"url("+E.a+") repeat",popup:"#121212"},{body:"#f7f7f7 repeat",content:"#fff repeat",popup:"#f7f7f7 repeat"}],fonts:[{fontFamily:"custom-system"},{fontFamily:"custom-ht, reader-ht"},{fontFamily:"custom-kt, reader-kt"},{fontFamily:"custom-st, reader-st"},{fontFamily:"custom-fs, reader-fs"}]},P=["UnknownHostException","ConnectException: Failed to connect","SocketException: Connection reset","SSLHandshakeException","responseCode: 307","responseCode: 400","responseCode: 403","responseCode: 404","responseCode: 500","responseCode: 502","responseCode: 503","responseCode: 504","responseCode: 513"],G={name:"",pattern:"",replacement:"",scope:"",isRegex:!1,isEnabled:!0},W={bookName:"",bookAuthor:"",chapterIndex:0,chapterPos:0,chapterName:"",bookText:"",content:""},z=Object.keys(M).concat(["contentBGImg"]),H=["custom-system","custom-ht","custom-kt","custom-st","custom-fs"];t["b"]=_},c1cd:function(e,t,o){"use strict";o("974b")},c1ed:function(e,t,o){"use strict";o("3f54")},c2d5:function(e,t,o){"use strict";o("0d12")},c4fe:function(e,t,o){"use strict";o("b525")},c63a:function(e,t,o){},c9b1:function(e,t,o){"use strict";o("bc99")},cd2b:function(e,t,o){"use strict";o("68bb")},cf68:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAD1BMVEXm5ubo6Ojp6enr6+vt7e1FnZagAAACrklEQVQ4yx1SixUbMQgT3AKAFwDcAfzpBN1/qMrJS5w7bCQhC6IGSUGYQJd6Ox9ZPXi1AGJBavhUTT0JjYPGAab9WcDYIxsmlnxkayX8mhxCmKHA75az5cfRbWybEExiu08xDSgGym0mwuf3j4SvHeQxDJJzh2zp4iOlrD8iOb4SXyC1wiOLRTcnrje+nGamFeXVKWkmzbFIPChkmJ6Fg7mBpV8n+JGOVCd4jv1thThkjeQGNeafpeV3rsEWLfyWc8tC9jOv6FQ8rRzHOOVB+jCYEUAJpDvh8xHNFm/Tm5p5lw94Pp3NhtKEfQsGvnXhowdZE73hPwxKvjDd4i4PCdd0fe3W5fO8ktAsUAacLgstpUw60JCiPLg2XpkgiqPIYYXJd9ksGIT3q+LlevypzItvO+s0F1dBzVr2QDMUkYmuyGcrIS44mVJ7JVKwQXjYuBYp0Uetecbswzsikzu3gUR8bJC/C8Gd/NAzI/xdUGOYQQHDZ8X2d5XuzGRUiXAi9si5CRgoiToRZPtzLJkd0FUHRHZwJf0BHT1sE7gcnh0jmKKlSSF4/GBirGk5+K9NKlGDCfc9JtPhg78JdabH0YQRKNZnJ8tFnPfXHJb4xum1TTCeEmyEdbyEJLjznMLHuFD2Y9NEkSleIBs7SiCbblhgctVi9ch++kDYnn1C9DA5TvdPsToXM55wI6k+8eKT1blwPTqWb5CFJ+7dTBmab+KHy+xwNtItXhZNSpHD2fxnynrxG3ZBKRe8KBpXk11AnadlccEhr9w1nBBvBylNkv7A8eqpGBCDqhitmWQXBjjdS6idr/QjXWLDeMzMbVDoJuM8zN7WenMZWXgZ2vX3F01J3jHZbwk1LRP+DWEvDJtOUoh/AIaBUz5VpWyhuyx4QtgL/NmgC6kM/JvNe+R/C/5aL7BKIbYAAAAASUVORK5CYII="},d0e3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEXh7eHl8eXj7+Pn8+eTbH1KAAACPElEQVQozxWPQWrbQABF/0xn3JFKQRTZOIuUsbCCbOgdRoYEOauxkYPcTRyTlPQWIxEltrsRwQ6hK9nEQek6F+gNTE/Q3qLLusv34cN7SH3mFicdYW4gNIhJWXPBRVXzjcFD0IqeU4o4PRbAIVjyico0vJpIifqPfL80QN9DAQY5ucRHE/hpHxBldXe9GilaHKcKMlj6pho2zXgkNdBl0oJ8kiF1DSiJF1ZHBJkQr0Dbux/5I42Zp4cFahJDFGeW6/QjBwmFY/Q7vZ2SnoOdW2parv/Cnm81+m0xrEfiVXQ3W4nOXIqVYi3l6AAQBwMFkViVBANMto4enXHPNTkHBB0oVj4r5vHzCWayrgBvxtygDlDB2CNDjd80ZInY69aKVYZcfJ8DW+fWuc+syEODALx+ojqoafHsthTI+ZW27PGpIeo/cR6YKcbqIuIFhHmBrzAovzIOOJk1ucvcDzrMRYGVBH2yvcAOf0KiKwfRovBI3tm/kW1eemtfNWwIIXE2mJNhvoszfmMBfRCv0OPwd2321uDW3nx2q/BDxFVeoN1g7a6Im8yRnoawa8kbdXnU0cHeTMxKfZGlJgvLb3sKsxgglQnDdAfvj9LUnqWRDo0GiUmPwyU7TAsD7wHeIW3Nfy1qVGKoE9NgJCdYCAexNRob9yCn4DAQmXtQuUtera6bEmTTXhZy6h856xi4mnEl6BI9mfISkLbtJyZIMJIAUd5ZOBEu88KRAk71yxfItj/hpIB0Errv4gO1os4/UICf+o3kkqwAAAAASUVORK5CYII="},d194:function(e,t,o){},d7fd:function(e,t,o){"use strict";o("d94c")},d8db:function(e,t,o){"use strict";o("c63a")},d94c:function(e,t,o){},df5e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAATlBMVEXdzaHh0KPgz6LdzKDezqLczJ7ezZ/fz6Dcy5zi0aXdzZ3fz6Tfz57h0KDg0aLcyZrg0KXi0qPfzZ3j06bh0qbdyJbfzJrhz5/cxpLZwo0vDconAAAFn0lEQVRIxxyPW5LjMAwDAT5FybLl2JnM3P+i6+wXWVC1GoQGaD0h4XM3Q5o4T0HgABHBi6pZ4CDXXcUOFd6VhqC3Kch4EI8w9oMXwvU6m5LOOvcxKMOhuu8i5+5cMjcgb0t4F2uvOoeI3/MlT4IqsbtM9UG2AGSXUOsxzPevnXzK1CSHytZLvx7VdQmUcJsJCxJh2nmHW12Qod1qPjt8pih47uQ9aGpoNWF+yElCt60oH7vdIU/MnlRPSBLC/VwqxcKR8PFqnADN9ih5ufqnTlG9KwCofvs7kKYqOPHTNMQ93j9qNImFw9vjHPZ0F1m8hUUVB/Q/TrRYDMXr9++APMFARAt6sPh6wVAXzxUGhZsFUwCNfPZ8/72TAHebAhvuOuT3gO1Vn5d9Jd5sBRkg0p2seL9B7ulkjFJFIt9HPpLzdSzzMP3UcodAfMqC6pBuET2heHK1itZf1GZ1bi0BwOSxiCS8f/JBHMPMM4XCu3Mt1uz9lJbDJRqsKDZuikzkvskQEz6hanfDfO494azY5JpqPqOF1RhxD9XYEdaNxiqWqakKgmPfmrsta8KAiwF4HBxGVUJAgeSqQaiRRZJ7D2jedhw5t1CIAKxag0CBA60BpoBE6DcUi8O5AuM4pLfN0kHLmeu2B4e6HofqbgxsTWUw3PAODqa1oDtyzgXBlusi1KFdclMPE8O3jvLJ8RNi5/RxDQVzVmXA233XQ4KummunfxvLOZo+iH37964YjP06995CTdu9hsvErqJNzmf4wTrZ5DL7+qW9EoLnadrx67b8dUtrJnBXaT1N1uvPaYRKpWkq52xNsMN7vv4Sdryt/f4MhQoMCKnvVxikai1CQ6ZsnwJDc8+3Y/z8HcfvYQNq66pnAu1Hwa+3KNSwbNu8h3nDPqTl9fl7tx8fBhFfdS0o0F3JUKEZtZG9b/LZEM95lzaR30OnWPzroMxyZYdBIMoMnpN0J+m7/40+/P4soFSUjgzE7yY5zrMJuoZv0CmpVguYx1pprfb5HOviRVhHUVi/352shxCYrYBZxGtVaxiAz/MsaGSIsB7R1t4zJXH//n7RTTQQwxqcGEqEvklFHUgiO2GvJV+jAIPR+N29usWDoiSOVrN3XuqT1egQJAAU9EwslVJC8u0rGcy+WPqktJhjfMpatIG6CDAb0v5H34MGKqiVRue7GGLZ9Otxtt4JIrAhxBDwDuqI9JavcO0A7GlqFt219tH/bln9jBXzaKWAEqJV0CBxs5TwM8EvUPHaa8S86vN303MVWOsl3goDBHPWSoQ9c0kQmCKljfsKNH1+ofEOHW8a9a7glZGS8fPieL/SRSs0LAhI4FDTnXs1QYtubv2+IXPZpHB4bhivRexBkYKsSrYXNjvMUbVXpVJ+N6haV72c1k2zrnv5IYBMJBYTSZx0KTkoM3vY93rU/qs7zHplc/3d2ACadhFWByrn9LUk2IWb5JywvawTQc3F0iz+lgsBmInAIemBJtft2plKIlAFOgcroigrG2XlDsAzywQECNyaI8yr2ogoh7D4qJOYmZBzQgoZAM1PAcB8sDrr1uE5CDMR+nWSSVUGUCHAs8Vd21HOE0FzNj37pX0sLp9p3K8k++xxpkmzDxK64rmTSJnDUuIgTeslui6lg92jonZXI4jqNiUuzN4IagcKMjCniMGCODoo8T4tGDprn2hRww+NrnYiCwokd9iiWrkmbRfXYGLAoZrjO1lVQKExjUy5fIkgJURmz2uGFdASwwlWx5gDVTMK7hP6ISRVsFbYNmqtZL9MQtio285PaekyzDhZmtdexCYB0SZcTmBdhvdbmAEonk8hwcHQuZN1kVqrhyKoHHsnQhQAjF7SG533Da2S4LGjx1LoZqp7XeKQLDUBmYmydG0NQHpMeR5lRIRQc1PQ2ASMQflF4YBDMt0/GFlEHeRwCcEAAAAASUVORK5CYII="},e160:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyAgMAAABjUWAiAAAADFBMVEX6+fP8+/X+/ff///kbczPAAAACeElEQVQozxXHQUgUUQAG4P8936yzs6VvZNZmN9QxVxiF9OLBoOjtOC6rQq6ygXjI2fCQBdXBg4egtzFGdqkoI+zgBFbqkm3hQSxhFYLotOcubeKhOnVYoqQy+m4f5g5TvpX0xHLbLY9j8SMhJp+Jk4LfAUS2kVRIjILmnwGBTX42PhCVlDJQkIiy2nWAvaJ1h+oFIpJ0hMSYVbyyrgDWshcMpMyL1brPDQKWmduO+KTJ6XeXAMK9Yc3FpD7atyNwg6kt5XgFpLPhjUTFSYVn2abDiugGShwD8JTVRJVo/2ecuKtRb/qc4BK+9TboFfokog4T2Fn6Oqdnsjk90NMS76Rji6E0NmwkPBAZ4Xbkw8KoDAkAbEhkc78e9omxxgxg6qa5HvMv+UZbCV0qmHnSHKl5TxeA2XTCGWekR581mwC5crBH81PznASqB9va3TbkYAjJPLfg5uBfXaJgIgIBv9eessRIhxe7PA7kj6uUMeMaQ/OEQOYRaaHlqH2Gxwsl6E/pwVY5FH7uCypBZPKvDQyVziYBrAkMURe2MOOOxG/eQpp5PF+bFzUV5HtPj9GeiVSNZDELleifYTp9NAjsoiXg4cW+4ZORkdSMB/B74aAdjhsVakhgkugsbmqcDSLEoWp8zRjrux3tli6Q5uM3E+maT99Wy0RiP7tboiuRZle2c6CYeL2kcUc1KvPtQKucogMadKVTQOJYCeyCYlhQQ/Q7Etfd/vBygy9iqy+LyHeF46saCYvW6ingsbA9RBWtdi8GgUXW+oQx9/wP6bAAX1TWeV+CbShZDlQ9xT6SoSxZmKRAkmXb60kzEzkRF+Ccb94BGspGJoN/UzmyR4wjXHAAAAAASUVORK5CYII="},e40f:function(e,t,o){},ec0f:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAALVBMVEXx58b168ny6Mjz6sn06sf27Mvw5sTz6cbw5cLy58T37svv47/168v37s7t4Ltrv0//AAAEjUlEQVQ4yw2Ty2sTURxGf3dmOqmPxb0zmaStCnfmZpL6gpmbxIpUSMZGrSJkxsZiVZimNVaqMklrUnWTRq2KIDFWWx+IFrIRFxXEB4KIgqu6EBdu7M6FIPg32PW3+DhwDmBaYrK56KP4HGIsvg/uvOV0wK+qgBMlO9BujuH4DSJlOseqV5a/BEF97gt0ChyIPqBhXI9BtqtIB8vJB/LdCQ3OVjaLNX0g7+OmoI4e7nkemAqX6o8vg0yyQAyQS7IfgvFbI+6QyI3R4KELxw7kwM2ooQfyQigYnwY5MZbMlHI1DvnQVCoVcrt+R+bO7vPDif3ybNajwqAAe443dpfDsPt379VMWZzGRuqM79mQF+DUz9nt74bQ8J/O80MtVR51U02JKKmTCvTzLVf+vuxP/aHnPo9+2bW+zVsJ0Y630/CrfzX+b+UL+7O68Rczv+7lrMh5etfKXvhc2rk6KforxuoO2xB2tcxKfeXHt18rHOiHI/0RRjW/YGRDkHiwo3nzqL60o58C/bgRuaj7vk+QOwOhpnFNdjuWpKMCGP8Yapu9Ty5FTHKQLGSEFikjd9ADwP9ciaNNjc5qMH6w50AF/LKOsOYqsOG9GjKgc7ZXolqntm6fysJ6Ma6ll2CiqmOgE6O7x1wXExklbeqMYcwsmJmOoigt8SBg2WfilDSsAZJcBxDcrqtBXzFQJqZNHfscyIhoZlygAtyYAceah+elrFbI+46gEHDGiW878Kj7JpWyfhg6iyRMymV1MKBSeVpfgLHIohyTojI6sRyK1VpcqzVZeEBLOnA9unhGKUXPJDYtV9Dxuz4iA5xSkSWhCJdAiJR9PHlvfvbntbrR14FDqUNRAYDJmSnv3oKxuz5+7fiblgVJyYLTbgUM05P7LESkoXvyWNfb0aUU6FZizgQIa25VqKQZqFrk6v6BsqqIHlQmkQ9KrBhkC20/DrFsAFEEYLjM+lj2wYHXCwnNvZQR42XJ2iVK+UBXnI+OBE6oXpUUHiQ1yg0MhA03iwGbnOdQYc1CMiPIPQrCQJFH4L4BMFktAtKd9PN5gnU2Gra4KuK+V+mjtBRpAGIqDVe4wnSnajiFGO5d7smvhVQEMEYwqshrENIEaY7YeblJYtsb3QhAHWZCEKK67swwPMKw0If1Ta+6DgHmlgPzcUTSbi3rrv1Y64/BYEMPQ5SDHUOR022B4QRF6xLUPAaPX/V4IDI5N2BMwx4LqO1uO4j6uW7NvM7lATqGAxY/ZHVgoGZbu7SvkNR75x6qGSB23FdouENVwN7sCbewTdsXGrrnQ5ZZKOCOFtMTIzxlPu6eYmtL+nMFmoK7OeXajn86r9sqWbfmvHC4IagE5qfCPGZvLSq5F55hHIxJFa4/vRxHBlz0og4TojU1l/MOHJX17lybdF0mQhFO44JYUNt3UA473IXw/iPfDWtKG5oFSXIF5iU/VnyDSjxxeDk3jAXRyVyGTNB9FxH9qcFDNJpVbt2y9LytUXkK7Py6+z1RezHQqnoY8XcLimmd8dCnBhQCuaGpJCq3SoIlmYvLz8UkWhJw7T8k+Db/DYEKwgAAAABJRU5ErkJggg=="},edfd:function(e,t,o){},fb25:function(e,t,o){"use strict";o("6a60")},fe14:function(e,t,o){},ff48:function(e,t,o){"use strict";o("fe14")}});