(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{"0302":function(t,e,o){},"0333":function(t,e,o){"use strict";o("0302")},"0a3e":function(t,e,o){"use strict";o("53b0")},"0d98":function(t,e){t.exports="data:image/png;base64,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"},"1c59":function(t,e,o){"use strict";var s=o("6d61"),r=o("6566");s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},"1e5a":function(t,e,o){"use strict";var s=o("23e7"),r=o("9961"),i=o("dad2");s({target:"Set",proto:!0,real:!0,forced:!i("symmetricDifference")},{symmetricDifference:r})},"1e70":function(t,e,o){"use strict";var s=o("23e7"),r=o("a5f7"),i=o("dad2"),a=!i("difference",(function(t){return 0===t.size}));s({target:"Set",proto:!0,real:!0,forced:a},{difference:r})},"2ca2":function(t,e,o){},"384f":function(t,e,o){"use strict";var s=o("e330"),r=o("5388"),i=o("cb27"),a=i.Set,n=i.proto,c=s(n.forEach),l=s(n.keys),u=l(new a).next;t.exports=function(t,e,o){return o?r({iterator:l(t),next:u},e):c(t,e)}},"395e":function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27").has,i=o("8e16"),a=o("7f65"),n=o("5388"),c=o("2a62");t.exports=function(t){var e=s(this),o=a(t);if(i(e)<o.size)return!1;var l=o.getIterator();return!1!==n(l,(function(t){if(!r(e,t))return c(l,"normal",!1)}))}},"3c3c":function(t,e,o){"use strict";o("4059")},"3f9e":function(t,e,o){"use strict";o("992b")},4059:function(t,e,o){},"4ad2":function(t,e,o){"use strict";o("9034")},5388:function(t,e,o){"use strict";var s=o("c65b");t.exports=function(t,e,o){var r,i,a=o?t:t.iterator,n=t.next;while(!(r=s(n,a)).done)if(i=e(r.value),void 0!==i)return i}},"53b0":function(t,e,o){},6062:function(t,e,o){"use strict";o("1c59")},"649c":function(t,e,o){"use strict";o("2ca2")},6566:function(t,e,o){"use strict";var s=o("7c73"),r=o("edd0"),i=o("6964"),a=o("0366"),n=o("19aa"),c=o("7234"),l=o("2266"),u=o("c6d2"),h=o("4754"),f=o("2626"),p=o("83ab"),g=o("f183").fastKey,d=o("69f3"),k=d.set,m=d.getterFor;t.exports={getConstructor:function(t,e,o,u){var h=t((function(t,r){n(t,f),k(t,{type:e,index:s(null),first:null,last:null,size:0}),p||(t.size=0),c(r)||l(r,t[u],{that:t,AS_ENTRIES:o})})),f=h.prototype,d=m(e),v=function(t,e,o){var s,r,i=d(t),a=S(t,e);return a?a.value=o:(i.last=a={index:r=g(e,!0),key:e,value:o,previous:s=i.last,next:null,removed:!1},i.first||(i.first=a),s&&(s.next=a),p?i.size++:t.size++,"F"!==r&&(i.index[r]=a)),t},S=function(t,e){var o,s=d(t),r=g(e);if("F"!==r)return s.index[r];for(o=s.first;o;o=o.next)if(o.key===e)return o};return i(f,{clear:function(){var t=this,e=d(t),o=e.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=null),o=o.next;e.first=e.last=null,e.index=s(null),p?e.size=0:t.size=0},delete:function(t){var e=this,o=d(e),s=S(e,t);if(s){var r=s.next,i=s.previous;delete o.index[s.index],s.removed=!0,i&&(i.next=r),r&&(r.previous=i),o.first===s&&(o.first=r),o.last===s&&(o.last=i),p?o.size--:e.size--}return!!s},forEach:function(t){var e,o=d(this),s=a(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:o.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!S(this,t)}}),i(f,o?{get:function(t){var e=S(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),p&&r(f,"size",{configurable:!0,get:function(){return d(this).size}}),h},setStrong:function(t,e,o){var s=e+" Iterator",r=m(e),i=m(s);u(t,e,(function(t,e){k(this,{type:s,target:t,state:r(t),kind:e,last:null})}),(function(){var t=i(this),e=t.kind,o=t.last;while(o&&o.removed)o=o.previous;return t.target&&(t.last=o=o?o.next:t.state.first)?h("keys"===e?o.key:"values"===e?o.value:[o.key,o.value],!1):(t.target=null,h(void 0,!0))}),o?"entries":"values",!o,!0),f(e)}}},"68df":function(t,e,o){"use strict";var s=o("dc19"),r=o("8e16"),i=o("384f"),a=o("7f65");t.exports=function(t){var e=s(this),o=a(t);return!(r(e)>o.size)&&!1!==i(e,(function(t){if(!o.includes(t))return!1}),!0)}},7130:function(t,e,o){"use strict";o("f067")},"72c3":function(t,e,o){"use strict";var s=o("23e7"),r=o("e9bc"),i=o("dad2");s({target:"Set",proto:!0,real:!0,forced:!i("union")},{union:r})},"79a4":function(t,e,o){"use strict";var s=o("23e7"),r=o("d039"),i=o("953b"),a=o("dad2"),n=!a("intersection",(function(t){return 2===t.size&&t.has(1)&&t.has(2)}))||r((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));s({target:"Set",proto:!0,real:!0,forced:n},{intersection:i})},"7f65":function(t,e,o){"use strict";var s=o("59ed"),r=o("825a"),i=o("c65b"),a=o("5926"),n=o("46c4"),c="Invalid size",l=RangeError,u=TypeError,h=Math.max,f=function(t,e){this.set=t,this.size=h(e,0),this.has=s(t.has),this.keys=s(t.keys)};f.prototype={getIterator:function(){return n(r(i(this.keys,this.set)))},includes:function(t){return i(this.has,this.set,t)}},t.exports=function(t){r(t);var e=+t.size;if(e!==e)throw new u(c);var o=a(e);if(o<0)throw new l(c);return new f(t,o)}},"83b9e":function(t,e,o){"use strict";var s=o("cb27"),r=o("384f"),i=s.Set,a=s.add;t.exports=function(t){var e=new i;return r(t,(function(t){a(e,t)})),e}},"87b5":function(t,e,o){},"8b00":function(t,e,o){"use strict";var s=o("23e7"),r=o("68df"),i=o("dad2"),a=!i("isSubsetOf",(function(t){return t}));s({target:"Set",proto:!0,real:!0,forced:a},{isSubsetOf:r})},"8e16":function(t,e,o){"use strict";var s=o("7282"),r=o("cb27");t.exports=s(r.proto,"size","get")||function(t){return t.size}},9034:function(t,e,o){},"953b":function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27"),i=o("8e16"),a=o("7f65"),n=o("384f"),c=o("5388"),l=r.Set,u=r.add,h=r.has;t.exports=function(t){var e=s(this),o=a(t),r=new l;return i(e)>o.size?c(o.getIterator(),(function(t){h(e,t)&&u(r,t)})):n(e,(function(t){o.includes(t)&&u(r,t)})),r}},"992b":function(t,e,o){},9961:function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27"),i=o("83b9e"),a=o("7f65"),n=o("5388"),c=r.add,l=r.has,u=r.remove;t.exports=function(t){var e=s(this),o=a(t).getIterator(),r=i(e);return n(o,(function(t){l(e,t)?u(r,t):c(r,t)})),r}},"9bd8":function(t,e,o){},"9d04":function(t,e,o){"use strict";o("9bd8")},a4e7:function(t,e,o){"use strict";var s=o("23e7"),r=o("395e"),i=o("dad2"),a=!i("isSupersetOf",(function(t){return!t}));s({target:"Set",proto:!0,real:!0,forced:a},{isSupersetOf:r})},a5f7:function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27"),i=o("83b9e"),a=o("8e16"),n=o("7f65"),c=o("384f"),l=o("5388"),u=r.has,h=r.remove;t.exports=function(t){var e=s(this),o=n(t),r=i(e);return a(e)<=o.size?c(e,(function(t){o.includes(t)&&h(r,t)})):l(o.getIterator(),(function(t){u(e,t)&&h(r,t)})),r}},aa68:function(t,e,o){"use strict";o("e8e5")},b4bc:function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27").has,i=o("8e16"),a=o("7f65"),n=o("384f"),c=o("5388"),l=o("2a62");t.exports=function(t){var e=s(this),o=a(t);if(i(e)<=o.size)return!1!==n(e,(function(t){if(o.includes(t))return!1}),!0);var u=o.getIterator();return!1!==c(u,(function(t){if(r(e,t))return l(u,"normal",!1)}))}},c1a1:function(t,e,o){"use strict";var s=o("23e7"),r=o("b4bc"),i=o("dad2"),a=!i("isDisjointFrom",(function(t){return!t}));s({target:"Set",proto:!0,real:!0,forced:a},{isDisjointFrom:r})},cb27:function(t,e,o){"use strict";var s=o("e330"),r=Set.prototype;t.exports={Set:Set,add:s(r.add),has:s(r.has),remove:s(r["delete"]),proto:r}},d504:function(t,e,o){"use strict";o.r(e);o("c975"),o("14d9"),o("b0c0"),o("ac1f"),o("841c");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"index-wrapper",class:{night:t.isNight,day:!t.isNight}},[t.$store.getters.isNormalPage?e("div",{staticClass:"navigation-wrapper",class:[t.navigationClass,t.isWebApp&&!t.isNight?"status-bar-light-bg":""],style:t.navigationStyle,on:{touchstart:t.handleTouchStart,touchmove:t.handleTouchMove,touchend:t.handleTouchEnd}},[e("div",{staticClass:"navigation-inner-wrapper"},[e("div",{staticClass:"navigation-title"},[t._v(" 阅读 "),e("span",{staticClass:"version-text",on:{click:t.updateForce}},[t._v(t._s(t.$store.state.version))])]),e("div",{staticClass:"navigation-sub-title"},[t._v(" 清风不识字，何故乱翻书 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"search-wrapper"},[e("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"搜索书籍"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBook(1)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-wrapper search-setting"},[e("div",{staticClass:"setting-title"},[t._v(" 搜索设置 ")]),e("div",{staticClass:"setting-item"},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择搜索方式"},model:{value:t.searchConfig.searchType,callback:function(e){t.$set(t.searchConfig,"searchType",e)},expression:"searchConfig.searchType"}},t._l(t.searchTypeList,(function(t,o){return e("el-option",{key:"search-type-"+o,attrs:{label:t.name,value:t.value}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"single"===t.searchConfig.searchType,expression:"searchConfig.searchType === 'single'"}],staticClass:"setting-item"},["yes"===t.shelfConfig.virtualOptimize?e("VirtualSelect",{attrs:{"data-list":t.bookSourceList},model:{value:t.searchConfig.bookSourceUrl,callback:function(e){t.$set(t.searchConfig,"bookSourceUrl",e)},expression:"searchConfig.bookSourceUrl"}}):e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择搜索书源"},model:{value:t.searchConfig.bookSourceUrl,callback:function(e){t.$set(t.searchConfig,"bookSourceUrl",e)},expression:"searchConfig.bookSourceUrl"}},t._l(t.bookSourceList,(function(t,o){return e("el-option",{key:"source-"+o,attrs:{label:t.bookSourceName,value:t.bookSourceUrl}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"single"===t.searchConfig.searchType,expression:"searchConfig.searchType === 'single'"}],staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.searchBookManual}},[t._v(" 精确搜书 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.saveBookManual}},[t._v(" 手动加书 ")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"single"!==t.searchConfig.searchType,expression:"searchConfig.searchType !== 'single'"}],staticClass:"setting-item"},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择搜索书源分组"},model:{value:t.searchConfig.bookSourceGroup,callback:function(e){t.$set(t.searchConfig,"bookSourceGroup",e)},expression:"searchConfig.bookSourceGroup"}},t._l(t.bookSourceGroupList,(function(t,o){return e("el-option",{key:"source-group-"+o,attrs:{label:t.name+" ("+t.count+")",value:t.value}})})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"single"!==t.searchConfig.searchType,expression:"searchConfig.searchType !== 'single'"}],staticClass:"setting-item"},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择并发线程"},model:{value:t.searchConfig.concurrentCount,callback:function(e){t.$set(t.searchConfig,"concurrentCount",e)},expression:"searchConfig.concurrentCount"}},t._l(t.concurrentList,(function(t,o){return e("el-option",{key:"source-"+o,attrs:{label:t+"并发线程",value:t}})})),1)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"recent-wrapper"},[e("div",{staticClass:"recent-title"},[t._v(" 最近阅读 "),e("span",{staticClass:"right-text",on:{click:function(e){return t.$store.commit("clearReadingBook")}}},[t._v("清除")])]),e("div",{staticClass:"reading-recent"},[e("el-tag",{staticClass:"recent-book",class:{"no-point":""==t.readingRecent.bookUrl},attrs:{type:"warning",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.toDetail(t.readingRecent)}}},[t._v(" "+t._s(t.readingRecent.name)+" ")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v(" 后端设定 "),t.isTauri?e("span",{staticClass:"right-text",on:{click:function(e){return t.$router.push({path:"/setting"})}}},[t._v("设置")]):t._e()]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-connect",class:{"no-point":t.connecting},attrs:{type:t.connectType,effect:t.isNight?"dark":"light"},on:{click:t.setIP}},[t._v(" "+t._s(t.connectStatus)+" ")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v(" 书源设置 ")]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){t.showBookSourceManageDialog=!0}}},[t._v(" 书源管理 ")]),e("el-popover",{attrs:{placement:"right",width:t.popupWidth,trigger:"click","visible-arrow":!1,"popper-class":"popper-component explore-popover"},model:{value:t.popExploreVisible,callback:function(e){t.popExploreVisible=e},expression:"popExploreVisible"}},[e("Explore",{ref:"popExplore",staticClass:"popup",attrs:{visible:t.popExploreVisible,bookSourceList:t.bookSourceList},on:{showSearchList:t.showSearchList,close:function(e){t.popExploreVisible=!1}}}),e("el-tag",{ref:"exploreBtn",staticClass:"setting-btn",attrs:{slot:"reference",type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){t.showNavigation=!1}},slot:"reference"},[t._v(" 探索书源 ")])],1),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.uploadBookSource}},[t._v(" 导入书源 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.showRemoteBookSourceSubDialog}},[t._v(" 书源订阅 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.showFailureBookSource()}}},[t._v(" 失效书源 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.debugBookSource()}}},[t._v(" 调试书源 ")]),e("input",{ref:"fileRef",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.onSourceFileChange}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v(" 书架设置 ")]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){t.showShelfSettingsDialog=!t.showShelfSettingsDialog}}},[t._v(" 书架设置 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:t.showBookManage}},[t._v(" 书籍管理 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:t.showManageBookGroup}},[t._v(" 分组管理 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:t.importLocalBook}},[t._v(" 导入书籍 ")]),e("input",{ref:"bookRef",staticStyle:{display:"none"},attrs:{type:"file",multiple:"multiple"},on:{change:t.onBookFileChange}}),!t.$store.state.isSecureMode||t.$store.state.userInfo.enableLocalStore?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.showFileManagerDialog("__LOCAL_STORE__","书仓文件管理")}}},[t._v(" 浏览书仓 ")]):t._e(),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.showBookmarkDialog}},[t._v(" 书签管理 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.showReplaceRuleDialog}},[t._v(" 替换规则 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.init(!0)}}},[t._v(" 刷新缓存 ")])],1)]),e("div",{staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v(" 用户空间 "),t.$store.getters.hasLogin?e("span",{staticClass:"right-text",on:{click:function(e){return t.logout()}}},[t._v("注销")]):t.$store.state.isSecureMode?e("span",{staticClass:"right-text",on:{click:function(e){return t.$store.commit("setShowLogin",!0)}}},[t._v("登录")]):t._e()]),t.$store.state.isManagerMode?e("div",{staticClass:"setting-item"},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择用户空间"},model:{value:t.userNS,callback:function(e){t.userNS=e},expression:"userNS"}},t._l(t.userList,(function(t,o){return e("el-option",{key:"source-"+o,attrs:{label:t.username,value:t.userNS}})})),1)],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-item"},[t.isShowActiveLicenseBtn?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.showActiveLicenseDialog}},[t._v(" 授权管理 ")]):t._e(),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.showLicense}},[t._v(" 查看授权信息 ")]),t.localStorageAvaliable?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.saveUserConfig}},[t._v(" 备份我的配置 ")]):t._e(),t.localStorageAvaliable?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.restoreUserConfig}},[t._v(" 同步我的配置 ")]):t._e(),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.showFileManagerDialog("__HOME__","用户数据管理")}}},[t._v(" 我的数据管理 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.downloadBackupFile}},[t._v(" 下载数据备份 ")]),t.$store.state.showManagerMode&&!t.$store.state.isManagerMode?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.loadUserList}},[t._v(" 进入管理模式 ")]):t._e(),t.$store.state.isManagerMode?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.showUserManageDialog()}}},[t._v(" 用户权限管理 ")]):t._e(),t.$store.state.isManagerMode?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.showFileManagerDialog("__STORAGE__","数据目录管理")}}},[t._v(" 数据目录管理 ")]):t._e(),t.$store.state.isManagerMode?e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.exitSecureMode}},[t._v(" 退出管理模式 ")]):t._e()],1)]),!t.$store.state.isSecureMode||t.$store.state.userInfo.enableWebdav?e("div",{staticClass:"setting-wrapper"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasLogin,expression:"$store.getters.hasLogin"}],staticClass:"setting-title"},[t._v(" WebDAV ")]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:function(e){return t.showFileManagerDialog("__WEBDAV__","WebDAV文件管理")}}},[t._v(" 文件管理 ")]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.isNight?"dark":"light"},on:{click:t.backupToWebdav}},[t._v(" 保存备份 ")])],1)]):t._e(),e("div",{staticClass:"setting-wrapper"},[e("div",{staticClass:"setting-title"},[t._v(" 本地缓存 "),e("span",{staticClass:"right-text"},[t._v(t._s(t.localCacheStats.total))])]),e("div",{staticClass:"setting-item"},[e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.clearCache("bookSourceList")}}},[t._v(" 清空书源缓存 "),e("span",[t._v(t._s(t.localCacheStats.bookSourceList))])]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.clearCache("rssSources")}}},[t._v(" 清空RSS源缓存 "),e("span",[t._v(t._s(t.localCacheStats.rssSources))])]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.clearCache("chapterList")}}},[t._v(" 清空章节列表缓存 "),e("span",[t._v(t._s(t.localCacheStats.chapterList))])]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.clearCache("chapterContent")}}},[t._v(" 清空章节内容缓存 "),e("span",[t._v(t._s(t.localCacheStats.chapterContent))])]),e("el-tag",{staticClass:"setting-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.clearCache("ttsData")}}},[t._v(" 清空TTS缓存 "),e("span",[t._v(t._s(t.localCacheStats.ttsData))])])],1)])]),e("div",{staticClass:"bottom-icons"},[e("a",{attrs:{href:"https://github.com/hectorqin/reader",target:"_blank"}},[e("div",{staticClass:"bottom-icon"},[t.isNight?e("img",{attrs:{src:o("fa39"),alt:""}}):e("img",{attrs:{src:o("0d98"),alt:""}})])]),e("span",{ref:"themes",staticClass:"theme-item",style:t.themeColor,on:{click:t.toogleNight}},[t.isNight?e("i",{staticClass:"el-icon-sunny"}):e("i",{staticClass:"el-icon-moon"})])])]):t._e(),e("div",{ref:"shelfWrapper",staticClass:"shelf-wrapper",class:t.isWebApp&&!t.isNight?"status-bar-light-bg":"",on:{click:t.hideMenu}},[e("div",{staticClass:"shelf-title"},[t.$store.getters.isNormalPage&&t.collapseMenu?e("i",{staticClass:"el-icon-menu",on:{click:function(e){return e.stopPropagation(),t.toggleMenu.apply(null,arguments)}}}):t._e(),t._v(" "+t._s(t.isSearchResult?t.isExploreResult?"探索":t.isShowSearchBookSourceListDesc?"书源":"搜索":"书架")+" ("+t._s(t.bookList.length)+") "),t.$store.getters.isNormalPage&&t.isSearchResult?e("div",{staticClass:"title-btn",on:{click:t.backToShelf}},[t._v(" 书架 ")]):t._e(),t.$store.getters.isNormalPage&&t.isSearchResult&&!t.isShowSearchBookSourceListDesc?e("div",{staticClass:"title-btn",on:{click:t.loadMore}},[t.loadingMore?e("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "+t._s(t.loadingMore?"加载中...":"加载更多")+" ")]):t._e(),t.$store.getters.isNormalPage&&t.isSearchResult&&t.isShowSearchBookSourceListDesc?e("div",{staticClass:"title-btn",on:{click:t.displaySearchResult}},[t._v(" "+t._s("返回搜索")+" ")]):t._e(),t.$store.getters.isNormalPage&&!t.isSearchResult?e("div",{staticClass:"title-btn",on:{click:function(e){t.showBookEditButton=!t.showBookEditButton}}},[t._v(" "+t._s(t.showBookEditButton?"取消":"编辑")+" ")]):t._e(),t.isSearchResult?t._e():e("div",{staticClass:"title-btn",on:{click:t.refreshShelf}},[t.refreshLoading?e("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "+t._s(t.refreshLoading?"刷新中...":"刷新")+" ")]),t.$store.getters.isNormalPage&&!t.isSearchResult?e("div",{staticClass:"title-btn",on:{click:t.showRssDialog}},[t._v(" RSS ")]):t._e(),!t.$store.getters.isNormalPage||t.isSearchResult&&!t.isExploreResult?t._e():e("div",{staticClass:"title-btn",on:{click:t.showExplorePop}},[t._v(" 书海 ")]),t.showBookEditButton?e("el-input",{attrs:{size:"mini",placeholder:"搜索书架"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e()],1),t.isSearchResult?t._e():e("div",{staticClass:"book-group-wrapper"},[e("el-tabs",{staticClass:"book-group-tabs",attrs:{stretch:""},model:{value:t.showBookGroupString,callback:function(e){t.showBookGroupString=e},expression:"showBookGroupString"}},t._l(t.bookGroupDisplayList,(function(t){return e("el-tab-pane",{key:"bookGroup-"+t.groupId,attrs:{label:t.groupName,name:""+t.groupId}})})),1)],1),e("div",{ref:"bookList",staticClass:"books-wrapper",on:{touchstart:t.handleTouchStart,touchmove:t.handleTouchMove,touchend:t.handleTouchEnd,scroll:t.scrollHandler}},[!t.isSearchResult&&"list"!==t.shelfConfig.viewCate||"yes"!==t.shelfConfig.virtualOptimize?t.isSearchResult||"list"===t.shelfConfig.viewCate?e("BookList",{ref:"bookListComp",attrs:{bookList:t.bookList,showNavigation:t.showNavigation,isSearchResult:t.isSearchResult,showBookEditButton:t.showBookEditButton,showSourceCount:!t.isShowSearchBookSourceListDesc},on:{showBookInfoDialog:t.showBookInfoDialog,toDetail:t.toDetail,deleteBook:t.deleteBook,editBook:t.editBook,addBookToShelf:t.addBookToShelf,showSearchBookSourceList:t.showSearchBookSourceList}}):e("BookColumn",{ref:"bookListComp",attrs:{bookList:t.bookList,showNavigation:t.showNavigation,isSearchResult:t.isSearchResult,showBookEditButton:t.showBookEditButton},on:{showBookInfoDialog:t.showBookInfoDialog,toDetail:t.toDetail,deleteBook:t.deleteBook,editBook:t.editBook,addBookToShelf:t.addBookToShelf}}):e("BookVirtualList",{ref:"bookListComp",attrs:{bookList:t.bookList,showNavigation:t.showNavigation,isSearchResult:t.isSearchResult,showBookEditButton:t.showBookEditButton,showSourceCount:!t.isShowSearchBookSourceListDesc},on:{showBookInfoDialog:t.showBookInfoDialog,toDetail:t.toDetail,deleteBook:t.deleteBook,editBook:t.editBook,addBookToShelf:t.addBookToShelf,showSearchBookSourceList:t.showSearchBookSourceList}})],1)]),t.$store.getters.isNormalPage?e("el-dialog",{class:t.isWebApp&&!t.isNight?"status-bar-light-bg":"",attrs:{title:t.isImportRssSource?"导入RSS源":"导入书源",visible:t.showImportSourceDialog,width:t.dialogWidth,top:this.collapseMenu?"0":"15vh",fullscreen:t.collapseMenu},on:{"update:visible":function(e){t.showImportSourceDialog=e}}},[e("div",{staticClass:"source-container source-list-container"},[e("el-checkbox-group",{on:{change:t.handleCheckedSourcesChange},model:{value:t.checkedSourceIndex,callback:function(e){t.checkedSourceIndex=e},expression:"checkedSourceIndex"}},t._l(t.importSourceList,(function(o,s){return e("el-checkbox",{key:s,staticClass:"source-checkbox",attrs:{label:s}},[t._v(t._s(t.isImportRssSource?o.sourceName:o.bookSourceName)+" "+t._s(t.isImportRssSource?o.sourceUrl:o.bookSourceUrl)+" "+t._s(t.getSourceTag(o)))])})),1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-checkbox",{staticClass:"float-left checkbox-btn",attrs:{indeterminate:t.isIndeterminate,border:"",size:"medium"},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),e("el-checkbox",{staticClass:"float-left checkbox-btn",attrs:{border:"",size:"medium"},on:{change:t.handleCheckWebviewChange}},[t._v("Webview 源")]),e("el-checkbox",{staticClass:"float-left checkbox-btn",attrs:{border:"",size:"medium"},on:{change:t.handleCheckJSChange}},[t._v("JavaScript 源")]),e("span",{staticClass:"check-tip"},[t._v("已选择 "+t._s(t.checkedSourceIndex.length)+" 个")]),e("el-button",{attrs:{size:"medium"},on:{click:function(e){t.showImportSourceDialog=!1,t.checkedSourceIndex=[]}}},[t._v("取消")]),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.saveSourceList}},[t._v("确定")])],1)]):t._e(),t.$store.getters.isNormalPage?e("el-dialog",{class:t.isWebApp&&!t.isNight?"status-bar-light-bg-dialog":"",attrs:{visible:t.showBookSourceManageDialog,width:t.dialogWidth,top:t.dialogTop,fullscreen:t.collapseMenu},on:{"update:visible":function(e){t.showBookSourceManageDialog=e},closed:function(e){t.isShowFailureBookSource=!1,t.showSourceGroup="全部"}}},[e("div",{staticClass:"custom-dialog-title",attrs:{slot:"title"},slot:"title"},[e("span",{staticClass:"el-dialog__title"},[t._v(t._s(t.isShowFailureBookSource?"失效书源管理":"书源管理")+" "),t.isShowFailureBookSource?t._e():e("span",{staticClass:"float-right span-btn",on:{click:function(e){return t.deleteAllBookSource()}}},[t._v("清空")]),t.isShowFailureBookSource?t._e():e("span",{staticClass:"float-right span-btn",on:{click:function(e){return t.deleteBookSourceFile()}}},[t._v("恢复默认")]),t.isShowFailureBookSource?t._e():e("span",{staticClass:"float-right span-btn",on:{click:function(e){return t.exportBookSource()}}},[t._v("导出")]),t.isShowFailureBookSource?t._e():e("span",{staticClass:"float-right span-btn",on:{click:function(e){return t.editBookSource(!1)}}},[t._v("新增")])])]),e("div",{staticClass:"source-container table-container"},[t.isShowFailureBookSource?e("div",{staticClass:"check-form"},[e("span",{staticClass:"check-form-label"},[t._v("搜索词：")]),e("el-input",{attrs:{size:"small"},model:{value:t.checkBookSourceConfig.keyword,callback:function(e){t.$set(t.checkBookSourceConfig,"keyword",e)},expression:"checkBookSourceConfig.keyword"}}),e("span",{staticClass:"check-form-label",staticStyle:{"min-width":"68px"}},[t._v(" 超时(ms)： ")]),e("el-input-number",{attrs:{min:1e3,max:15e3,step:500,size:"small"},model:{value:t.checkBookSourceConfig.timeout,callback:function(e){t.$set(t.checkBookSourceConfig,"timeout",e)},expression:"checkBookSourceConfig.timeout"}}),e("span",{staticClass:"check-form-label"},[t._v("并发数：")]),e("el-input-number",{attrs:{min:3,max:15,step:1,size:"small"},model:{value:t.checkBookSourceConfig.concurrent,callback:function(e){t.$set(t.checkBookSourceConfig,"concurrent",e)},expression:"checkBookSourceConfig.concurrent"}})],1):t._e(),e("div",{staticClass:"source-group-wrapper"},[e("el-tabs",{staticClass:"booksource-group-tabs",attrs:{stretch:""},model:{value:t.showSourceGroup,callback:function(e){t.showSourceGroup=e},expression:"showSourceGroup"}},t._l(t.bookSourceShowGroup,(function(t){return e("el-tab-pane",{key:"sourceGroupTab-"+t,attrs:{label:t,name:t}})})),1)],1),e("el-table",{key:t.isShowFailureBookSource,attrs:{data:t.bookSourceShowResultPageList,height:t.dialogContentHeight-42-42-(t.isShowFailureBookSource?32:0)},on:{"selection-change":function(e){t.manageSourceSelection=e}}},[e("el-table-column",{attrs:{type:"selection",width:"25",fixed:t.$store.state.miniInterface,selectable:t.isBookSourceSelectable}}),e("el-table-column",{attrs:{property:"bookSourceName",label:"书源名称","min-width":"60",sortable:"",fixed:t.$store.state.miniInterface}}),e("el-table-column",{attrs:{property:"bookSourceUrl",label:"书源链接","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-link",{attrs:{type:"primary",href:o.row.bookSourceUrl,target:"_blank"}},[t._v(t._s(o.row.bookSourceUrl))])]}}],null,!1,2464495659)}),t.isShowFailureBookSource?e("el-table-column",{attrs:{property:"errorMsg",label:"错误信息",sortable:"","min-width":"120"}}):t._e(),e("el-table-column",{attrs:{label:"书架书籍","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("pre",[t._v(t._s(t.showSourceBook(o.row)))])]}}],null,!1,1425242229)}),t.isShowFailureBookSource?t._e():e("el-table-column",{attrs:{width:"120px"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editBookSource(o.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.editBookSourceHeader(o.row)}}},[t._v("请求头")])]}}],null,!1,3106287277)},[e("template",{slot:"header"},[e("el-input",{attrs:{size:"mini",placeholder:"搜索书源"},model:{value:t.bookSourceKeyword,callback:function(e){t.bookSourceKeyword=e},expression:"bookSourceKeyword"}})],1)],2)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("div",[e("el-button",{staticClass:"float-left",attrs:{type:"primary",size:"medium"},on:{click:t.deleteBookSourceList}},[t._v("批量删除"),t.manageSourceSelection.length?e("span",[t._v(" ("+t._s(t.manageSourceSelection.length)+")")]):t._e()]),t.isShowFailureBookSource?e("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"medium"},on:{click:t.checkBookSource}},[t._v(t._s(t.isCheckingBookSource?"正在":"")+"检测书源 "+t._s(t.checkBookSourceTip))]):t._e()],1),e("div",{staticClass:"source-pagination"},[e("el-pagination",{attrs:{"current-page":t.bookSourcePagination.page,"page-sizes":[25,50,100,200,300,400],"page-size":t.bookSourcePagination.size,layout:"total, sizes, prev, pager, next",total:t.bookSourceShowLength,"pager-count":t.collapseMenu?5:7},on:{"update:currentPage":function(e){return t.$set(t.bookSourcePagination,"page",e)},"update:current-page":function(e){return t.$set(t.bookSourcePagination,"page",e)},"update:pageSize":function(e){return t.$set(t.bookSourcePagination,"size",e)},"update:page-size":function(e){return t.$set(t.bookSourcePagination,"size",e)}}})],1)])]):t._e(),t.$store.getters.isNormalPage?e("el-dialog",{class:t.isWebApp&&!t.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"导入本地书籍"+t.importMultiBookTip,visible:t.showImportBookDialog,width:t.dialogSmallWidth,top:t.dialogTop,fullscreen:t.collapseMenu},on:{"update:visible":function(e){t.showImportBookDialog=e},closed:t.importBookDialogClosed}},[e("div",{staticClass:"source-container table-container"},[e("div",{staticClass:"check-form"},[e("div",{staticClass:"book-cover"},[e("el-image",{key:t.getBookCoverUrl(t.importBookInfo),staticClass:"cover",attrs:{src:t.getCover(t.getBookCoverUrl(t.importBookInfo),!0),fit:"cover",lazy:""}})],1),e("div",{staticClass:"book-info"},[e("div",[e("span",[t._v("书名：")]),e("el-input",{attrs:{size:"small"},model:{value:t.importBookInfo.name,callback:function(e){t.$set(t.importBookInfo,"name",e)},expression:"importBookInfo.name"}})],1),e("div",[e("span",[t._v("作者：")]),e("el-input",{attrs:{size:"small"},model:{value:t.importBookInfo.author,callback:function(e){t.$set(t.importBookInfo,"author",e)},expression:"importBookInfo.author"}})],1),e("div",[e("span",[t._v("分组：")]),e("el-select",{attrs:{size:"mini",filterable:"",multiple:"",placeholder:"未分组"},model:{value:t.importBookGroup,callback:function(e){t.importBookGroup=e},expression:"importBookGroup"}},t._l(t.bookGroupSetList,(function(t,o){return e("el-option",{key:"bookGroup-"+o,attrs:{label:t.groupName,value:t.groupId}})})),1)],1),t.isShowTocRule?e("div",[e("span",[t._v("规则：")]),e("el-select",{attrs:{size:"mini",filterable:"",placeholder:"内置规则"},model:{value:t.importUsedTxtRule,callback:function(e){t.importUsedTxtRule=e},expression:"importUsedTxtRule"}},t._l(t.tocRuleList,(function(t,o){return e("el-option",{key:"txtTocRule-"+o,attrs:{label:t.name,value:t.rule}})})),1),e("el-button",{staticClass:"toc-refresh-btn",attrs:{type:"text"},on:{click:function(e){return t.getChapterListByRule()}}},[t._v("刷新目录")])],1):t._e(),t.isShowTocRule?e("div",[e("el-input",{attrs:{type:"textarea",rows:2,size:"small"},model:{value:t.importBookInfo.tocUrl,callback:function(e){t.$set(t.importBookInfo,"tocUrl",e)},expression:"importBookInfo.tocUrl"}})],1):t._e()])]),e("div",{staticClass:"chapter-title"},[t._v(" 章节列表("+t._s(t.importBookChapters.length)+") ")]),e("div",{staticClass:"chapter-list",style:{maxHeight:t.dialogContentHeight-40-35+"px"}},t._l(t.importBookChapters,(function(o,s){return e("p",{key:s},[t._v(" "+t._s(s+1)+". "+t._s(o.title)+" ")])})),0)]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.saveBook(t.importBookInfo,!0)}}},[t._v("确定导入")]),e("el-button",{attrs:{size:"medium"},on:{click:function(e){t.showImportBookDialog=!1}}},[t._v("取消")])],1)]):t._e(),e("ShelfSettings",{model:{value:t.showShelfSettingsDialog,callback:function(e){t.showShelfSettingsDialog=e},expression:"showShelfSettingsDialog"}})],1)},r=[],i=o("5530"),a=o("c7eb"),n=o("1da1"),c=(o("d401"),o("99af"),o("4de4"),o("4160"),o("a630"),o("caad"),o("277d"),o("e260"),o("a15b"),o("d81d"),o("13d5"),o("fb6a"),o("4e82"),o("3c65"),o("f4b3"),o("0d03"),o("e9f5"),o("910d"),o("7d54"),o("ab43"),o("9485"),o("e9c4"),o("b64b"),o("d3b7"),o("25f0"),o("6062"),o("1e70"),o("79a4"),o("c1a1"),o("8b00"),o("a4e7"),o("1e5a"),o("72c3"),o("8a79"),o("2532"),o("3ca3"),o("466d"),o("5319"),o("2ca0"),o("159b"),o("ddb0"),o("4795"),o("2b3d"),o("bf19"),o("9861"),o("88a7"),o("271a"),o("5494"),o("2f62")),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"popup-wrapper",style:t.popupTheme},[e("div",{staticClass:"title-zone"},[e("div",{staticClass:"title"},[t._v("书海")]),e("div",{class:{"title-btn":!0}},[e("span",{staticClass:"source-count"},[t._v(" 共"+t._s(t.bookSourceShowLength)+"个可用书源 ")]),t.$store.state.miniInterface?e("i",{staticClass:"el-icon-close close-btn",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e()])]),e("div",{staticClass:"source-group-wrapper"},[e("el-tabs",{staticClass:"booksource-group-tabs",attrs:{stretch:""},model:{value:t.sourceGroup,callback:function(e){t.sourceGroup=e},expression:"sourceGroup"}},t._l(t.bookSourceGroup,(function(t){return e("el-tab-pane",{key:"sourceGroupTab-"+t,attrs:{label:t,name:t}})})),1)],1),e("div",{ref:"sourceList",staticClass:"data-wrapper",class:{night:t.$store.getters.isNight,day:!t.$store.getters.isNight},on:{scroll:t.scrollHandler}},[e("div",{staticClass:"cata"},[t.visible?e("el-collapse",{ref:"sourceList",staticClass:"source-collapse",on:{change:t.onCollapseChange},model:{value:t.showCollapse,callback:function(e){t.showCollapse=e},expression:"showCollapse"}},t._l(t.bookSourceListNew,(function(o,s){return e("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!t.sourceGroup||"全部"===t.sourceGroup||"未分组"===t.sourceGroup&&""===o.bookSourceGroup||(o.bookSourceGroup+",").indexOf(t.sourceGroup+",")>=0,expression:"\n            !sourceGroup ||\n              sourceGroup === '全部' ||\n              (sourceGroup === '未分组' && source.bookSourceGroup === '') ||\n              (source.bookSourceGroup + ',').indexOf(sourceGroup + ',') >= 0\n          "}],key:"source-"+s,ref:"source",refInFor:!0,attrs:{title:o.bookSourceName,name:s}},[t.showCollapse.includes(s)?t._l(o.exploreGroup,(function(s,r){return e("div",{key:"group-"+r,staticClass:"explore-group"},t._l(s,(function(s,r){return e("el-tag",{key:"group-"+r,staticClass:"explore-btn",attrs:{type:"info",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return t.exploreBookSource(s.url,o.bookSourceUrl,1,e)}}},[t._v(" "+t._s(s.name)+" ")])})),1)})):t._e()],2)})),1):t._e()],1)])])},u=[],h=(o("45fc"),o("a732"),o("8efd")),f=o("be3b"),p={name:"Explore",data:function(){return{page:1,ruleFindUrl:"",bookSourceUrl:"",exploreList:[],showCollapse:[],sourceGroup:"全部",lastCollapseLength:0}},props:["visible","bookSourceList"],computed:{theme:function(){return this.$store.getters.config.theme},popupTheme:function(){return{background:this.$store.getters.currentThemeConfig.popup}},bookSourceListNew:function(){return this.bookSourceList.filter((function(t){return t.exploreUrl}))},bookSourceGroup:function(){var t=new Set;return t.add("全部"),this.bookSourceListNew.forEach((function(e){e.bookSourceGroup&&e.bookSourceGroup.split(",").forEach((function(e){e&&t.add(e)}))})),t.add("未分组"),Array.from(t)},bookSourceShowLength:function(){var t=this;return this.sourceGroup&&"全部"!==this.sourceGroup?this.bookSourceListNew.filter((function(e){return"未分组"===t.sourceGroup?!e.bookSourceGroup:(e.bookSourceGroup+",").indexOf(t.sourceGroup+",")>=0})).length:this.bookSourceListNew.length}},mounted:function(){window.explorePop=this},watch:{visible:function(t){var e=this;t&&this.$nextTick((function(){e.lastScrollTop&&(e.$refs.sourceList.scrollTop=e.lastScrollTop)}))}},methods:{onCollapseChange:function(t){var e=this;if(t.length>this.lastCollapseLength){var o=this.bookSourceList[t[t.length-1]];!0===o.exploreUrl&&f["a"].post(this.api+"/getBookSource",{bookSourceUrl:o.bookSourceUrl}).then((function(t){t.data.isSuccess&&(o.exploreUrl=t.data.data.exploreUrl,e.$set(o,"exploreGroup",e.getExploreGroup(o)))}),(function(t){e.$message.error("加载书源信息失败 "+(t&&t.toString()))}))}this.lastCollapseLength=t.length},getExploreGroup:function(t){if(!t.exploreUrl)return[];var e=[],o=[],s=[];try{s=JSON.parse(t.exploreUrl)}catch(i){try{s=new Function("return "+t.exploreUrl)()}catch(i){}}if(Array.isArray(s)&&s.length){var r=0;s.forEach((function(t){var s=t.style&&t.style.layout_flexBasisPercent&&-1!==t.style.layout_flexBasisPercent?t.style.layout_flexBasisPercent:.25;o.push({name:t.title,url:t.url}),r+=s,r>=1&&(e.push(o),o=[],r=0)}))}else t.exploreUrl.replace(/\r\n/g,"\n").split("\n").forEach((function(t){t?(o.length>=4&&(e.push(o),o=[]),t=t.split("::"),o.push({name:t[0],url:t[1]})):o.length&&(e.push(o),o=[])}));return o.length&&e.push(o),e},exploreBookSource:function(t,e,o){var s=this;this.page=o||1,this.ruleFindUrl=t,this.bookSourceUrl=e,f["a"].post(this.api+"/exploreBook",{ruleFindUrl:t,bookSourceUrl:e,page:o}).then((function(t){if(t.data.isSuccess){if(1===o)s.exploreList=t.data.data;else{var e=[].concat(s.exploreList),r=e.reduce((function(t,e){return t[e.bookUrl]=e,t}),{}),i=e.length;t.data.data.forEach((function(t){r[t.bookUrl]||e.push(t)})),s.exploreList=e,e.length===i&&s.$message.error("没有更多啦")}s.$emit("showSearchList",s.exploreList)}}),(function(t){throw s.$message.error("探索失败 "+(t&&t.toString())),t}))},loadMore:function(){this.page=this.page+1,this.exploreBookSource(this.ruleFindUrl,this.bookSourceUrl,this.page)},jumpToActive:function(){var t=this;this.$nextTick((function(){var e=-1;if(t.bookSourceListNew.some((function(o,s){if(o.bookSourceUrl==t.bookSourceUrl)return e=s,!0})),!(e<0)){var o=t.$refs.sourceList;Object(h["a"])(t.$refs.source[e],{container:o,duration:0})}}))},close:function(){this.$emit("close")},scrollHandler:function(){this.lastScrollTop=this.$refs.sourceList.scrollTop},setSourceGroup:function(t){this.sourceGroup===t?this.sourceGroup="":this.sourceGroup=t}}},g=p,d=(o("0a3e"),o("2877")),k=Object(d["a"])(g,l,u,!1,null,"e5965c98",null),m=k.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},t._l(t.bookList,(function(o){return e("div",{key:o.bookUrl,staticClass:"book",style:t.showNavigation?{minWidth:"360px !important"}:{}},[e("div",{staticClass:"cover-img",on:{click:function(e){return e.stopPropagation(),t.$emit("showBookInfoDialog",o)}}},[e("el-image",{ref:"bookCoverList",refInFor:!0,staticClass:"cover",attrs:{src:t.getCover(t.getBookCoverUrl(o),!0),fit:"cover",lazy:""}})],1),e("div",{staticClass:"info",on:{click:function(e){return e.stopPropagation(),t.$emit("toDetail",o)}}},[e("div",{staticClass:"book-operation"},[!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-close",on:{click:function(e){return e.stopPropagation(),t.$emit("deleteBook",o)}}}):t._e(),!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",o)}}}):t._e(),t.isSearchResult?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",o,!0)}}}):t._e(),!t.isSearchResult&&!t.showBookEditButton&&o.totalChapterNum-1-o.durChapterIndex>0?e("el-badge",{staticClass:"unread-num-badge",attrs:{max:99,value:o.totalChapterNum-1-o.durChapterIndex}}):t._e()],1),e("div",{staticClass:"name",class:t.showBookEditButton?"edit":"",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(o.name)+" ")]),e("div",{staticClass:"sub"},[e("div",{staticClass:"author"},[t._v(" "+t._s(o.author||"")+" ")]),o.totalChapterNum?e("div",{staticClass:"dot"},[t._v("•")]):t._e(),o.totalChapterNum?e("div",{staticClass:"size"},[t._v(" 共"+t._s(o.totalChapterNum)+"章 ")]):t._e()]),!t.isSearchResult&&o.durChapterTitle?e("div",{staticClass:"dur-chapter"},[t._v(" 已读："+t._s(o.durChapterTitle)+" ")]):t._e(),t.isSearchResult?e("BookKind",{attrs:{book:o}}):t._e(),o.latestChapterTitle?e("div",{staticClass:"last-chapter"},[t._v(" "+t._s(o.lastCheckTime?t.dateFormat(o.lastCheckTime):"最新")+"："+t._s(o.latestChapterTitle)+" ")]):t._e(),t.isSearchResult?e("div",[e("el-tag",{staticClass:"setting-connect",attrs:{type:"success",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return e.stopPropagation(),t.$emit("addBookToShelf",o)}}},[t._v(" 加入书架 ")]),t.showSourceCount?e("span",{staticClass:"source-count",on:{click:function(e){return e.stopPropagation(),t.$emit("showSearchBookSourceList",o)}}},[t._v(t._s(o.sourceCount||1)+" 个书源")]):t._e()],1):t._e()],1)])})),0)},S=[],b=o("0fe7"),w={name:"BookList",components:{BookKind:b["a"]},data:function(){return{}},props:["showNavigation","bookList","isSearchResult","showBookEditButton","showSourceCount"],computed:Object(i["a"])({},Object(c["b"])(["dialogSmallWidth","dialogTop"])),methods:{getBookCoverUrl:function(t){return t.customCoverUrl||t.coverUrl}}},C=w,B=(o("9d04"),o("3f9e"),Object(d["a"])(C,v,S,!1,null,"2fbafdaa",null)),x=B.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("VirtList",{attrs:{itemKey:"bookUrl",list:t.bookList,minSize:112,itemClass:"book",itemStyle:t.showNavigation?{minWidth:"360px !important"}:{}},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.itemData;return[e("div",{staticClass:"cover-img",on:{click:function(e){return e.stopPropagation(),t.$emit("showBookInfoDialog",s)}}},[e("el-image",{ref:"bookCoverList",staticClass:"cover",attrs:{src:t.getCover(t.getBookCoverUrl(s),!0),fit:"cover",lazy:""}})],1),e("div",{staticClass:"info",on:{click:function(e){return e.stopPropagation(),t.$emit("toDetail",s)}}},[e("div",{staticClass:"book-operation"},[!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-close",on:{click:function(e){return e.stopPropagation(),t.$emit("deleteBook",s)}}}):t._e(),!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",s)}}}):t._e(),t.isSearchResult?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",s,!0)}}}):t._e(),!t.isSearchResult&&!t.showBookEditButton&&s.totalChapterNum-1-s.durChapterIndex>0?e("el-badge",{staticClass:"unread-num-badge",attrs:{max:99,value:s.totalChapterNum-1-s.durChapterIndex}}):t._e()],1),e("div",{staticClass:"name",class:t.showBookEditButton?"edit":"",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"sub"},[e("div",{staticClass:"author"},[t._v(" "+t._s(s.author||"")+" ")]),s.totalChapterNum?e("div",{staticClass:"dot"},[t._v("•")]):t._e(),s.totalChapterNum?e("div",{staticClass:"size"},[t._v(" 共"+t._s(s.totalChapterNum)+"章 ")]):t._e()]),!t.isSearchResult&&s.durChapterTitle?e("div",{staticClass:"dur-chapter"},[t._v(" 已读："+t._s(s.durChapterTitle)+" ")]):t._e(),t.isSearchResult?e("BookKind",{attrs:{book:s}}):t._e(),s.latestChapterTitle?e("div",{staticClass:"last-chapter"},[t._v(" "+t._s(s.lastCheckTime?t.dateFormat(s.lastCheckTime):"最新")+"："+t._s(s.latestChapterTitle)+" ")]):t._e(),t.isSearchResult?e("div",[e("el-tag",{staticClass:"setting-connect",attrs:{type:"success",effect:t.$store.getters.isNight?"dark":"light"},on:{click:function(e){return e.stopPropagation(),t.$emit("addBookToShelf",s)}}},[t._v(" 加入书架 ")]),t.showSourceCount?e("span",{staticClass:"source-count",on:{click:function(e){return e.stopPropagation(),t.$emit("showSearchBookSourceList",s)}}},[t._v(t._s(s.sourceCount||1)+" 个书源")]):t._e()],1):t._e()],1)]}}])})],1)},L=[],_=o("febf"),$={name:"BookList",components:{BookKind:b["a"],VirtList:_["a"]},data:function(){return{}},props:["showNavigation","bookList","isSearchResult","showBookEditButton","showSourceCount"],computed:Object(i["a"])({},Object(c["b"])(["dialogSmallWidth","dialogTop"])),methods:{getBookCoverUrl:function(t){return t.customCoverUrl||t.coverUrl}}},N=$,I=(o("aa68"),o("649c"),Object(d["a"])(N,y,L,!1,null,null,null)),A=I.exports,T=function(){var t=this,e=t._self._c;return e("div",{ref:"wrapper",staticClass:"wrapper",style:{"grid-template-columns":"repeat(auto-fill, "+t.bookItemWidth+")"}},t._l(t.bookList,(function(o){return e("div",{key:o.bookUrl,staticClass:"book",style:{"--book-item-width":t.bookItemWidth},on:{click:function(e){return t.$emit("toDetail",o)}}},[e("div",{staticClass:"cover-img",on:{click:function(e){return e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.$emit("showBookInfoDialog",o)):null}}},[e("el-image",{ref:"bookCoverList",refInFor:!0,staticClass:"cover",attrs:{src:t.getCover(t.getBookCoverUrl(o),!0),fit:"cover",lazy:""}})],1),e("div",{staticClass:"name"},[t._v(" "+t._s(o.name)+" ")]),e("div",{staticClass:"book-operation"},[!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-close",on:{click:function(e){return e.stopPropagation(),t.$emit("deleteBook",o)}}}):t._e(),!t.isSearchResult&&t.showBookEditButton?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",o)}}}):t._e(),t.isSearchResult?e("i",{staticClass:"el-icon-edit",on:{click:function(e){return e.stopPropagation(),t.$emit("editBook",o,!0)}}}):t._e(),!t.isSearchResult&&!t.showBookEditButton&&o.totalChapterNum-1-o.durChapterIndex>0?e("el-badge",{staticClass:"unread-num-badge",attrs:{max:99,value:o.totalChapterNum-1-o.durChapterIndex}}):t._e()],1)])})),0)},R=[],O=(o("e25e"),{name:"BookList",data:function(){return{containerWith:(this.$refs.wrapper||{}).clientWidth||750}},props:["showNavigation","bookList","isSearchResult","showBookEditButton"],computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["dialogSmallWidth","dialogTop"])),{},{bookItemWidth:function(){var t=parseInt(this.$store.state.shelfConfig.viewCate.replace("column-",""));return t<10?(this.containerWith-15*(t-1)-40)/t+"px":t+"px"}}),mounted:function(){var t=this;this.setWidth(),this.resizeObserver=new ResizeObserver((function(){t.setWidth()})),this.resizeObserver.observe(this.$refs.wrapper)},destroyed:function(){this.resizeObserver.disconnect(),this.resizeObserver=null},methods:{getBookCoverUrl:function(t){return t.customCoverUrl||t.coverUrl},setWidth:function(){this.containerWith=this.$refs.wrapper.clientWidth}}}),M=O,E=(o("0333"),o("4ad2"),Object(d["a"])(M,T,R,!1,null,"77d83090",null)),U=E.exports,D=function(){var t=this,e=t._self._c;return t.$store.getters.isNormalPage?e("el-dialog",{class:t.isWebApp&&!t.$store.getters.isNight?"status-bar-light-bg-dialog":"",attrs:{title:"书架布局",visible:t.show,width:t.dialogSmallWidth,top:t.dialogTop,fullscreen:t.$store.state.miniInterface,"before-close":t.cancel},on:{"update:visible":function(e){t.show=e}}},[e("el-form",{attrs:{model:t.shelfConfig}},[e("el-form-item",{attrs:{label:"显示分组"}},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择默认显示分组"},model:{value:t.shelfConfig.showBookGroup,callback:function(e){t.$set(t.shelfConfig,"showBookGroup",e)},expression:"shelfConfig.showBookGroup"}},t._l(t.bookGroupDisplayList,(function(t,o){return e("el-option",{key:"book-group-"+o,attrs:{label:t.groupName,value:t.groupId}})})),1)],1),e("el-form-item",{attrs:{label:"显示视图"}},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择视图"},model:{value:t.shelfConfig.viewCate,callback:function(e){t.$set(t.shelfConfig,"viewCate",e)},expression:"shelfConfig.viewCate"}},t._l(t.viewCateList,(function(t,o){return e("el-option",{key:"view-cate-"+o,attrs:{label:t.name,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"书籍排序"}},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择排序"},model:{value:t.shelfConfig.bookOrder,callback:function(e){t.$set(t.shelfConfig,"bookOrder",e)},expression:"shelfConfig.bookOrder"}},t._l(t.bookOrderList,(function(t,o){return e("el-option",{key:"book-order-"+o,attrs:{label:t.name,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"图片代理"}},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择图片代理"},model:{value:t.shelfConfig.imageProxy,callback:function(e){t.$set(t.shelfConfig,"imageProxy",e)},expression:"shelfConfig.imageProxy"}},t._l(t.imageProxyList,(function(t,o){return e("el-option",{key:"book-image-"+o,attrs:{label:t.name,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"列表优化"}},[e("el-select",{staticClass:"setting-select",attrs:{size:"mini",filterable:"",placeholder:"请选择是否启用列表优化"},model:{value:t.shelfConfig.virtualOptimize,callback:function(e){t.$set(t.shelfConfig,"virtualOptimize",e)},expression:"shelfConfig.virtualOptimize"}},t._l(t.virtualOptimizeList,(function(t,o){return e("el-option",{key:"virtual-options-"+o,attrs:{label:t.name,value:t.value}})})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.save}},[t._v("保 存")]),e("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.cancel}},[t._v("关 闭")])],1)],1):t._e()},G=[],j=o("bfff"),P=o("f537"),z=o.n(P),F={model:{prop:"show",event:"setShow"},name:"ShelfSettings",data:function(){return{isAdd:!0,shelfConfig:Object(i["a"])(Object(i["a"])({},j["b"].shelfConfig),this.$store.state.shelfConfig),viewCateList:[{name:"列表",value:"list"},{name:"网格3列",value:"column-3"},{name:"网格4列",value:"column-4"},{name:"网格5列",value:"column-5"},{name:"网格6列",value:"column-6"},{name:"网格(小)",value:"column-100"},{name:"网格(中)",value:"column-150"},{name:"网格(大)",value:"column-200"}],bookOrderList:[{name:"按阅读时间",value:"durChapterTime"},{name:"按更新时间",value:"lastCheckTime"},{name:"按书名",value:"name"}],imageProxyList:[{name:"不使用代理",value:"noProxy"},{name:"服务器代理",value:"serverProxy"}],virtualOptimizeList:[{name:"启用虚拟列表优化",value:"yes"},{name:"不启用优化",value:"no"}]}},props:["show"],computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["dialogSmallWidth","dialogTop"])),{},{bookGroupDisplayList:function(){var t=this;return this.$store.state.bookGroupList.filter((function(e){return t.getShowShelfBooks(e.groupId).length&&e.show})).sort((function(t,e){return t.order-e.order}))},shelfBooks:function(){return this.$store.getters.shelfBooks}}),watch:{show:function(t){t&&(this.shelfConfig=Object(i["a"])(Object(i["a"])({},j["b"].shelfConfig),this.$store.state.shelfConfig))}},methods:{cancel:function(){this.$emit("setShow",!1)},getShowShelfBooks:function(t){return-1===t?this.shelfBooks:-2===t?this.shelfBooks.filter((function(t){return"loc_book"===t.origin})):-3===t?this.shelfBooks.filter((function(t){return 1===t.type})):-4===t?this.shelfBooks.filter((function(t){return 0===t.group})):-5===t?this.shelfBooks.filter((function(t){return t.lastCheckError})):this.shelfBooks.filter((function(e){return 0===t||z.a.fromNumber(e.group).and(t).greaterThan(0)}))},save:function(){this.$store.commit("setShelfConfig",Object(i["a"])({},this.shelfConfig))}}},W=F,V=Object(d["a"])(W,D,G,!1,null,"70ce2ba2",null),J=V.exports,K=function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{"popper-class":"select-virtual-list-popover",trigger:"click",placement:"bottom-start",width:t.width},on:{show:function(e){return t.$refs.virtList.$forceUpdate()}},model:{value:t.visibleVirtualList,callback:function(e){t.visibleVirtualList=e},expression:"visibleVirtualList"}},[e("VirtList",{ref:"virtList",attrs:{itemKey:"bookUrl",list:t.list,minSize:30},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.itemData;return[e("div",{class:["virtual-item",{"is-selected":s.bookSourceUrl===t.curValue}],on:{click:function(e){return e.stopPropagation(),t.$emit("clickVirtualItem",s)}}},[e("span",[t._v(t._s(s.bookSourceName))])])]}}])}),e("el-input",{attrs:{slot:"reference",size:t.size,placeholder:t.tip,"suffix-icon":t.visibleVirtualList?"el-icon-arrow-up":"el-icon-arrow-down"},slot:"reference",model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)},H=[],Q=(o("7db0"),o("c740"),o("f665"),o("a9e3"),{name:"VirtualSelect",props:{width:{type:Number,default:250},size:{type:String,default:"small"},placeholder:{type:String,default:"请选择"},dataList:{type:Array,default:function(){return[]}},value:{type:[String,Number],default:""}},components:{VirtList:_["a"]},watch:{visibleVirtualList:function(t){var e=this;t?(this.keyword="",this.$nextTick((function(){var t=e.curIndex?e.curIndex:0;e.$refs.virtList.scrollToIndex(t-1)}))):this.keyword=this.curLabel},value:function(t){var e;this.curValue=t,this.curLabel=(null===(e=this.dataList.find((function(e){return e.bookSourceUrl===t})))||void 0===e?void 0:e.bookSourceName)||"",this.curIndex=this.dataList.findIndex((function(e){return e.bookSourceUrl===t}))},dataList:function(t){var e,o=this;this.curLabel=(null===(e=t.find((function(t){return t.bookSourceUrl===o.value})))||void 0===e?void 0:e.bookSourceName)||"",this.curIndex=t.findIndex((function(t){return t.bookSourceUrl===o.value}))}},data:function(){return{visibleVirtualList:!1,curValue:this.value,curLabel:"",curIndex:null,keyword:""}},created:function(){var t=this;this.$on("clickVirtualItem",(function(e){t.curIndex=e.index,t.curLabel=e.bookSourceName,t.visibleVirtualList=!1,t.$emit("input",e.bookSourceUrl)}))},computed:{list:function(){var t=this;return this.dataList.filter((function(e){return!t.keyword||e.bookSourceName.includes(t.keyword)}))},tip:function(){return this.curLabel||this.placeholder||"请选择"}},mounted:function(){var t,e=this;this.curValue=this.value,this.curLabel=(null===(t=this.dataList.find((function(t){return t.bookSourceUrl===e.value})))||void 0===t?void 0:t.bookSourceName)||"",this.curIndex=this.dataList.findIndex((function(t){return t.bookSourceUrl===e.value})),this.keyword=this.curLabel},methods:{handleInput:function(t){this.keyword=t,this.$refs.virtList.$forceUpdate()}}}),Z=Q,X=(o("3c3c"),Object(d["a"])(Z,K,H,!1,null,null,null)),Y=X.exports,q=o("63f0"),tt=o("8552"),et=o("7513"),ot=o("526f"),st=o("30b5"),rt={components:{Explore:m,BookList:x,BookVirtualList:A,BookColumn:U,ShelfSettings:J,VirtualSelect:Y},data:function(){return{search:"",searchTypeList:[{name:"单源搜索",value:"single"},{name:"多源搜索(过滤书名/作者名)",value:"multi"}],isSearchResult:!1,isExploreResult:!1,searchResult:[],searchPage:1,refreshLoading:!1,searchLastIndex:-1,showBookEditButton:!1,popExploreVisible:!1,loadingMore:!1,importSourceList:[],showImportSourceDialog:!1,isImportRssSource:!1,checkAll:!1,isIndeterminate:!1,checkedSourceIndex:[],showBookSourceManageDialog:!1,manageSourceSelection:[],isShowFailureBookSource:!1,checkBookSourceTip:"",isCheckingBookSource:!1,showNavigation:!1,navigationClass:"",navigationStyle:{},popIntroVisible:{},connecting:!1,lastScrollTop:0,localStorageAvaliable:window.localStorage&&window.localStorage.getItem&&window.localStorage.setItem,showSourceGroup:"全部",bookSourcePagination:{page:1,size:25},bookSourceKeyword:"",checkBookSourceConfig:{keyword:"斗罗大陆",timeout:5e3,concurrent:5},importBookInfo:{},importBookGroup:[],importBookChapters:[],showImportBookDialog:!1,importMultiBookTip:"",rssSource:{},concurrentList:[1,2,4,8,12,18,24,30,36,42,48,54,60],localCacheStats:{total:"0 Bytes",bookSourceList:"0 Bytes",rssSources:"0 Bytes",chapterList:"0 Bytes",chapterContent:"0 Bytes"},showLocalStoreManageDialog:!1,showWebDAVManageDialog:!1,importUsedTxtRule:"",showAddUser:!1,addUserForm:{username:"",password:""},isTauri:window.__TAURI__,keyword:"",showShelfSettingsDialog:!1,searchBookSourceListMap:{},isShowSearchBookSourceListDesc:!1}},watch:{searchConfig:{handler:function(t){this.$store.commit("setSearchConfig",t),this.isSearchResult&&this.searchBook(1)},deep:!0},searchResult:function(t){var e=this;this.isSearchResult&&t.length&&this.$nextTick((function(){e.$refs.bookList.scrollTop=e.lastScrollTop}))},collapseMenu:function(t){t?this.showNavigation||(this.navigationClass="navigation-hidden"):this.navigationClass=""},showNavigation:function(t){var e=this;t?this.navigationClass="navigation-in":(this.navigationClass="navigation-out",setTimeout((function(){e.navigationClass="navigation-hidden"}),300))},loginAuth:function(){this.init(!0)},userNS:function(){this.init(!0)},importUsedTxtRule:function(t){t&&(this.importBookInfo.tocUrl=t)},importBookGroup:function(t){if(t&&this.showImportBookDialog){var e=0;t.forEach((function(t){e|=t})),this.importBookInfo.group=e}},showBookGroup:function(){var t=this;this.$nextTick((function(){setTimeout(t.ensureLoadBookCover)}))},showBookEditButton:function(t){t||(this.keyword="")}},mounted:function(){var t=this;document.title="阅读",this.navigationClass=this.collapseMenu&&!this.showNavigation?"navigation-hidden":"",window.shelfPage=this,tt["a"].$on("onSourceFileChange",(function(e,o){t._inactive||t.onSourceFileChange(e,o)})),tt["a"].$on("editBook",(function(e,o,s){t._inactive||t.editBook(e,o,s)})),tt["a"].$on("importPreview",(function(e){t._inactive||t.importMultiBooks(e)}))},activated:function(){document.title="阅读",this.scanCacheStorage(),this.loadBookshelf(),this.lastScrollTop&&(this.$refs.bookList.scrollTop=0|this.lastScrollTop)},methods:{init:function(t){this.$root.$children[0].init(t)},setIP:function(){var t=this;this.$prompt("请输入接口地址 ( 如：localhost:8080/reader3 )","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.api,beforeClose:function(e,o,s){if("confirm"===e){t.connecting=!0,o.confirmButtonLoading=!0,o.confirmButtonText="校验中……";var r=o.inputValue.replace(/\/*$/g,"");t.loadBookshelf(r).then((function(){t.connecting=!1,o.confirmButtonLoading=!1,s(),Object(q["c"])("api_prefix",r),t.$store.commit("setApi",r),t.init()}))["catch"]((function(){o.confirmButtonLoading=!1,o.confirmButtonText="确定"}))}else s()}}).then((function(e){var o=e.value;t.$message({type:"success",message:"与"+o+"连接成功"})}))["catch"]((function(){}))},loadBookshelf:function(t,e){var o=this;return t=t||this.api,t?(this.shelfBooks&&this.shelfBooks.length||this.loading&&this.loading.visible||(this.loading=this.$loading({target:this.$refs.bookList,lock:!0,text:e?"正在刷新书籍信息":"正在获取书籍信息",spinner:"el-icon-loading",background:this.isNight?"#222":"#fff"})),this.refreshLoading=!0,t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//")||(t="//"+t),this.$root.$children[0].loadBookShelf(e,t).then((function(){o.refreshLoading=!1,o.loading&&o.loading.close()}))):(this.$message.error("请先设置后端接口地址"),this.$store.commit("setConnected",!1),Promise.reject(!1))},refreshShelf:function(){return this.loadBookshelf(null,!0)},loadBookGroup:function(t){return this.$root.$children[0].loadBookGroup(t)},loadBookSource:function(t){return this.$root.$children[0].loadBookSource(t)},searchBook:function(t){var e=this;this.$store.state.connected?this.search?"single"!==this.searchConfig.searchType||this.searchConfig.bookSourceUrl?(t&&(this.searchPage=t),t=this.searchPage,1===t&&(this.searchLastIndex=-1,this.searchBookSourceListMap={}),"multi"===this.searchConfig.searchType&&window.EventSource?this.searchBookByEventStream(t):this.loadingMore||(this.isSearchResult=!0,this.isExploreResult=!1,this.loadingMore=!0,1===t&&(this.searchResult=[]),f["a"].post(this.api+("single"===this.searchConfig.searchType?"/searchBook":"/searchBookMulti"),{key:this.search,bookSourceUrl:this.searchConfig.bookSourceUrl,bookSourceGroup:this.searchConfig.bookSourceGroup,concurrentCount:this.searchConfig.concurrentCount,lastIndex:this.searchLastIndex,page:t},{timeout:"single"===this.searchConfig.searchType?3e4:18e4}).then((function(t){if(e.loadingMore=!1,t.data.isSuccess){var o=[];"single"===e.searchConfig.searchType?o=t.data.data:(e.searchLastIndex=t.data.data.lastIndex,o=t.data.data.list);var s=[].concat(e.searchResult),r=s.reduce((function(t,e){return t[e.name+"_"+e.author]=e,t}),{}),i=s.length;o.forEach((function(t){e.searchResultMap[t.bookUrl]||(r[t.name+"_"+t.author]?(r[t.name+"_"+t.author].sourceCount=r[t.name+"_"+t.author].sourceCount||1,r[t.name+"_"+t.author].sourceCount+=1):(t.sourceCount=1,r[t.name+"_"+t.author]=t,s.push(t))),e.searchBookSourceListMap[t.name+"_"+t.author]=e.searchBookSourceListMap[t.name+"_"+t.author]||[],e.searchBookSourceListMap[t.name+"_"+t.author].push(t)})),e.searchResult=s,s.length===i&&e.$message.error("没有更多啦")}}),(function(t){e.$message.error("搜索书籍失败 "+(t&&t.toString()))})))):this.$message.error("请选择书源进行搜索"):this.$message.error("请输入关键词进行搜索"):this.$message.error("后端未连接")},searchBookByEventStream:function(t){var e=this,o=function(){try{e.searchEventSource&&e.searchEventSource.readyState!=e.searchEventSource.CLOSED&&e.searchEventSource.close(),e.searchEventSource=null}catch(t){}};if(!this.loadingMore||(o(),this.loadingMore=!1,1===t)){var s={accessToken:this.$store.state.token,key:this.search,bookSourceUrl:this.searchConfig.bookSourceUrl,bookSourceGroup:this.searchConfig.bookSourceGroup,concurrentCount:this.searchConfig.concurrentCount,lastIndex:this.searchLastIndex,page:t};this.isSearchResult=!0,this.isExploreResult=!1,this.loadingMore=!0,1===t&&(this.searchResult=[]);var r=st(this.api+"/searchBookMultiSSE",s);o(),this.searchEventSource=new EventSource(r,{withCredentials:!0}),this.searchEventSource.addEventListener("error",(function(t){e.loadingMore=!1,o();try{if(t.data){var s=JSON.parse(t.data);s&&s.errorMsg&&e.$message.error(s.errorMsg)}}catch(r){}}));var i=this.searchResult.length;this.searchEventSource.addEventListener("end",(function(t){e.loadingMore=!1,o();try{var s=!1;if(t.data){var r=JSON.parse(t.data);r&&r.lastIndex&&(e.searchLastIndex=r.lastIndex),r&&r.isEnd&&(s=!0)}e.searchResult.length===i&&e.$message.error(s?"没有更多啦":"本次未搜索到数据")}catch(a){}})),this.searchEventSource.addEventListener("message",(function(t){try{if(t.data){var o=JSON.parse(t.data);if(o&&o.lastIndex&&(e.searchLastIndex=o.lastIndex),o.data){var r=[].concat(e.searchResult),i=r.reduce((function(t,e){return t[e.name+"_"+e.author]=e,t}),{});o.data.forEach((function(t){e.searchResultMap[t.bookUrl]||(i[t.name+"_"+t.author]?(i[t.name+"_"+t.author].sourceCount=i[t.name+"_"+t.author].sourceCount||1,i[t.name+"_"+t.author].sourceCount+=1):(t.sourceCount=1,i[t.name+"_"+t.author]=t,r.push(t))),e.searchBookSourceListMap[t.name+"_"+t.author]=e.searchBookSourceListMap[t.name+"_"+t.author]||[],e.searchBookSourceListMap[t.name+"_"+t.author].push(t)})),e.searchResult=r.sort((function(t,e){return t.name===s.key?-1:e.name===s.key?1:t.name.indexOf(s.key)>=0?-1:t.name.indexOf(s.key)>=0?1:t.sourceCount>e.sourceCount?-1:1}))}}}catch(a){}}))}},searchBookManual:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$prompt("请输入书籍链接","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.search,inputPattern:/^(http|https):\/\/.+$/,inputErrorMessage:"url 形式不正确"}).then((function(e){var o=e.value;t.searchBookDirectly(o)}))["catch"]((function(){}));case 1:case"end":return e.stop()}}),e)})))()},searchBookDirectly:function(t){var e=this;this.isSearchResult=!0,this.isExploreResult=!1,this.loadingMore=!0,f["a"].post(this.api+"/getBookInfo",{url:t,bookSourceUrl:this.searchConfig.bookSourceUrl},{timeout:3e4}).then((function(t){e.loadingMore=!1,t.data.isSuccess&&(t.data.data&&t.data.data.name&&t.data.data.author?e.searchResult=[t.data.data]:e.$message.error("没有搜索到书籍"))}),(function(t){e.$message.error("搜索书籍失败 "+(t&&t.toString()))}))},saveBookManual:function(){var t=this,e={bookUrl:"书籍链接",tocUrl:"目录链接",origin:this.searchConfig.bookSourceUrl,originName:"花生小说",name:"书名",author:"作者"};this.editBook(e,!0,(function(){t.loadBookshelf()}))},showSearchBookSourceList:function(t){this.oldSearchResult=[].concat(this.searchResult),this.searchResult=this.searchBookSourceListMap[t.name+"_"+t.author]||[],this.isShowSearchBookSourceListDesc=!0},displaySearchResult:function(){this.searchResult=this.oldSearchResult,this.isShowSearchBookSourceListDesc=!1},toDetail:function(t){var e,o;t.bookUrl&&(this.isSearchResult,this.$store.commit("setReadingBook",Object(i["a"])(Object(i["a"])({},t),{},{name:t.name,bookUrl:t.bookUrl,index:null!==(e=null!==(o=t.index)&&void 0!==o?o:t.durChapterIndex)&&void 0!==e?e:0,type:t.type,coverUrl:this.getBookCoverUrl(t),tocUrl:t.tocUrl,author:t.author,origin:t.origin,originName:t.originName,latestChapterTitle:t.latestChapterTitle,intro:t.intro})),this.$router.push({path:"/reader",query:this.isSearchResult?{search:1,bookUrl:t.bookUrl}:{bookUrl:t.bookUrl}}))},addBookToShelf:function(t){var e=this;return Object(n["a"])(Object(a["a"])().mark((function o(){var s,r;return Object(a["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=Object(i["a"])({},t),o.next=3,e.customImportBookInfo({title:"修改书籍",cancelButtonText:"暂不加入"},s);case 3:if(r=o.sent,!1!==r){o.next=6;break}return o.abrupt("return");case 6:e.saveBook(Object(i["a"])(Object(i["a"])({},s),r));case 7:case"end":return o.stop()}}),o)})))()},saveBook:function(t,e,o){var s=this;return t&&t.bookUrl&&t.origin?f["a"].post(this.api+"/saveBook",t).then((function(t){if(t.data.isSuccess)return e&&(s.showImportBookDialog=!1),s.$message.success(e?"导入书籍成功":o?"修改书籍成功":"加入书架成功"),o?s.$store.commit("updateShelfBook",t.data.data):s.loadBookshelf(),t.data.data}),(function(t){s.$message.error((e?"导入书籍失败":o?"修改书籍失败":"加入书架失败 ")+(t&&t.toString()))})):(this.$message.error("书籍信息错误"),Promise.reject(!1))},deleteBook:function(t){this.$root.$children[0].deleteBook(t)},editBook:function(t,e,o){var s=this;if(t&&t.name&&t.bookUrl&&t.origin){var r=Object(i["a"])({},t);delete r["variableMap$delegate"],tt["a"].$emit("showEditor",e?"保存书籍":"编辑书籍",JSON.stringify(r,null,4),function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(r,i){var n,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=JSON.parse(r),n.name){t.next=5;break}return s.$message.error("书籍名称不能为空"),t.abrupt("return");case 5:if(n.bookUrl){t.next=8;break}return s.$message.error("书籍链接不能为空"),t.abrupt("return");case 8:if(n.origin){t.next=11;break}return s.$message.error("书籍来源不能为空"),t.abrupt("return");case 11:if(!e){t.next=17;break}return t.next=14,s.$confirm("加入书架之后才能编辑书籍信息, 是否加入书架?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 14:if(c=t.sent,c){t.next=17;break}return t.abrupt("return");case 17:s.saveBook(n,!1,!0).then((function(t){i(),o&&o(t)})),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),s.$message.error("书籍信息必须是JSON格式");case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e,o){return t.apply(this,arguments)}}())}else this.$message.error("书籍信息错误")},backToShelf:function(){this.isSearchResult=!1,this.isExploreResult=!1,this.searchResult=[],this.loadingMore=!1},toogleNight:function(){this.isNight?this.$store.commit("setNightTheme",!1):this.$store.commit("setNightTheme",!0)},showSearchList:function(t){this.isSearchResult=!0,this.isExploreResult=!0,this.loadingMore=!1,this.searchResult=t},loadMore:function(){this.lastScrollTop=this.$refs.bookList.scrollTop,this.isExploreResult?(this.loadingMore=!0,this.$refs.popExplore.loadMore()):this.searchBook(this.searchPage+1)},uploadBookSource:function(){this.$refs.fileRef.dispatchEvent(new MouseEvent("click"))},onSourceFileChange:function(t,e){var o=this,s=t.target.files&&t.target.files[0],r=new FileReader,i=e?"RSS源":"书源";r.onload=function(t){var s=t.target.result;try{var r=JSON.parse(s);Array.isArray(r)&&r.length?(o.importSourceList=r.map((function(t){return t.headerMap&&(t.header||(t.header="string"===typeof t.headerMap?t.headerMap:JSON.stringify(t.headerMap)),delete t.headerMap),t})),o.showImportSourceDialog=!0,o.isImportRssSource=!!e):o.$message.error(i+"文件错误")}catch(a){o.$message.error(i+"文件错误")}},r.onerror=function(){var t=new FormData;t.append("file",s),f["a"].post(o.api+"/readSourceFile",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(t.data.isSuccess){var s=[];t.data.data.forEach((function(t){try{var e=JSON.parse(t);Array.isArray(e)&&(s=s.concat(e))}catch(o){}})),s.length?(o.importSourceList=s.map((function(t){return t.headerMap&&(t.header||(t.header="string"===typeof t.headerMap?t.headerMap:JSON.stringify(t.headerMap)),delete t.headerMap),t})),o.showImportSourceDialog=!0,o.isImportRssSource=!!e):o.$message.error(i+"文件错误")}}),(function(t){o.$message.error("读取"+i+"文件内容失败 "+(t&&t.toString()))}))},r.readAsText(s),this.isRssSource?this.$refs.rssInputRef.value=null:this.$refs.fileRef.value=null},showRemoteBookSourceSubDialog:function(){return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:tt["a"].$emit("showRemoteBookSourceSubDialog");case 1:case"end":return t.stop()}}),t)})))()},handleCheckAllChange:function(t){var e=!1;this.checkedSourceIndex=t?this.importSourceList.map((function(t,o){var s=JSON.stringify(t);return-1!==s.indexOf("@js:")||s.match(/[\\"]*webView[\\"]*:/)?(e=!0,!1):o})).filter((function(t){return!1!==t})):[],t&&e&&this.$message.info("部分使用了Javascript和Webview的书源未勾选"),this.isIndeterminate=!1},handleCheckedSourcesChange:function(t){var e=t.length;this.checkAll=e===this.importSourceList.length,this.isIndeterminate=e>0&&e<this.importSourceList.length},handleCheckWebviewChange:function(t){var e=this,o=this.importSourceList.map((function(o,s){var r=JSON.stringify(o);return r.match(/[\\"]*webView[\\"]*:/)?!!t&&s:!!e.checkedSourceIndex.includes(s)&&s})).filter((function(t){return!1!==t}));this.checkedSourceIndex=o},handleCheckJSChange:function(t){var e=this,o=this.importSourceList.map((function(o,s){var r=JSON.stringify(o);return-1!==r.indexOf("@js:")?!!t&&s:!!e.checkedSourceIndex.includes(s)&&s})).filter((function(t){return!1!==t}));this.checkedSourceIndex=o},getSourceTag:function(t){var e=JSON.stringify(t),o=[];return-1!==e.indexOf("@js:")&&o.push("@Javascript"),e.match(/[\\"]*webView[\\"]*:/)&&o.push("@WebView"),"   "+o.join("  ")},saveSourceList:function(){var t=this;if(this.$store.state.connected)if(this.checkedSourceIndex.length){var e=this.checkedSourceIndex.map((function(e){return t.importSourceList[e]}));f["a"].post(this.api+(this.isImportRssSource?"/saveRssSources":"/saveBookSources"),e,{timeout:3e5}).then((function(e){e.data.isSuccess&&(t.$message.success(t.isImportRssSource?"导入RSS源成功":"导入书源成功"),t.isImportRssSource?t.loadRssSources(!0):t.loadBookSource(!0),t.showImportSourceDialog=!1,t.isImportRssSource=!1,t.checkedSourceIndex=[])}),(function(e){t.$message.error((t.isImportRssSource?"导入RSS源失败 ":"导入书源失败 ")+(e&&e.toString()))}))}else this.$message.error("请选择需要导入的源");else this.$message.error("后端未连接")},isBookSourceSelectable:function(t){var e=[];return(this.$store.state.shelfBooks||[]).forEach((function(o){o.origin===t.bookSourceUrl&&e.push(o.name)})),!e.length},showSourceBook:function(t){var e=[];return(this.$store.state.shelfBooks||[]).forEach((function(o){o.origin===t.bookSourceUrl&&e.push(o.name)})),e.join("\n")},getInvalidBookSources:function(){var t=this;this.$store.state.connected?f["a"].post(this.api+"/getInvalidBookSources").then((function(e){e.data.isSuccess&&e.data.data.forEach((function(e){t.$store.commit("addFailureBookSource",{bookSourceUrl:e.sourceUrl,errorMsg:e.error})}))}),(function(){})):this.$message.error("后端未连接")},checkBookSource:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isCheckingBookSource){e.next=8;break}return e.next=3,t.$confirm("正在检测失效书源, 是否终止?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 3:if(o=e.sent,o){e.next=6;break}return e.abrupt("return");case 6:return t.bookSourceChecker.cancel(),e.abrupt("return");case 8:if(t.checkBookSourceConfig.keyword){e.next=11;break}return t.$message.error("请输入搜索关键词"),e.abrupt("return");case 11:t.isCheckingBookSource=!0,t.$store.commit("setFailureIncludeTimeout",!0),t.bookSourceChecker=Object(et["a"])(t.checkBookSourceConfig.concurrent,(function(e){t.checkBookSourceTip=e.requestCount+"/"+t.bookSourceList.length,e.isEnd()&&(t.isCheckingBookSource=!1,t.$store.commit("setFailureIncludeTimeout",!1))})),t.bookSourceList.forEach((function(e){t.bookSourceChecker((function(){return f["a"].post(t.api+"/searchBook",{key:t.checkBookSourceConfig.keyword,bookSourceUrl:e.bookSourceUrl},{timeout:t.checkBookSourceConfig.timeout,silent:!0})}))}));case 15:case"end":return e.stop()}}),e)})))()},deleteBookSourceList:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.manageSourceSelection.length){e.next=3;break}return t.$message.error("请选择需要删除的源"),e.abrupt("return");case 3:return e.next=5,t.$confirm("确认要删除所选择的书源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 5:if(o=e.sent,o){e.next=8;break}return e.abrupt("return");case 8:f["a"].post(t.api+"/deleteBookSources",t.manageSourceSelection).then((function(e){e.data.isSuccess&&(t.$store.commit("removeFailureBookSource",t.manageSourceSelection),t.manageSourceSelection=[],t.$message.success("删除书源成功"),t.loadBookSource(!0))}),(function(e){t.$message.error("删除书源失败 "+(e&&e.toString()))}));case 9:case"end":return e.stop()}}),e)})))()},hideMenu:function(){this.$store.getters.isNormalPage&&this.collapseMenu&&(this.showNavigation=!1)},toggleMenu:function(){this.collapseMenu&&(this.showNavigation=!this.showNavigation)},showExplorePop:function(){var t=this;setTimeout((function(){t.popExploreVisible=!0}),100)},showBookInfoDialog:function(t){tt["a"].$emit("showBookInfoDialog",t)},saveUserConfig:function(){this.$root.$children[0].saveUserConfig()},restoreUserConfig:function(){this.$root.$children[0].restoreUserConfig()},loadUserList:function(){var t=this;this.$store.state.connected?f["a"].get(this.api+"/getUserList").then((function(e){e.data.isSuccess&&(t.userNS=t.$store.state.userInfo.username,t.userList=e.data.data.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{userNS:t.username})})),t.$store.commit("setIsManagerMode",!0))}),(function(e){t.$message.error("加载用户空间失败 "+(e&&e.toString()))})):this.$message.error("后端未连接")},formatTableField:function(t,e,o){switch(e.property){case"createdAt":case"lastLoginAt":case"lastModified":return o?new Date(o).format("yy-MM-dd hh:mm"):"";case"size":return t.isDirectory?"":Object(et["d"])(o);default:return o}},exitSecureMode:function(){this.userNS="default",this.userList=[],this.$store.commit("setIsManagerMode",!1),this.init(!0)},backupToWebdav:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认要用当前数据覆盖备份文件中的书源、书架、分组、RSS订阅数据、替换规则、书签、用户配置和Webdav书籍吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(o=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:f["a"].post(t.api+"/backupToWebdav").then((function(e){e.data.isSuccess&&t.$message.success("备份成功")}),(function(e){t.$message.error("备份失败 "+(e&&e.toString()))}));case 6:case"end":return e.stop()}}),e)})))()},handleTouchStart:function(t){this.lastTouch=!1,this.lastMoveX=!1,this.touchMoveTimes=0,t.touches&&t.touches[0]&&t.touches[0].clientX>20&&t.touches[0].clientX<window.innerWidth-20&&t.touches[0].clientY>20&&t.touches[0].clientY<window.innerHeight-20&&(this.lastTouch=t.touches[0])},handleTouchMove:function(t){if(t.touches&&t.touches[0]&&this.lastTouch&&this.collapseMenu){var e=t.touches[0].clientX-this.lastTouch.clientX,o=t.touches[0].clientY-this.lastTouch.clientY;if(Math.abs(o)>Math.abs(e))return this.navigationStyle={},void(this.lastMoveX=0);t.preventDefault(),t.stopPropagation(),!this.showNavigation&&e>0&&e<=270?(this.touchMoveTimes%3===0&&(this.navigationStyle={marginLeft:e-270+"px"}),this.lastMoveX=e):this.showNavigation&&e<0&&e>=-270&&(this.touchMoveTimes%3===0&&(this.navigationStyle={marginLeft:e+"px"}),this.lastMoveX=e),this.touchMoveTimes++}},handleTouchEnd:function(){this.collapseMenu&&(this.lastMoveX>0?(this.showNavigation=!0,this.navigationStyle={}):this.lastMoveX<0&&(this.showNavigation=!1,this.navigationStyle={}))},showFailureBookSource:function(){this.getInvalidBookSources(),this.isShowFailureBookSource=!0,this.showBookSourceManageDialog=!0},debugBookSource:function(){window.open(window.location.origin+window.location.pathname.replace(/index.html$/,"")+"bookSourceDebug/#domain="+this.api,"_blank")},setShowSourceGroup:function(t){this.showSourceGroup===t?this.showSourceGroup="":this.showSourceGroup=t},importLocalBook:function(){this.$refs.bookRef.dispatchEvent(new MouseEvent("click"))},onBookFileChange:function(t){var e=this;if(t.target&&t.target.files&&t.target.files.length){for(var o=new FormData,s=0;s<t.target.files.length;s++){var r=t.target.files[s];o.append("file"+s,r)}f["a"].post(this.api+"/importBookPreview",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.isSuccess&&t.data.data.length&&(t.data.data.length>1?e.importMultiBooks(t.data.data):(e.importBookInfo=t.data.data[0].book,e.importBookGroup=[],e.importBookChapters=t.data.data[0].chapters,e.showImportBookDialog=!0))}),(function(t){e.$message.error("上传书籍 "+(t&&t.toString()))})),this.$refs.bookRef.value=null}},importMultiBooks:function(t){var e=this;return Object(n["a"])(Object(a["a"])().mark((function o(){var s,r,n,c,l,u;return Object(a["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t&&t.length){o.next=2;break}return o.abrupt("return");case 2:if(1!=t.length){o.next=8;break}return e.importBookInfo=t[0].book,e.importBookGroup=[],e.importBookChapters=t[0].chapters,e.showImportBookDialog=!0,o.abrupt("return");case 8:return o.next=10,e.$confirm("你选择导入多本书籍，请选择导入方式?","提示",{confirmButtonText:"批量导入",cancelButtonText:"逐一确认导入",type:"warning",closeOnClickModal:!1,closeOnPressEscape:!1,distinguishCancelAndClose:!0})["catch"]((function(t){return"close"===t&&"close"}));case 10:if(s=o.sent,"close"!==s){o.next=13;break}return o.abrupt("return");case 13:if(!s){o.next=29;break}return o.next=16,e.customImportBookInfo();case 16:if(r=o.sent,!1!==r){o.next=19;break}return o.abrupt("return");case 19:n=0;case 20:if(!(n<t.length)){o.next=27;break}return c=t[n],o.next=24,e.saveBook(Object(i["a"])(Object(i["a"])({},c.book),r),!0)["catch"]((function(){}));case 24:n++,o.next=20;break;case 27:o.next=39;break;case 29:l=0;case 30:if(!(l<t.length)){o.next=38;break}return u=t[l],e.importMultiBookTip="（".concat(l+1,"/").concat(t.length,"）"),o.next=35,e.waitForImportBook(u);case 35:l++,o.next=30;break;case 38:e.importMultiBookTip="";case 39:case"end":return o.stop()}}),o)})))()},waitForImportBook:function(t){var e=this;return new Promise((function(o){e.importBookInfo=t.book,e.importBookGroup=[],e.importBookChapters=t.chapters,e.showImportBookDialog=!0,e.$once("importEnd",o)}))},importBookDialogClosed:function(){var t=this,e=this.importBookInfo.bookUrl;this.importBookInfo={},this.importBookGroup=[],this.importBookChapters=[],this.importUsedTxtRule="",this.$nextTick((function(){t.$emit("importEnd")})),-1!==e.indexOf("assets")&&f["a"].post(this.api+"/deleteFile",{url:e},{silent:!0}).then((function(){}),(function(){}))},customImportBookInfo:function(t,e){var o=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,n;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=e||{},e.groupId=[],r=[{name:"groupId",label:"分组",type:"select",placeholder:"请选择分组",options:o.bookGroupSetList.map((function(t){return{label:t.groupName,value:t.groupId}}))}],e.name&&(r.unshift({name:"name",label:"书名",type:"input"}),r.unshift({name:"author",label:"作者",type:"input"})),s.next=6,o.$msgbox(Object(i["a"])({title:"统一设置分组",message:o.renderForm(e.name?"customImportBookInfo":"customImportBookGroup",e,r,(function(t){e.name&&(e.name=t.name,e.author=t.author),e.groupId=t.groupId})),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"},t||{}))["catch"]((function(t){return"close"===t&&"close"}));case 6:if(n=s.sent,"confirm"===n){s.next=9;break}return s.abrupt("return",!1);case 9:return s.abrupt("return",{group:e.groupId.reduce((function(t,e){return z.a.fromNumber(t).or(e).toNumber()}),0)});case 10:case"end":return s.stop()}}),s)})))()},showBookManage:function(){tt["a"].$emit("showBookManageDialog")},showManageBookGroup:function(){this.loadBookGroup(!0),tt["a"].$emit("showBookGroupDialog",!1)},showActiveLicenseDialog:function(){tt["a"].$emit("showActiveLicenseDialog")},showFileManagerDialog:function(t,e){tt["a"].$emit("showFileManagerDialog",t,e)},downloadBackupFile:function(){var t=st(this.api+"/user/downloadBackupFile",{accessToken:this.$store.state.token});window.open(t,"__blank")},showBookmarkDialog:function(){tt["a"].$emit("showBookmarkDialog")},showReplaceRuleDialog:function(){tt["a"].$emit("showReplaceRuleDialog")},showLicense:function(){tt["a"].$emit("showLicenseDialog")},getShowShelfBooks:function(t){return-1===t?this.shelfBooks:-2===t?this.shelfBooks.filter((function(t){return"loc_book"===t.origin})):-3===t?this.shelfBooks.filter((function(t){return 1===t.type})):-4===t?this.shelfBooks.filter((function(t){return 0===t.group})):-5===t?this.shelfBooks.filter((function(t){return t.canUpdate&&t.lastCheckError})):this.shelfBooks.filter((function(e){return 0===t||z.a.fromNumber(e.group).and(t).greaterThan(0)}))},loadRssSources:function(t){return this.$root.$children[0].loadRssSources(t)},showRssDialog:function(){tt["a"].$emit("showRssSourceListDialog")},showRssArticleListDialog:function(t){tt["a"].$emit("showRssArticleListDialog",t)},noop:function(){},exportBookSource:function(){var t=this;f["a"].get(this.api+"/getBookSources").then((function(e){if(e.data.isSuccess){var o=document.createElement("a"),s=new Blob([JSON.stringify(e.data.data||[],null,4)]);o.download="reader书源-"+t.currentDateTime()+".json",o.href=URL.createObjectURL(s),o.click()}}),(function(e){t.$message.error("导出书源失败 "+(e&&e.toString()))}))},deleteAllBookSource:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认要清空所有书源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(o=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:f["a"].post(t.api+"/deleteAllBookSources").then((function(e){e.data.isSuccess&&(t.$message.success("清空书源成功"),t.loadBookSource(!0))}),(function(e){t.$message.error("清空书源失败 "+(e&&e.toString()))}));case 6:case"end":return e.stop()}}),e)})))()},deleteBookSourceFile:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$confirm("确认要恢复默认书源吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})["catch"]((function(){return!1}));case 2:if(o=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:f["a"].post(t.api+"/deleteBookSourcesFile").then((function(e){e.data.isSuccess&&(t.$message.success("恢复默认书源成功"),t.loadBookSource(!0))}),(function(e){t.$message.error("操作失败 "+(e&&e.toString()))}));case 6:case"end":return e.stop()}}),e)})))()},editBookSource:function(t){var e=this,o=function(t){tt["a"].$emit("showEditor","编辑书源",JSON.stringify(t,null,4),(function(t,o){try{var s=JSON.parse(t);if(!s.bookSourceName)return void e.$message.error("书源名称不能为空");if(!s.bookSourceUrl)return void e.$message.error("书源链接不能为空");f["a"].post(e.api+"/saveBookSource",s).then((function(t){t.data.isSuccess&&(o(),e.$message.success("保存书源成功"),e.loadBookSource(!0))}),(function(t){e.$message.error("保存书源失败 "+(t&&t.toString()))}))}catch(r){e.$message.error("书源必须是JSON格式")}}))};t?f["a"].post(this.api+"/getBookSource",{bookSourceUrl:t.bookSourceUrl}).then((function(t){t.data.isSuccess&&o(t.data.data)}),(function(t){e.$message.error("加载书源信息失败 "+(t&&t.toString()))})):o({bookSourceComment:"",bookSourceGroup:"",bookSourceName:"新增书源",bookSourceType:0,bookSourceUrl:"",bookUrlPattern:"",enabled:!0,header:"",enabledExplore:!0,exploreUrl:"",ruleBookInfo:{},ruleContent:{content:""},ruleExplore:{},ruleSearch:{author:"",bookList:"",bookUrl:"",coverUrl:"",intro:"",kind:"",lastChapter:"",name:""},ruleToc:{chapterList:"",chapterName:"",chapterUrl:""},searchUrl:""})},editBookSourceHeader:function(t){var e=this,o=function(t){tt["a"].$emit("showEditor","编辑书源请求头header",t.header||JSON.stringify({Cookie:""},null,4),(function(o,s){try{o.startsWith("@js:")||o.startsWith("<js>")||JSON.parse(o),t.header=o,f["a"].post(e.api+"/saveBookSource",t).then((function(t){t.data.isSuccess&&(s(),e.$message.success("保存书源成功"),e.loadBookSource(!0))}),(function(t){e.$message.error("保存书源失败 "+(t&&t.toString()))}))}catch(r){e.$message.error("书源请求头必须是JSON格式/脚本格式")}}))};f["a"].post(this.api+"/getBookSource",{bookSourceUrl:t.bookSourceUrl}).then((function(t){t.data.isSuccess&&o(t.data.data)}),(function(t){e.$message.error("加载书源信息失败 "+(t&&t.toString()))}))},updateForce:function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(e){var o;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("registrations",e),o=0;case 2:if(!(o<e.length)){t.next=8;break}return t.next=5,e[o].update();case 5:o++,t.next=2;break;case 8:console.log("Try to clear home cache"),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_HOME_CACHE"}),console.log("Try to skip waiting"),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SKIP_WAITING"}),setTimeout((function(){console.log("Try to reload force"),window.location.reload(!0)}),50);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},scanCacheStorage:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.analyseLocalStorage();case 2:return e.t0=e.sent.totalBytes,e.next=5,t.analyseLocalStorage("bookSourceList");case 5:return e.t1=e.sent.totalBytes,e.next=8,t.analyseLocalStorage("rssSources");case 8:return e.t2=e.sent.totalBytes,e.next=11,t.analyseLocalStorage("chapterList");case 11:return e.t3=e.sent.totalBytes,e.next=14,t.analyseLocalStorage("chapterContent");case 14:return e.t4=e.sent.totalBytes,e.next=17,t.analyseLocalStorage("ttsData");case 17:e.t5=e.sent.totalBytes,t.localCacheStats={total:e.t0,bookSourceList:e.t1,rssSources:e.t2,chapterList:e.t3,chapterContent:e.t4,ttsData:e.t5};case 19:case"end":return e.stop()}}),e)})))()},analyseLocalStorage:function(t){var e=0,o=0;return window.$cacheStorage.iterate((function(s,r){(!t||r.indexOf(t)>=0)&&(e+=JSON.stringify(s).getBytesLength(),r.startsWith("localCache@")&&(o+=JSON.stringify(s).getBytesLength()))})).then((function(){return{totalBytes:Object(et["d"])(e),cacheBytes:Object(et["d"])(o)}}))["catch"]((function(){}))},clearCache:function(t){var e=this,o=0;window.$cacheStorage.iterate((function(e,s){(!t||s.indexOf(t)>=0)&&s.startsWith("localCache@")&&(o+=JSON.stringify(e).getBytesLength(),window.$cacheStorage.removeItem(s))})).then((function(){return e.scanCacheStorage(),{cacheBytes:Object(et["d"])(o)}}))["catch"]((function(){}))},scrollHandler:function(){this.lastScrollTop=this.$refs.bookList.scrollTop},getBookCoverUrl:function(t){return t.customCoverUrl||t.coverUrl},logout:function(){var t=this;f["a"].post(this.api+"/logout").then((function(e){e.data.isSuccess&&(t.$store.commit("setToken",""),window.location.reload(!0))}),(function(e){t.$message.error("注销失败 "+(e&&e.toString()))}))},getChapterListByRule:function(){var t=this;return f["a"].post("/getChapterListByRule",this.importBookInfo).then((function(e){e.data.isSuccess&&e.data.data.book&&(t.importBookInfo=e.data.data.book,t.importBookChapters=e.data.data.chapters)}),(function(e){t.$message.error("注销失败 "+(e&&e.toString()))}))},showUserManageDialog:function(){tt["a"].$emit("showUserManageDialog")},showMPCode:function(){tt["a"].$emit("showMPCodeDialog")},joinTGChannel:function(){window.open("https://t.me/facker_channel","_target")},ensureLoadBookCover:function(){var t=this;try{this.$refs.bookList.dispatchEvent(new MouseEvent("scroll")),this.$refs.bookListComp.$refs.bookCoverList.forEach((function(e){!e.show&&Object(ot["d"])(e.$el,t.$refs.bookList)&&(e.show=!0)}))}catch(e){console.error(e)}}},computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["collapseMenu","dialogWidth","dialogSmallWidth","dialogTop","dialogContentHeight","popupWidth"])),{},{config:function(){return this.$store.getters.config},isNight:function(){return this.$store.getters.isNight},themeColor:function(){return this.$store.getters.isNight?{background:"#f7f7f7"}:{background:"#222"}},bookList:function(){var t=this;return this.isSearchResult?this.searchResult:this.showShelfBooks.filter((function(e){return!t.keyword||(e.name||"").indexOf(t.keyword)>=0||(e.author||"").indexOf(t.keyword)>=0||(e.kind||"").indexOf(t.keyword)>=0}))},bookCoverList:function(){var t=this;return this.bookList.filter((function(e){return t.getBookCoverUrl(e)})).map((function(e){return t.getCover(t.getBookCoverUrl(e),!0)}))},shelfBooks:function(){var t=this,e=[].concat(this.$store.getters.shelfBooks);return e.sort((function(e,o){return(e[t.shelfConfig.bookOrder]>o[t.shelfConfig.bookOrder]?1:e[t.shelfConfig.bookOrder]<o[t.shelfConfig.bookOrder]?-1:0)*("name"===t.shelfConfig.bookOrder?1:-1)}))},showShelfBooks:function(){return this.getShowShelfBooks(this.showBookGroup)},searchResultMap:function(){return this.searchResult.reduce((function(t,e){return t[e.bookUrl]=e,t}),{})},connectStatus:function(){return this.$store.state.connected?"后端已连接":this.connecting?"正在连接后端服务器……":"点击设置后端接口前缀"},connectType:function(){return this.$store.state.connected?"success":"danger"},readingRecent:function(){return this.$store.getters.readingBook&&this.$store.getters.readingBook.name?this.$store.getters.readingBook:{name:"尚无阅读记录",bookUrl:"",index:0}},loginAuth:function(){return this.$store.state.loginAuth},bookSourceList:function(){return this.$store.state.bookSourceList},userNS:{get:function(){return this.$store.state.userNS},set:function(t){this.$store.commit("setUserNS",t),t&&this.$store.commit("setIsManagerMode",!0)}},userList:{get:function(){return this.$store.state.userList},set:function(t){this.$store.commit("setUserList",t)}},bookSourceShowList:function(){return this.isShowFailureBookSource?this.$store.state.failureBookSource:this.bookSourceList},bookSourceGroupList:function(){return this.$store.getters.bookSourceGroupList},bookSourceShowGroup:function(){if(this.isShowFailureBookSource)return["全部"].concat(j["e"]).concat(["timeout"]);var t=new Set;return t.add("全部"),this.bookSourceShowList.forEach((function(e){e.bookSourceGroup&&e.bookSourceGroup.split(",").forEach((function(e){e&&t.add(e)}))})),t.add("未分组"),Array.from(t)},bookSourceShowLength:function(){return this.bookSourceShowResult.length},bookSourceShowSearchResult:function(){var t=this;return this.bookSourceKeyword?this.bookSourceShowList.filter((function(e){return-1!==(e.bookSourceName||"").indexOf(t.bookSourceKeyword)||-1!==(e.bookSourceUrl||"").indexOf(t.bookSourceKeyword)})):this.bookSourceShowList},bookSourceShowResult:function(){var t=this;return this.showSourceGroup&&"全部"!==this.showSourceGroup?this.isShowFailureBookSource?this.bookSourceShowSearchResult.filter((function(e){return!t.showSourceGroup||e.errorMsg.indexOf(t.showSourceGroup)>=0})):this.bookSourceShowSearchResult.filter((function(e){return"未分组"===t.showSourceGroup?!e.bookSourceGroup:(e.bookSourceGroup+",").indexOf(t.showSourceGroup+",")>=0})):this.bookSourceShowSearchResult},bookSourceShowResultPageList:function(){var t=(this.bookSourcePagination.page-1)*this.bookSourcePagination.size;return t>this.bookSourceShowResult.length?[]:this.bookSourceShowResult.slice(t,Math.min(t+this.bookSourcePagination.size,this.bookSourceShowResult.length))},shelfConfig:function(){return this.$store.state.shelfConfig},showBookGroup:{get:function(){return this.bookGroupDisplayList.length?this.$store.state.shelfConfig.showBookGroup:-1},set:function(t){this.$store.commit("setShelfConfig",Object(i["a"])(Object(i["a"])({},this.$store.state.shelfConfig),{},{showBookGroup:t}))}},showBookGroupString:{get:function(){return""+this.showBookGroup},set:function(t){this.showBookGroup=+t}},bookGroupSetList:function(){return this.$store.state.bookGroupList.filter((function(t){return t.groupId>0}))},bookGroupDisplayList:function(){var t=this;return this.$store.state.bookGroupList.filter((function(e){return t.getShowShelfBooks(e.groupId).length&&e.show})).sort((function(t,e){return t.order-e.order}))},searchConfig:{get:function(){return this.$store.state.searchConfig},set:function(t){this.$store.commit("setSearchConfig",t)}},isShowTocRule:function(){try{return this.importBookInfo&&this.importBookInfo.originName&&(this.importBookInfo.originName.toLowerCase().endsWith(".txt")||this.importBookInfo.originName.toLowerCase().endsWith(".epub")||this.importBookInfo.originName.toLowerCase().endsWith(".pdf"))}catch(t){}return!1},tocRuleList:function(){return this.importBookInfo&&this.importBookInfo.originName?this.importBookInfo.originName.toLowerCase().endsWith(".txt")?this.$store.state.txtTocRules:this.importBookInfo.originName.toLowerCase().endsWith(".epub")?[{name:"根据 Spin 获取章节，使用 Toc 补充章节名",rule:"spin+toc"},{name:"根据 Spin 获取章节，强制使用 Toc 章节名",rule:"spin<toc"},{name:"根据 Spin 获取章节",rule:"spin"},{name:"根据 Toc 获取章节，使用 Spin 补充章节名",rule:"toc+spin"},{name:"根据 Toc 获取章节，强制使用 Spin 章节名",rule:"toc<spin"},{name:"根据 Toc 获取章节",rule:"toc"}]:[{name:"使用书签作为章节",rule:"outline"},{name:"一页一章",rule:"page"}]:[]},isShowActiveLicenseBtn:function(){return this.$store.state.isManagerMode&&window.location.host.indexOf("htmake")>=0}})},it=rt,at=(o("7130"),o("fc5f"),Object(d["a"])(it,s,r,!1,null,"b817d39e",null));e["default"]=at.exports},dad2:function(t,e,o){"use strict";var s=o("d066"),r=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},i=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var o=s("Set");try{(new o)[t](r(0));try{return(new o)[t](r(-1)),!1}catch(n){if(!e)return!0;try{return(new o)[t](i(-1/0)),!1}catch(c){var a=new o;return a.add(1),a.add(2),e(a[t](i(1/0)))}}}catch(c){return!1}}},dc19:function(t,e,o){"use strict";var s=o("cb27").has;t.exports=function(t){return s(t),t}},e8e5:function(t,e,o){},e9bc:function(t,e,o){"use strict";var s=o("dc19"),r=o("cb27").add,i=o("83b9e"),a=o("7f65"),n=o("5388");t.exports=function(t){var e=s(this),o=a(t).getIterator(),c=i(e);return n(o,(function(t){r(c,t)})),c}},f067:function(t,e,o){},fa39:function(t,e){t.exports="data:image/png;base64,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"},fc5f:function(t,e,o){"use strict";o("87b5")}}]);